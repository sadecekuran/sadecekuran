<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THE LENG - QR Scanner</title>
  <style>
    :root {
      --bg-primary: #000000;
      --bg-secondary: #111111;
      --text-primary: #ffffff;
      --text-secondary: #cccccc;
      --text-muted: #888888;
      --border-color: #333333;
      --accent-light: #ffffff;
      --accent-dark: #000000;
      --shadow-light: rgba(255, 255, 255, 0.1);
      --shadow-dark: rgba(0, 0, 0, 0.5);
      --gradient-primary: linear-gradient(135deg, #ffffff, #cccccc);
      --gradient-secondary: linear-gradient(135deg, #333333, #111111);
      --neon-blue: #ffffff;
      --neon-purple: #000000;
      --neon-green: #ffffff;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    /* Galaxy Animation Background */
    .galaxy-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: radial-gradient(ellipse at center, #111111 0%, #000000 100%);
    }

    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 3s infinite;
    }

    .star:nth-child(odd) {
      animation-delay: 1s;
    }

    .star:nth-child(3n) {
      animation-delay: 2s;
    }

    .star.neon-blue {
      background: var(--neon-blue);
      box-shadow: 0 0 10px var(--neon-blue);
    }

    .star.neon-purple {
      background: var(--neon-purple);
      box-shadow: 0 0 10px var(--neon-purple);
    }

    .star.neon-green {
      background: var(--neon-green);
      box-shadow: 0 0 10px var(--neon-green);
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    .nebula {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: 
        radial-gradient(circle at 20% 30%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255, 0, 255, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 60% 20%, rgba(0, 255, 0, 0.04) 0%, transparent 50%);
      animation: nebula-drift 20s infinite linear;
    }

    @keyframes nebula-drift {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.1); }
      100% { transform: rotate(360deg) scale(1); }
    }

    /* Floating particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      animation: float 10s infinite linear;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) translateX(100px);
        opacity: 0;
      }
    }

    /* Navbar */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      z-index: 1000;
      display: flex;
      align-items: center;
      padding: 0 2rem;
    }

    .navbar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--neon-blue), var(--neon-purple), var(--neon-green), transparent);
      animation: neon-flow 3s infinite;
    }

    @keyframes neon-flow {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      animation: logo-glow 2s infinite alternate;
    }

    @keyframes logo-glow {
      0% { filter: brightness(1); }
      100% { filter: brightness(1.2); }
    }

    .nav-menu {
      margin-left: auto;
      display: flex;
      gap: 2rem;
      align-items: center;
    }

    .nav-item {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
      padding: 0.5rem 1rem;
      border-radius: 20px;
    }

    .nav-item:hover {
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.1);
    }

    .nav-item.active {
      color: var(--neon-blue);
      background: rgba(0, 255, 255, 0.1);
    }

    /* Main Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 80px 2rem 2rem;
      position: relative;
      z-index: 10;
    }

    /* Mode Toggle */
    .mode-toggle {
      display: flex;
      justify-content: center;
      margin-bottom: 3rem;
      animation: fadeInUp 1s ease-out 0.2s both;
    }

    .toggle-container {
      background: rgba(17, 17, 17, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 50px;
      padding: 4px;
      border: 1px solid var(--border-color);
      display: flex;
      position: relative;
      overflow: hidden;
    }

    .toggle-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
      opacity: 0.1;
      animation: rainbow-bg 3s infinite;
    }

    @keyframes rainbow-bg {
      0%, 100% { transform: translateX(-100%); }
      50% { transform: translateX(100%); }
    }

    .toggle-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 46px;
      background: transparent;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    .toggle-btn.active {
      background: var(--gradient-primary);
      color: var(--bg-primary);
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }

    .toggle-btn:hover:not(.active) {
      color: var(--text-primary);
      background: rgba(255, 255, 255, 0.1);
    }

    /* Cards */
    .card {
      background: rgba(17, 17, 17, 0.5);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
      backdrop-filter: blur(10px);
      box-shadow: 
        0 8px 32px var(--shadow-dark),
        inset 0 1px 0 var(--shadow-light);
      animation: fadeInUp 1s ease-out 0.4s both;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple), var(--neon-green));
      opacity: 0.5;
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1rem;
      background: linear-gradient(45deg, var(--text-primary), var(--neon-blue));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .card-subtitle {
      text-align: center;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    /* Camera Section - Square */
    .camera-container {
      position: relative;
      width: 100%;
      max-width: 500px;
      margin: 0 auto 1.5rem;
      aspect-ratio: 1;
      background: var(--bg-primary);
      border-radius: 20px;
      overflow: hidden;
      border: 2px solid var(--border-color);
      box-shadow: 
        0 0 30px rgba(0, 255, 255, 0.2),
        inset 0 0 30px rgba(0, 0, 0, 0.5);
    }

    .camera-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .camera-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: var(--text-muted);
      flex-direction: column;
      gap: 1rem;
    }

    .camera-icon {
      width: 4rem;
      height: 4rem;
      opacity: 0.5;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }

    /* Scanning Overlay */
    .scanning-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .scan-frame {
      width: 60%;
      height: 60%;
      border: 2px solid rgba(0, 255, 255, 0.8);
      border-radius: 20px;
      position: relative;
      animation: scan-frame-glow 2s infinite;
    }

    @keyframes scan-frame-glow {
      0%, 100% { 
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        border-color: rgba(0, 255, 255, 0.8);
      }
      50% { 
        box-shadow: 0 0 40px rgba(0, 255, 255, 0.8);
        border-color: rgba(0, 255, 255, 1);
      }
    }

    .scan-corner {
      position: absolute;
      width: 30px;
      height: 30px;
      border: 4px solid var(--neon-blue);
      animation: corner-pulse 1.5s infinite;
    }

    @keyframes corner-pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .scan-corner.top-left {
      top: -2px;
      left: -2px;
      border-right: none;
      border-bottom: none;
      border-radius: 20px 0 0 0;
    }

    .scan-corner.top-right {
      top: -2px;
      right: -2px;
      border-left: none;
      border-bottom: none;
      border-radius: 0 20px 0 0;
    }

    .scan-corner.bottom-left {
      bottom: -2px;
      left: -2px;
      border-right: none;
      border-top: none;
      border-radius: 0 0 0 20px;
    }

    .scan-corner.bottom-right {
      bottom: -2px;
      right: -2px;
      border-left: none;
      border-top: none;
      border-radius: 0 0 20px 0;
    }

    .scan-line {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--neon-blue), var(--neon-purple), var(--neon-blue), transparent);
      animation: scan-animation 2s linear infinite;
      border-radius: 2px;
      box-shadow: 0 0 10px var(--neon-blue);
    }

    @keyframes scan-animation {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(calc(100% + 60px)); opacity: 0; }
    }

    /* QR Detection Effect */
    .qr-detected {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle, rgba(0, 255, 0, 0.2) 0%, transparent 70%);
      animation: detection-flash 0.5s;
    }

    @keyframes detection-flash {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
      color: white;
      box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 255, 255, 0.4);
    }

    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border-color);
      color: var(--text-secondary);
    }

    .btn-secondary:hover {
      border-color: var(--neon-blue);
      color: var(--neon-blue);
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
    }

    .btn-danger {
      background: linear-gradient(45deg, #ff4444, #cc0000);
      color: white;
    }

    .btn-danger:hover {
      background: linear-gradient(45deg, #ff6666, #ff0000);
      transform: translateY(-2px);
    }

    .btn-center {
      display: flex;
      justify-content: center;
    }

    /* Input Section */
    .input-group {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .input {
      flex: 1;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid var(--border-color);
      border-radius: 12px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.3s ease;
      font-family: 'JetBrains Mono', monospace;
    }

    .input:focus {
      border-color: var(--neon-blue);
      box-shadow: 0 0 0 3px rgba(0, 255, 255, 0.1);
      background: rgba(0, 0, 0, 0.7);
    }

    .input::placeholder {
      color: var(--text-muted);
    }

    /* Drop Area */
    .drop-area {
      border: 2px dashed var(--border-color);
      border-radius: 16px;
      padding: 3rem;
      text-align: center;
      background: rgba(17, 17, 17, 0.3);
      transition: all 0.3s ease;
      cursor: pointer;
      margin-bottom: 1.5rem;
      position: relative;
      overflow: hidden;
    }

    .drop-area::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, transparent 30%, rgba(0, 255, 255, 0.05) 50%, transparent 70%);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .drop-area:hover::before {
      transform: translateX(100%);
    }

    .drop-area:hover,
    .drop-area.dragover {
      border-color: var(--neon-blue);
      background: rgba(0, 255, 255, 0.1);
      transform: scale(1.02);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.2);
    }

    .drop-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    /* QR Code Display */
    .qr-display {
      text-align: center;
      padding: 2rem;
    }

    .qr-code-container {
      display: inline-block;
      padding: 1rem;
      background: white;
      border-radius: 12px;
      margin-bottom: 1rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      animation: qr-appear 0.5s ease-out;
    }

    @keyframes qr-appear {
      0% { opacity: 0; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1); }
    }

    .qr-code-img {
      width: 300px;
      height: 300px;
      max-width: 100%;
    }

    .qr-url {
      font-family: 'JetBrains Mono', monospace;
      background: rgba(0, 0, 0, 0.5);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      word-break: break-all;
      font-size: 0.9rem;
      border: 1px solid var(--border-color);
    }

    /* History */
    .history-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .history-list {
      max-height: 300px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--neon-blue) transparent;
    }

    .history-list::-webkit-scrollbar {
      width: 6px;
    }

    .history-list::-webkit-scrollbar-track {
      background: transparent;
    }

    .history-list::-webkit-scrollbar-thumb {
      background: var(--neon-blue);
      border-radius: 3px;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 0.5rem;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid transparent;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .history-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--neon-blue);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .history-item:hover {
      border-color: var(--neon-blue);
      transform: translateX(8px);
      background: rgba(0, 255, 255, 0.1);
      box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2);
    }

    .history-item:hover::before {
      transform: scaleY(1);
    }

    .history-url {
      color: var(--text-secondary);
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.9rem;
      flex: 1;
      margin-right: 1rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Toast Notifications */
    .toast {
      position: fixed;
      top: 80px;
      right: 2rem;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      font-weight: 500;
      transform: translateX(400px);
      transition: all 0.3s ease;
      z-index: 1000;
      backdrop-filter: blur(10px);
      max-width: 350px;
      border: 1px solid;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      background: rgba(0, 255, 0, 0.1);
      border-color: var(--neon-green);
      color: var(--neon-green);
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
    }

    .toast.error {
      background: rgba(255, 0, 0, 0.1);
      border-color: #ff4444;
      color: #ff4444;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.2);
    }

    .toast.info {
      background: rgba(0, 255, 255, 0.1);
      border-color: var(--neon-blue);
      color: var(--neon-blue);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
    }

    /* Loading Animation */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid var(--border-color);
      border-radius: 50%;
      border-top-color: var(--neon-blue);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Success Animation */
    .success-checkmark {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: block;
      stroke-width: 2;
      stroke: var(--neon-green);
      stroke-miterlimit: 10;
      margin: 10% auto;
      box-shadow: inset 0px 0px 0px var(--neon-green);
      animation: fill 0.4s ease-in-out 0.4s forwards, scale 0.3s ease-in-out 0.9s both;
    }

    .success-checkmark__circle {
      stroke-dasharray: 166;
      stroke-dashoffset: 166;
      stroke-width: 2;
      stroke-miterlimit: 10;
      stroke: var(--neon-green);
      fill: none;
      animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
    }

    .success-checkmark__check {
      transform-origin: 50% 50%;
      stroke-dasharray: 48;
      stroke-dashoffset: 48;
      animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
    }

    @keyframes stroke {
      100% {
        stroke-dashoffset: 0;
      }
    }

    @keyframes scale {
      0%, 100% {
        transform: none;
      }
      50% {
        transform: scale3d(1.1, 1.1, 1);
      }
    }

    @keyframes fill {
      100% {
        box-shadow: inset 0px 0px 0px 30px var(--neon-green);
      }
    }

    /* Animations */
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 80px 1rem 2rem;
      }
      
      .navbar {
        padding: 0 1rem;
      }
      
      .nav-menu {
        gap: 1rem;
      }
      
      .nav-item {
        padding: 0.25rem 0.5rem;
        font-size: 0.9rem;
      }
      
      .input-group {
        flex-direction: column;
      }
      
      .toggle-container {
        flex-direction: column;
        width: 100%;
        max-width: 300px;
      }
      
      .toggle-btn {
        justify-content: center;
      }
      
      .toast {
        top: 70px;
        right: 1rem;
        left: 1rem;
        transform: translateY(-100px);
        max-width: none;
      }
      
      .toast.show {
        transform: translateY(0);
      }

      .camera-container {
        max-width: 350px;
      }
    }

    /* Hidden class */
    .hidden {
      display: none !important;
    }

    /* Icons */
    .icon {
      width: 1.25rem;
      height: 1.25rem;
      fill: currentColor;
    }

    /* Status indicator */
    .status-indicator {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.8);
      border: 2px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      z-index: 100;
    }

    .status-indicator.scanning {
      border-color: var(--neon-blue);
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
      animation: pulse-blue 2s infinite;
    }

    .status-indicator.detected {
      border-color: var(--neon-green);
      box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
      animation: pulse-green 1s;
    }

    @keyframes pulse-blue {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes pulse-green {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
  </style>
</head>
<body>
  <!-- Galaxy Background -->
  <div class="galaxy-bg"></div>
  <div class="stars" id="stars"></div>
  <div class="nebula"></div>
  <div class="particles" id="particles"></div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">THE LENG</div>
    <div class="nav-menu">
      <a href="#" class="nav-item active" id="scannerNav" onclick="switchMode('scanner')">Tarayıcı</a>
      <a href="#" class="nav-item" id="generatorNav" onclick="switchMode('generator')">Oluşturucu</a>
      <a href="#" class="nav-item" onclick="showStats()">İstatistik</a>
    </div>
  </nav>

  <!-- Status Indicator -->
  <div class="status-indicator" id="statusIndicator">
    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
      <circle cx="12" cy="13" r="3"/>
    </svg>
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <div class="toggle-container">
        <button class="toggle-btn active" id="scannerBtn" onclick="switchMode('scanner')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
            <circle cx="12" cy="13" r="3"/>
          </svg>
          Tarayıcı
        </button>
        <button class="toggle-btn" id="generatorBtn" onclick="switchMode('generator')">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect width="5" height="5" x="3" y="3" rx="1"/>
            <rect width="5" height="5" x="16" y="3" rx="1"/>
            <rect width="5" height="5" x="3" y="16" rx="1"/>
            <path d="m21 16-3.5-3.5-1 1 1.5 1.5L16 17l1 1 1.5-1.5 1 1L21 16ZM21 21l-1.5-1.5L18 21l-1-1 1.5-1.5L17 17l1-1 3.5 3.5L21 21Z"/>
          </svg>
          Oluşturucu
        </button>
      </div>
    </div>

    <!-- Scanner Section -->
    <div id="scannerSection">
      <div class="card">
        <div class="camera-container" id="cameraContainer">
          <video id="cameraVideo" class="camera-video hidden" autoplay playsinline muted></video>
          <canvas id="scanCanvas" class="hidden"></canvas>
          
          <div class="camera-placeholder" id="cameraPlaceholder">
            <svg class="camera-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
              <circle cx="12" cy="13" r="3"/>
            </svg>
            <p>Kamera başlatılıyor...</p>
          </div>

          <div class="scanning-overlay hidden" id="scanningOverlay">
            <div class="scan-frame">
              <div class="scan-corner top-left"></div>
              <div class="scan-corner top-right"></div>
              <div class="scan-corner bottom-left"></div>
              <div class="scan-corner bottom-right"></div>
              <div class="scan-line"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Scan History -->
      <div class="card" id="scanHistoryCard">
        <div class="history-header">
          <h3>Tarama Geçmişi</h3>
          <button class="btn btn-secondary" onclick="clearScanHistory()">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18"/>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            </svg>
            Temizle
          </button>
        </div>
        <div class="history-list" id="scanHistoryList">
          <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Henüz tarama yapılmadı</p>
        </div>
      </div>
    </div>

    <!-- Generator Section -->
    <div id="generatorSection" class="hidden">
      <div class="card">
        <h2 class="card-title">QR Kod Oluşturucu</h2>
        <p class="card-subtitle">URL girin veya sürükleyip bırakın</p>

        <div class="input-group">
          <input 
            type="url" 
            class="input" 
            id="urlInput" 
            placeholder="https://example.com"
            onkeydown="handleUrlInputKeydown(event)"
          >
          <button class="btn btn-primary" onclick="generateQRCode()">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect width="5" height="5" x="3" y="3" rx="1"/>
              <rect width="5" height="5" x="16" y="3" rx="1"/>
              <rect width="5" height="5" x="3" y="16" rx="1"/>
            </svg>
            <span id="generateBtnText">Oluştur</span>
          </button>
        </div>

        <div class="drop-area" id="dropArea" onclick="document.getElementById('urlInput').focus()">
          <div class="drop-icon">🔗</div>
          <div style="font-size: 1.2rem; margin-bottom: 0.5rem;">URL'yi buraya sürükleyin</div>
          <div style="font-size: 0.9rem; color: var(--text-muted);">veya yapıştırın (Ctrl+V)</div>
        </div>
      </div>

      <!-- QR Code Display -->
      <div class="card hidden" id="qrDisplayCard">
        <div class="qr-display">
          <h3 style="margin-bottom: 1.5rem;">Oluşturulan QR Kod</h3>
          
          <div class="qr-code-container">
            <img id="qrCodeImg" class="qr-code-img" alt="Generated QR Code">
          </div>
          
          <div class="qr-url" id="qrUrl"></div>
          
          <button class="btn btn-primary" onclick="downloadQRCode()">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            QR Kodu İndir
          </button>
        </div>
      </div>

      <!-- Generation History -->
      <div class="card" id="generationHistoryCard">
        <div class="history-header">
          <h3>Oluşturma Geçmişi</h3>
          <button class="btn btn-secondary" onclick="clearGenerationHistory()">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 6h18"/>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            </svg>
            Temizle
          </button>
        </div>
        <div class="history-list" id="generationHistoryList">
          <p style="text-align: center; color: var(--text-muted); padding: 2rem;">Henüz QR kod oluşturulmadı</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <script>
    // Global variables
    let currentMode = 'scanner';
    let isScanning = false;
    let stream = null;
    let scanInterval = null;
    let lastScannedUrl = '';
    let currentQRUrl = '';
    let scanCount = 0;
    let generateCount = 0;

    // Initialize app
    document.addEventListener('DOMContentLoaded', function() {
      createStars();
      createParticles();
      loadHistories();
      checkHashMode();
      setupEventListeners();
      // Auto-start camera
      setTimeout(startCamera, 1000);
    });

    // Create animated stars with colors
    function createStars() {
      const starsContainer = document.getElementById('stars');
      const starCount = 150;
      const colors = ['', 'neon-blue', 'neon-purple', 'neon-green'];
      
      for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        const colorClass = Math.random() < 0.7 ? '' : colors[Math.floor(Math.random() * colors.length)];
        star.className = `star ${colorClass}`;
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.width = Math.random() * 3 + 1 + 'px';
        star.style.height = star.style.width;
        star.style.animationDelay = Math.random() * 3 + 's';
        starsContainer.appendChild(star);
      }
    }

    // Create floating particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 20;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 10 + 's';
        particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Setup event listeners
    function setupEventListeners() {
      // Hash change listener
      window.addEventListener('hashchange', checkHashMode);
      
      // Drop area events
      const dropArea = document.getElementById('dropArea');
      if (dropArea) {
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        ['dragenter', 'dragover'].forEach(eventName => {
          dropArea.addEventListener(eventName, () => dropArea.classList.add('dragover'), false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
          dropArea.addEventListener(eventName, () => dropArea.classList.remove('dragover'), false);
        });
        
        dropArea.addEventListener('drop', handleDrop, false);
      }
      
      // Paste event
      document.addEventListener('paste', handlePaste);
    }

    // Prevent default drag behaviors
    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    // Handle file drop
    function handleDrop(e) {
      const url = e.dataTransfer.getData('text/uri-list') || e.dataTransfer.getData('text/plain');
      if (url) {
        document.getElementById('urlInput').value = url.trim();
        generateQRCode(url.trim());
      }
    }

    // Handle paste
    function handlePaste(e) {
      if (currentMode === 'generator' && (document.activeElement === document.getElementById('dropArea') || document.activeElement === document.getElementById('urlInput'))) {
        const paste = e.clipboardData.getData('text');
        if (paste && isValidUrl(paste)) {
          document.getElementById('urlInput').value = paste;
          generateQRCode(paste);
        }
      }
    }

    // Check hash for mode
    function checkHashMode() {
      const hash = window.location.hash.slice(1);
      if (hash === 'generator') {
        switchMode('generator');
      } else {
        switchMode('scanner');
      }
    }

    // Switch between modes
    function switchMode(mode) {
      currentMode = mode;
      
      // Update buttons
      document.getElementById('scannerBtn').classList.toggle('active', mode === 'scanner');
      document.getElementById('generatorBtn').classList.toggle('active', mode === 'generator');
      
      // Update nav
      document.getElementById('scannerNav').classList.toggle('active', mode === 'scanner');
      document.getElementById('generatorNav').classList.toggle('active', mode === 'generator');
      
      // Update sections
      document.getElementById('scannerSection').classList.toggle('hidden', mode !== 'scanner');
      document.getElementById('generatorSection').classList.toggle('hidden', mode !== 'generator');
      
      // Update hash
      window.location.hash = mode === 'generator' ? 'generator' : '';
      
      // Handle camera
      if (mode === 'scanner' && !isScanning) {
        setTimeout(startCamera, 500);
      } else if (mode !== 'scanner' && isScanning) {
        stopCamera();
      }
    }

    // URL validation
    function isValidUrl(string) {
      try {
        const url = new URL(string.startsWith('http') ? string : 'https://' + string);
        return ['http:', 'https:'].includes(url.protocol);
      } catch (_) {
        return false;
      }
    }

    // Show toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 4000);
    }

    // Camera functions
    async function startCamera() {
      if (isScanning) return;
      
      try {
        stream = await navigator.mediaDevices.getUserMedia({
          video: {
            facingMode: 'environment',
            width: { ideal: 1280 },
            height: { ideal: 720 }
          }
        });

        const video = document.getElementById('cameraVideo');
        video.srcObject = stream;
        
        // Show video, hide placeholder
        document.getElementById('cameraPlaceholder').classList.add('hidden');
        document.getElementById('scanningOverlay').classList.remove('hidden');
        video.classList.remove('hidden');
        
        // Update status
        document.getElementById('statusIndicator').classList.add('scanning');
        
        isScanning = true;
        startScanning();
        
        showToast('Kamera aktif - QR kodları taranıyor', 'info');
      } catch (error) {
        showToast('Kameraya erişim sağlanamadı. Lütfen izinleri kontrol edin.', 'error');
        document.getElementById('cameraPlaceholder').innerHTML = `
          <svg class="camera-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
            <circle cx="12" cy="13" r="3"/>
            <line x1="23" y1="1" x2="1" y2="23"/>
          </svg>
          <p>Kamera erişimi reddedildi</p>
          <button class="btn btn-primary" onclick="startCamera()" style="margin-top: 1rem;">Tekrar Dene</button>
        `;
      }
    }

    function stopCamera() {
      if (stream) {
        stream.getTracks().forEach(track => track.stop());
        stream = null;
      }
      
      if (scanInterval) {
        clearInterval(scanInterval);
        scanInterval = null;
      }
      
      // Hide video, show placeholder
      document.getElementById('cameraVideo').classList.add('hidden');
      document.getElementById('scanningOverlay').classList.add('hidden');
      document.getElementById('cameraPlaceholder').classList.remove('hidden');
      
      // Update status
      document.getElementById('statusIndicator').classList.remove('scanning');
      
      isScanning = false;
    }

    function startScanning() {
      const video = document.getElementById('cameraVideo');
      const canvas = document.getElementById('scanCanvas');
      const ctx = canvas.getContext('2d');

      const scan = () => {
        if (!isScanning || !video.videoWidth) return;

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0);

        // Try to detect QR code using BarcodeDetector if available
        if ('BarcodeDetector' in window) {
          const barcodeDetector = new BarcodeDetector({
            formats: ['qr_code']
          });

          barcodeDetector.detect(canvas)
            .then(barcodes => {
              if (barcodes.length > 0) {
                const qrCode = barcodes[0];
                handleQRDetected(qrCode.rawValue);
              }
            })
            .catch(() => {
              // Fallback - could implement jsQR here
            });
        }
      };

      // Scan every 300ms for better performance
      scanInterval = setInterval(scan, 300);
    }

    function handleQRDetected(url) {
      if (url === lastScannedUrl) return;
      
      lastScannedUrl = url;
      scanCount++;
      
      // Visual feedback
      const container = document.getElementById('cameraContainer');
      const detectedEffect = document.createElement('div');
      detectedEffect.className = 'qr-detected';
      container.appendChild(detectedEffect);
      
      setTimeout(() => {
        container.removeChild(detectedEffect);
      }, 500);
      
      // Update status indicator
      document.getElementById('statusIndicator').classList.add('detected');
      setTimeout(() => {
        document.getElementById('statusIndicator').classList.remove('detected');
      }, 1000);
      
      // Add to scan history
      addToScanHistory(url);
      
      showToast(`QR Kod tespit edildi! Yönlendiriliyor...`, 'success');
      
      // Direct redirect (no popup)
      setTimeout(() => {
        redirectToUrl(url);
      }, 1000);
    }

    function redirectToUrl(url) {
      try {
        const finalUrl = url.startsWith('http') ? url : `https://${url}`;
        // Direct redirect instead of popup
        window.location.href = finalUrl;
      } catch (error) {
        showToast('URL açılamadı', 'error');
      }
    }

    // QR Code generation
    function handleUrlInputKeydown(event) {
      if (event.key === 'Enter') {
        generateQRCode();
      }
    }

    async function generateQRCode(inputUrl = null) {
      const url = inputUrl || document.getElementById('urlInput').value.trim();
      
      if (!url) {
        showToast('Lütfen bir URL girin', 'error');
        return;
      }

      const finalUrl = url.startsWith('http') ? url : `https://${url}`;
      
      if (!isValidUrl(finalUrl)) {
        showToast('Geçersiz URL formatı', 'error');
        return;
      }

      // Show loading
      const btnText = document.getElementById('generateBtnText');
      btnText.innerHTML = '<div class="loading"></div>';

      try {
        // Generate QR code using QR Server API
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(finalUrl)}&format=png&margin=20`;
        
        // Update display
        document.getElementById('qrCodeImg').src = qrUrl;
        document.getElementById('qrUrl').textContent = finalUrl;
        document.getElementById('qrDisplayCard').classList.remove('hidden');
        
        currentQRUrl = qrUrl;
        generateCount++;
        
        // Add to generation history
        addToGenerationHistory(finalUrl);
        
        showToast('QR kod başarıyla oluşturuldu!', 'success');
        
        // Clear input if not from history
        if (!inputUrl) {
          document.getElementById('urlInput').value = '';
        }
        
      } catch (error) {
        showToast('QR kod oluşturulamadı', 'error');
      } finally {
        setTimeout(() => {
          btnText.textContent = 'Oluştur';
        }, 1000);
      }
    }

    async function downloadQRCode() {
      if (!currentQRUrl) return;

      try {
        const response = await fetch(currentQRUrl);
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = `qr-code-${Date.now()}.png`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);

        showToast('QR kod başarıyla indirildi!', 'success');
      } catch (error) {
        showToast('QR kod indirilemedi', 'error');
      }
    }

    // History management
    function loadHistories() {
      loadScanHistory();
      loadGenerationHistory();
    }

    function loadScanHistory() {
      const history = JSON.parse(localStorage.getItem('qr-scan-history') || '[]');
      const historyList = document.getElementById('scanHistoryList');
      
      if (history.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Henüz tarama yapılmadı</p>';
        return;
      }
      
      historyList.innerHTML = history.map((item, index) => `
        <div class="history-item" onclick="redirectToUrl('${item.url}')">
          <div>
            <span class="history-url" title="${item.url}">${item.url}</span>
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem;">${item.date}</div>
          </div>
          <button class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="event.stopPropagation(); removeFromScanHistory(${index})">×</button>
        </div>
      `).join('');
    }

    function addToScanHistory(url) {
      let history = JSON.parse(localStorage.getItem('qr-scan-history') || '[]');
      const newItem = {
        url: url,
        date: new Date().toLocaleString('tr-TR'),
        timestamp: Date.now()
      };
      
      history = history.filter(item => item.url !== url);
      history.unshift(newItem);
      
      if (history.length > 20) {
        history = history.slice(0, 20);
      }
      
      localStorage.setItem('qr-scan-history', JSON.stringify(history));
      loadScanHistory();
    }

    function removeFromScanHistory(index) {
      let history = JSON.parse(localStorage.getItem('qr-scan-history') || '[]');
      history.splice(index, 1);
      localStorage.setItem('qr-scan-history', JSON.stringify(history));
      loadScanHistory();
      showToast('URL geçmişten silindi', 'success');
    }

    function clearScanHistory() {
      if (confirm('Tüm tarama geçmişini silmek istediğinizden emin misiniz?')) {
        localStorage.removeItem('qr-scan-history');
        loadScanHistory();
        showToast('Tarama geçmişi temizlendi', 'success');
      }
    }

    function loadGenerationHistory() {
      const history = JSON.parse(localStorage.getItem('qr-generation-history') || '[]');
      const historyList = document.getElementById('generationHistoryList');
      
      if (history.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Henüz QR kod oluşturulmadı</p>';
        return;
      }
      
      historyList.innerHTML = history.map((item, index) => `
        <div class="history-item">
          <div>
            <span class="history-url" title="${item.url}">${item.url}</span>
            <div style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem;">${item.date}</div>
          </div>
          <button class="btn btn-secondary" style="padding: 0.25rem 0.75rem; font-size: 0.8rem;" onclick="regenerateQR('${item.url}')">Tekrar Oluştur</button>
        </div>
      `).join('');
    }

    function addToGenerationHistory(url) {
      let history = JSON.parse(localStorage.getItem('qr-generation-history') || '[]');
      const newItem = {
        url: url,
        date: new Date().toLocaleString('tr-TR'),
        timestamp: Date.now()
      };
      
      history = history.filter(item => item.url !== url);
      history.unshift(newItem);
      
      if (history.length > 20) {
        history = history.slice(0, 20);
      }
      
      localStorage.setItem('qr-generation-history', JSON.stringify(history));
      loadGenerationHistory();
    }

    function regenerateQR(url) {
      document.getElementById('urlInput').value = url;
      generateQRCode(url);
    }

    function clearGenerationHistory() {
      if (confirm('Tüm oluşturma geçmişini silmek istediğinizden emin misiniz?')) {
        localStorage.removeItem('qr-generation-history');
        loadGenerationHistory();
        showToast('Oluşturma geçmişi temizlendi', 'success');
      }
    }

    // Show stats
    function showStats() {
      const scanHistory = JSON.parse(localStorage.getItem('qr-scan-history') || '[]');
      const genHistory = JSON.parse(localStorage.getItem('qr-generation-history') || '[]');
      
      showToast(`📊 İstatistikler: ${scanHistory.length} tarama, ${genHistory.length} oluşturma`, 'info');
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.ctrlKey && e.key === '1') {
        e.preventDefault();
        switchMode('scanner');
      }
      if (e.ctrlKey && e.key === '2') {
        e.preventDefault();
        switchMode('generator');
      }
    });
  </script>
</body>
</html>