<!doctype html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1" />
<title>SADECE KURAN</title>
<link rel="icon" type="image/png" href="/logokuran2.jpg"/>
<link rel="apple-touch-icon" href="/logokuran2.jpg">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
/* Dark Mode (Original) */
--primary-dark: #15202b;
--secondary-dark: #192734;
--accent-dark: #22303c;
--text-dark: #ffffff;
--highlight-dark: #1da1f2;

/* True Black Mode */
--primary-black: #000000;
--secondary-black: #0a0a0a;
--accent-black: #1a1a1a;
--text-black: #e0e0e0;
--highlight-black: #4a9eff;

/* Eye Mode (Muted Colors) */
--primary-eye: #1a1a1a;
--secondary-eye: #2d2d2d;
--accent-eye: #404040;
--text-eye: #d4d4d4;
--highlight-eye: #7ba7d9;

/* Light Mode */
--primary-light: #ffffff;
--secondary-light: #f7f9fa;
--accent-light: #ebeef0;
--text-light: #0f1419;
--highlight-light: #1da1f2;

--transition-speed: 0.3s;
--transition-function: cubic-bezier(0.4, 0, 0.2, 1);
--verse-font-size: 100%;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Poppins', sans-serif;
background-color: var(--primary-dark);
color: var(--text-dark);
line-height: 1.5;
display: flex;
flex-direction: column;
min-height: 100vh;
transition: background 0.3s var(--transition-function), color 0.3s var(--transition-function);
scrollbar-width: thin;
scrollbar-color: var(--accent-dark) var(--primary-dark);
overflow-x: hidden;
}

body.day-mode {
background-color: var(--primary-light);
color: var(--text-light);
scrollbar-color: var(--accent-light) var(--primary-light);
}

body.black-mode {
background-color: var(--primary-black);
color: var(--text-black);
scrollbar-color: var(--accent-black) var(--primary-black);
}

body.eye-mode {
background-color: var(--primary-eye);
color: var(--text-eye);
scrollbar-color: var(--accent-eye) var(--primary-eye);
}

body::-webkit-scrollbar {
width: 8px;
}

body::-webkit-scrollbar-track {
background: var(--primary-dark);
}

body.day-mode::-webkit-scrollbar-track {
background: var(--primary-light);
}

body.black-mode::-webkit-scrollbar-track {
background: var(--primary-black);
}

body.eye-mode::-webkit-scrollbar-track {
background: var(--primary-eye);
}

body::-webkit-scrollbar-thumb {
background-color: var(--accent-dark);
border-radius: 20px;
}

body.day-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-light);
}

body.black-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-black);
}

body.eye-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-eye);
}

/* Sidebar - Desktop */
.sidebar {
width: 60px;
background-color: var(--secondary-dark);
display: flex;
flex-direction: column;
align-items: center;
padding: 20px 0;
position: fixed;
height: 100%;
z-index: 10;
transition: background-color 0.3s var(--transition-function);
}

body.day-mode .sidebar {
background-color: var(--secondary-light);
border-right: 1px solid var(--accent-light);
}

body.black-mode .sidebar {
background-color: var(--secondary-black);
border-right: 1px solid var(--accent-black);
}

body.eye-mode .sidebar {
background-color: var(--secondary-eye);
border-right: 1px solid var(--accent-eye);
}

.sidebar-logo {
width: 40px;
height: 40px;
border-radius: 50%;
margin-bottom: 30px;
object-fit: cover;
}

.sidebar-nav {
display: flex;
flex-direction: column;
align-items: center;
width: 100%;
}

.nav-item {
width: 100%;
display: flex;
justify-content: center;
padding: 15px 0;
color: var(--text-dark);
font-size: 1.3rem;
cursor: pointer;
transition: background-color 0.2s var(--transition-function);
position: relative;
}

body.day-mode .nav-item {
color: var(--text-light);
}

body.black-mode .nav-item {
color: var(--text-black);
}

body.eye-mode .nav-item {
color: var(--text-eye);
}

.nav-item:hover {
background-color: var(--accent-dark);
}

body.day-mode .nav-item:hover {
background-color: var(--accent-light);
}

body.black-mode .nav-item:hover {
background-color: var(--accent-black);
}

body.eye-mode .nav-item:hover {
background-color: var(--accent-eye);
}

.nav-item.active {
color: var(--highlight-dark);
}

body.black-mode .nav-item.active {
color: var(--highlight-black);
}

body.eye-mode .nav-item.active {
color: var(--highlight-eye);
}

.nav-item.active::before {
content: '';
position: absolute;
left: 0;
height: 100%;
width: 3px;
background-color: var(--highlight-dark);
}

body.black-mode .nav-item.active::before {
background-color: var(--highlight-black);
}

body.eye-mode .nav-item.active::before {
background-color: var(--highlight-eye);
}

/* Main Content */
.main-content {
flex: 1;
margin-left: 60px;
display: flex;
flex-direction: column;
min-height: 100vh;
}

/* Header */
.header {
padding: 15px 20px;
border-bottom: 1px solid var(--accent-dark);
display: flex;
justify-content: space-between;
align-items: center;
position: sticky;
top: 0;
background-color: var(--primary-dark);
z-index: 5;
transition: background-color 0.3s var(--transition-function);
}

body.day-mode .header {
background-color: var(--primary-light);
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .header {
background-color: var(--primary-black);
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .header {
background-color: var(--primary-eye);
border-bottom: 1px solid var(--accent-eye);
}

.header h1 {
font-size: 1.2rem;
font-weight: 700;
}

.header-actions {
display: flex;
align-items: center;
gap: 15px;
}

#theme-toggle {
background: none;
border: none;
color: var(--text-dark);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode #theme-toggle {
color: var(--text-light);
}

body.black-mode #theme-toggle {
color: var(--text-black);
}

body.eye-mode #theme-toggle {
color: var(--text-eye);
}

#theme-toggle:hover {
background-color: var(--accent-dark);
}

body.day-mode #theme-toggle:hover {
background-color: var(--accent-light);
}

body.black-mode #theme-toggle:hover {
background-color: var(--accent-black);
}

body.eye-mode #theme-toggle:hover {
background-color: var(--accent-eye);
}

/* Content Container */
.content {
flex: 1;
padding: 20px;
max-width: 800px;
margin: 0 auto;
width: 100%;
padding-bottom: 80px;
}

/* BÜYÜK EKRANLAR İÇİN CONTENT GENİŞLETME */
@media (min-width: 1200px) {
.content {
max-width: 1400px;
}
}

/* Controls */
.controls {
margin-bottom: 20px;
display: flex;
flex-direction: column;
gap: 10px;
}

.search-container {
position: relative;
}

#search {
width: 100%;
padding: 12px 15px;
border: 1px solid var(--accent-dark);
border-radius: 20px;
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 0.95rem;
transition: all 0.2s var(--transition-function);
}

body.day-mode #search {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
color: var(--text-light);
}

body.black-mode #search {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
color: var(--text-black);
}

body.eye-mode #search {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
color: var(--text-eye);
}

#search:focus {
outline: none;
border-color: var(--highlight-dark);
box-shadow: none; /* Removed blue glow */
}

body.black-mode #search:focus {
border-color: var(--highlight-black);
}

body.eye-mode #search:focus {
border-color: var(--highlight-eye);
}

.search-icon {
position: absolute;
right: 15px;
top: 50%;
transform: translateY(-50%);
color: var(--text-dark);
opacity: 0.6;
}

body.day-mode .search-icon {
color: var(--text-light);
}

body.black-mode .search-icon {
color: var(--text-black);
}

body.eye-mode .search-icon {
color: var(--text-eye);
}

.controls-row {
display: flex;
gap: 10px;
}

#author-select {
flex: 1;
padding: 12px 15px;
border: 1px solid var(--accent-dark);
border-radius: 20px;
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 0.95rem;
appearance: none;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
background-repeat: no-repeat;
background-position: right 15px center;
background-size: 16px;
transition: all 0.2s var(--transition-function);
}

body.day-mode #author-select {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
color: var(--text-light);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%230f1419' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.black-mode #author-select {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
color: var(--text-black);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e0e0e0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.eye-mode #author-select {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
color: var(--text-eye);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d4d4d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

#author-select:focus {
outline: none;
border-color: var(--highlight-dark);
box-shadow: none; /* Removed blue glow */
}

body.black-mode #author-select:focus {
border-color: var(--highlight-black);
}

body.eye-mode #author-select:focus {
border-color: var(--highlight-eye);
}

#show-favorites {
padding: 12px 20px;
border: none;
border-radius: 20px;
background-color: var(--highlight-dark);
color: white;
font-size: 0.95rem;
cursor: pointer;
display: flex;
align-items: center;
gap: 8px;
transition: background-color 0.2s var(--transition-function);
}

body.black-mode #show-favorites {
background-color: var(--highlight-black);
}

body.eye-mode #show-favorites {
background-color: var(--highlight-eye);
}

#show-favorites:hover {
background-color: #1a91da;
}

body.black-mode #show-favorites:hover {
background-color: #3a8eff;
}

body.eye-mode #show-favorites:hover {
background-color: #6b9bd4;
}

#loading-bar {
width: 100%;
height: 4px;
background: var(--accent-dark);
border-radius: 2px;
overflow: hidden;
display: none;
}

#loading-bar .progress {
width: 0%;
height: 100%;
background: var(--highlight-dark);
border-radius: 2px;
animation: loadingProgress 1.5s infinite ease-in-out;
}

body.day-mode #loading-bar {
background: var(--accent-light);
}

body.black-mode #loading-bar {
background: var(--accent-black);
}

body.eye-mode #loading-bar {
background: var(--accent-eye);
}

body.black-mode #loading-bar .progress {
background: var(--highlight-black);
}

body.eye-mode #loading-bar .progress {
background: var(--highlight-eye);
}

/* Surah List */
#surahs {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
gap: 15px;
margin-bottom: 20px;
}

.surah {
background-color: var(--secondary-dark);
padding: 15px;
border-radius: 12px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
border: 1px solid var(--accent-dark);
}

body.day-mode .surah {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .surah {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .surah {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.surah:hover {
transform: translateY(-3px);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
border-color: var(--highlight-dark);
}

body.day-mode .surah:hover {
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

body.black-mode .surah:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
border-color: var(--highlight-black);
}

body.eye-mode .surah:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.03);
border-color: var(--highlight-eye);
}

.surah h2 {
font-size: 1.1rem;
font-weight: 500;
margin-bottom: 5px;
}

.verse-result {
background-color: var(--secondary-dark);
padding: 15px;
border-radius: 12px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
border: 1px solid var(--accent-dark);
margin-bottom: 10px;
}

body.day-mode .verse-result {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .verse-result {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .verse-result {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.verse-result:hover {
transform: translateY(-3px);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
border-color: var(--highlight-dark);
}

body.day-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

body.black-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
border-color: var(--highlight-black);
}

body.eye-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.03);
border-color: var(--highlight-eye);
}

/* Verse Panel */
#verse-panel {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--accent-dark);
}

body.day-mode #verse-panel {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #verse-panel {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #verse-panel {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#verse-panel.active {
display: block;
}

#verse-panel h3 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--accent-dark);
display: flex;
align-items: center;
gap: 10px;
}

body.day-mode #verse-panel h3 {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode #verse-panel h3 {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode #verse-panel h3 {
border-bottom: 1px solid var(--accent-eye);
}

#close-panel {
background: none;
border: none;
color: var(--text-dark);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode #close-panel {
color: var(--text-light);
}

body.black-mode #close-panel {
color: var(--text-black);
}

body.eye-mode #close-panel {
color: var(--text-eye);
}

#close-panel:hover {
background-color: var(--accent-dark);
}

body.day-mode #close-panel:hover {
background-color: var(--accent-light);
}

body.black-mode #close-panel:hover {
background-color: var(--accent-black);
}

body.eye-mode #close-panel:hover {
background-color: var(--accent-eye);
}

.verse {
padding: 12px 0;
border-bottom: 1px solid var(--accent-dark);
display: flex;
justify-content: space-between;
align-items: center;
cursor: pointer;
transition: all 0.2s var(--transition-function);
font-size: var(--verse-font-size);
position: relative;
}

body.day-mode .verse {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .verse {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .verse {
border-bottom: 1px solid var(--accent-eye);
}

.verse:last-child {
border-bottom: none;
}

.verse:hover {
padding-left: 5px;
}

/* MOBİL İÇİN VERSE ACTIONS - UZUN BASILMA VE SCROLL DETECTION */
.verse-actions {
display: flex;
gap: 10px;
opacity: 0;
transition: opacity 0.2s var(--transition-function);
}

/* BÜYÜK EKRANLARDA HOVER İLE GÖSTER */
@media (min-width: 769px) {
.verse:hover .verse-actions {
opacity: 1;
}
}

/* MOBİL CIHAZLARDA UZUN BASILMA İLE GÖSTER */
@media (max-width: 768px) {
.verse-actions {
position: absolute;
right: 10px;
top: 50%;
transform: translateY(-50%);
background-color: var(--secondary-dark);
border-radius: 20px;
padding: 5px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
z-index: 10;
opacity: 0;
visibility: hidden;
transition: all 0.3s var(--transition-function);
pointer-events: none;
}

body.day-mode .verse-actions {
background-color: var(--secondary-light);
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

body.black-mode .verse-actions {
background-color: var(--secondary-black);
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
}

body.eye-mode .verse-actions {
background-color: var(--secondary-eye);
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.05);
}

.verse-actions.show {
opacity: 1;
visibility: visible;
pointer-events: auto;
}

.verse-actions::before {
content: '';
position: absolute;
left: -8px;
top: 50%;
transform: translateY(-50%);
width: 0;
height: 0;
border-top: 8px solid transparent;
border-bottom: 8px solid transparent;
border-right: 8px solid var(--secondary-dark);
}

body.day-mode .verse-actions::before {
border-right-color: var(--secondary-light);
}

body.black-mode .verse-actions::before {
border-right-color: var(--secondary-black);
}

body.eye-mode .verse-actions::before {
border-right-color: var(--secondary-eye);
}

/* Scroll sırasında verse click'lerini disable et */
.verse.scroll-disabled {
pointer-events: none;
}

.verse.scroll-disabled .verse-actions {
opacity: 0 !important;
visibility: hidden !important;
pointer-events: none !important;
}
}

.verse .favorite-btn,
.verse .share-btn {
background: none;
border: none;
color: var(--text-dark);
font-size: 1rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode .verse .favorite-btn,
body.day-mode .verse .share-btn {
color: var(--text-light);
}

body.black-mode .verse .favorite-btn,
body.black-mode .verse .share-btn {
color: var(--text-black);
}

body.eye-mode .verse .favorite-btn,
body.eye-mode .verse .share-btn {
color: var(--text-eye);
}

.verse .favorite-btn:hover,
.verse .share-btn:hover {
background-color: var(--accent-dark);
}

body.day-mode .verse .favorite-btn:hover,
body.day-mode .verse .share-btn:hover {
background-color: var(--accent-light);
}

body.black-mode .verse .favorite-btn:hover,
body.black-mode .verse .share-btn:hover {
background-color: var(--accent-black);
}

body.eye-mode .verse .favorite-btn:hover,
body.eye-mode .verse .share-btn:hover {
background-color: var(--accent-eye);
}

.verse .favorite-btn.active {
color: var(--highlight-dark);
}

body.black-mode .verse .favorite-btn.active {
color: var(--highlight-black);
}

body.eye-mode .verse .favorite-btn.active {
color: var(--highlight-eye);
}

/* Verse Detail Panel - RESPONSIVE TASARIM DÜZELTMESİ */
#verse-detail-panel {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--accent-dark);
position: relative;
touch-action: pan-y;
}

body.day-mode #verse-detail-panel {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #verse-detail-panel {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #verse-detail-panel {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#verse-detail-panel.active {
display: block;
}

#verse-detail-panel h3 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--accent-dark);
text-align: center;
position: relative;
}

body.day-mode #verse-detail-panel h3 {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode #verse-detail-panel h3 {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode #verse-detail-panel h3 {
border-bottom: 1px solid var(--accent-eye);
}

#verse-detail-panel .back-btn {
position: absolute;
left: 0;
top: 0;
background: none;
border: none;
color: var(--text-dark);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode #verse-detail-panel .back-btn {
color: var(--text-light);
}

body.black-mode #verse-detail-panel .back-btn {
color: var(--text-black);
}

body.eye-mode #verse-detail-panel .back-btn {
color: var(--text-eye);
}

#verse-detail-panel .back-btn:hover {
background-color: var(--accent-dark);
}

body.day-mode #verse-detail-panel .back-btn:hover {
background-color: var(--accent-light);
}

body.black-mode #verse-detail-panel .back-btn:hover {
background-color: var(--accent-black);
}

body.eye-mode #verse-detail-panel .back-btn:hover {
background-color: var(--accent-eye);
}

#verse-detail-panel .selected-translation {
background-color: var(--highlight-dark);
padding: 20px;
border-radius: 12px;
margin-bottom: 20px;
font-size: 1.1rem;
line-height: 1.6;
border: 1px solid var(--highlight-dark);
color: white;
font-weight: 500;
box-shadow: none; /* Removed blue glow */
font-size: var(--verse-font-size);
}

body.black-mode #verse-detail-panel .selected-translation {
background-color: var(--highlight-black);
border: 1px solid var(--highlight-black);
}

body.eye-mode #verse-detail-panel .selected-translation {
background-color: var(--highlight-eye);
border: 1px solid var(--highlight-eye);
}

/* BÜYÜK EKRANLAR İÇİN LAYOUT - SADECE 1024px VE ÜSTÜ */
@media (min-width: 1024px) {
.verse-content-container {
display: grid;
grid-template-columns: 1fr 2fr 1fr;
gap: 30px;
align-items: start;
}

.verse-main-content {
grid-column: 2;
display: flex;
flex-direction: column;
gap: 20px;
}

.verse-left-sidebar {
grid-column: 1;
background-color: var(--accent-dark);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--accent-dark);
}

body.day-mode .verse-left-sidebar {
background-color: var(--accent-light);
border: 1px solid var(--accent-light);
}

body.black-mode .verse-left-sidebar {
background-color: var(--accent-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .verse-left-sidebar {
background-color: var(--accent-eye);
border: 1px solid var(--accent-eye);
}

.verse-right-sidebar {
grid-column: 3;
background-color: var(--accent-dark);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--accent-dark);
}

body.day-mode .verse-right-sidebar {
background-color: var(--accent-light);
border: 1px solid var(--accent-light);
}

body.black-mode .verse-right-sidebar {
background-color: var(--accent-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .verse-right-sidebar {
background-color: var(--accent-eye);
border: 1px solid var(--accent-eye);
}

.sidebar-title {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 15px;
color: var(--highlight-dark);
text-align: center;
border-bottom: 2px solid var(--highlight-dark);
padding-bottom: 8px;
display: flex;
align-items: center;
justify-content: space-between;
}

body.black-mode .sidebar-title {
color: var(--highlight-black);
border-bottom-color: var(--highlight-black);
}

body.eye-mode .sidebar-title {
color: var(--highlight-eye);
border-bottom-color: var(--highlight-eye);
}

/* Navigasyon butonları büyük ekranlarda - SAĞ TARAFA HİZALANDI */
.verse-navigation-buttons {
display: flex;
justify-content: flex-end;
gap: 15px;
margin: 20px 0;
}

.nav-btn {
background: var(--highlight-dark);
border: none;
color: white;
font-size: 1rem;
cursor: pointer;
padding: 12px 20px;
border-radius: 25px;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
transition: all 0.2s var(--transition-function);
box-shadow: none; /* Removed blue glow */
min-width: 120px;
}

body.black-mode .nav-btn {
background: var(--highlight-black);
}

body.eye-mode .nav-btn {
background: var(--highlight-eye);
}

.nav-btn:hover {
background-color: #1a91da;
transform: translateY(-2px);
box-shadow: none; /* Removed blue glow */
}

body.black-mode .nav-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .nav-btn:hover {
background-color: #6b9bd4;
}

/* MOBİL İÇERİKLERİNİ BÜYÜK EKRANLARDA GİZLE */
.tab-container {
display: none;
}
}

/* MOBİL EKRANLAR İÇİN LAYOUT - 1023px VE ALTI */
@media (max-width: 1023px) {
.verse-content-container {
display: flex;
flex-direction: column;
gap: 20px;
}

.verse-main-content {
order: 1;
}

/* BÜYÜK EKRAN SİDEBAR'LARINI MOBİLDE GİZLE */
.verse-left-sidebar,
.verse-right-sidebar {
display: none;
}

/* Sekmeli içerik mobilde */
.tab-container {
margin-top: 20px;
display: block;
}

.tab-buttons {
display: flex;
border-bottom: 1px solid var(--accent-dark);
margin-bottom: 15px;
}

body.day-mode .tab-buttons {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .tab-buttons {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .tab-buttons {
border-bottom: 1px solid var(--accent-eye);
}

.tab-header {
display: flex;
align-items: center;
gap: 5px;
flex: 1;
}

.tab-button {
padding: 10px 20px;
background: none;
border: none;
color: var(--text-dark);
cursor: pointer;
font-size: 0.95rem;
position: relative;
transition: all 0.2s var(--transition-function);
flex: 1;
text-align: center;
}

body.day-mode .tab-button {
color: var(--text-light);
}

body.black-mode .tab-button {
color: var(--text-black);
}

body.eye-mode .tab-button {
color: var(--text-eye);
}

.tab-button.active {
color: var(--highlight-dark);
font-weight: 500;
}

body.black-mode .tab-button.active {
color: var(--highlight-black);
}

body.eye-mode .tab-button.active {
color: var(--highlight-eye);
}

.tab-button.active::after {
content: '';
position: absolute;
bottom: -1px;
left: 0;
width: 100%;
height: 2px;
background-color: var(--highlight-dark);
}

body.black-mode .tab-button.active::after {
background-color: var(--highlight-black);
}

body.eye-mode .tab-button.active::after {
background-color: var(--highlight-eye);
}

.tab-content {
display: none;
}

.tab-content.active {
display: block;
}

/* Navigasyon butonları mobilde - KÜÇÜLTÜLDÜ VE SAĞ TARAFA HİZALANDI */
.verse-navigation-buttons {
display: flex;
justify-content: flex-end;
margin: 20px 0;
gap: 8px;
}

.nav-btn {
background: var(--highlight-dark);
border: none;
color: white;
font-size: 0.8rem;
cursor: pointer;
padding: 8px 12px;
border-radius: 15px;
display: flex;
align-items: center;
justify-content: center;
gap: 4px;
transition: background-color 0.2s var(--transition-function);
min-width: 80px;
}

body.black-mode .nav-btn {
background: var(--highlight-black);
}

body.eye-mode .nav-btn {
background: var(--highlight-eye);
}

.nav-btn:hover {
background-color: #1a91da;
}

body.black-mode .nav-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .nav-btn:hover {
background-color: #6b9bd4;
}
}

/* FLOATING LABELS STYLE - DİĞER MEALLER */
#verse-detail-panel .other-translations {
display: flex;
flex-direction: column;
gap: 20px;
padding: 10px 0;
}

#verse-detail-panel .other-translations .translation-item {
position: relative;
background-color: var(--secondary-dark);
border: 1px solid var(--accent-dark);
border-radius: 12px;
padding: 20px 15px 15px 15px;
transition: all 0.3s var(--transition-function);
animation: fadeInUp 0.4s ease-out;
}

body.day-mode #verse-detail-panel .other-translations .translation-item {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #verse-detail-panel .other-translations .translation-item {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #verse-detail-panel .other-translations .translation-item {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#verse-detail-panel .other-translations .translation-item:hover {
transform: translateY(-2px);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
border-color: var(--highlight-dark);
}

body.day-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
}

body.black-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.08);
border-color: var(--highlight-black);
}

body.eye-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.05);
border-color: var(--highlight-eye);
}

#verse-detail-panel .other-translations .floating-label {
position: absolute;
top: -8px;
left: 15px;
background-color: var(--highlight-dark);
color: white;
padding: 4px 12px;
border-radius: 20px;
font-size: 0.8rem;
font-weight: 600;
letter-spacing: 0.5px;
box-shadow: none; /* Removed blue glow */
z-index: 2;
}

body.black-mode #verse-detail-panel .other-translations .floating-label {
background-color: var(--highlight-black);
}

body.eye-mode #verse-detail-panel .other-translations .floating-label {
background-color: var(--highlight-eye);
}

#verse-detail-panel .other-translations .translation-text {
color: var(--text-dark);
font-size: var(--verse-font-size);
line-height: 1.6;
margin: 0;
padding-top: 5px;
}

body.day-mode #verse-detail-panel .other-translations .translation-text {
color: var(--text-light);
}

body.black-mode #verse-detail-panel .other-translations .translation-text {
color: var(--text-black);
}

body.eye-mode #verse-detail-panel .other-translations .translation-text {
color: var(--text-eye);
}

/* Fade in animation */
@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

/* Responsive adjustments for floating labels */
@media (max-width: 768px) {
#verse-detail-panel .other-translations .translation-item {
padding: 18px 12px 12px 12px;
}

#verse-detail-panel .other-translations .floating-label {
font-size: 0.75rem;
padding: 3px 10px;
left: 12px;
}

#verse-detail-panel .other-translations .translation-text {
font-size: 0.9rem;
}
}

/* YAZAR SIRALAMA BUTONU VE PANELİ */
.sort-authors-btn {
background: none;
border: none;
color: var(--highlight-dark);
font-size: 0.9rem;
cursor: pointer;
padding: 4px 8px;
border-radius: 15px;
display: flex;
align-items: center;
gap: 4px;
transition: all 0.2s var(--transition-function);
}

body.black-mode .sort-authors-btn {
color: var(--highlight-black);
}

body.eye-mode .sort-authors-btn {
color: var(--highlight-eye);
}

.sort-authors-btn:hover {
background-color: rgba(29, 161, 242, 0.1);
}

/* Yazar Sıralama Paneli */
.author-sort-panel {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
display: none;
align-items: center;
justify-content: center;
}

.author-sort-content {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 25px;
max-width: 500px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
border: 1px solid var(--accent-dark);
}

body.day-mode .author-sort-content {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .author-sort-content {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .author-sort-content {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.author-sort-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
padding-bottom: 15px;
border-bottom: 1px solid var(--accent-dark);
}

body.day-mode .author-sort-header {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .author-sort-header {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .author-sort-header {
border-bottom: 1px solid var(--accent-eye);
}

.author-sort-title {
font-size: 1.3rem;
font-weight: 600;
color: var(--text-dark);
}

body.day-mode .author-sort-title {
color: var(--text-light);
}

body.black-mode .author-sort-title {
color: var(--text-black);
}

body.eye-mode .author-sort-title {
color: var(--text-eye);
}

.close-sort-panel {
background: none;
border: none;
color: var(--text-dark);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode .close-sort-panel {
color: var(--text-light);
}

body.black-mode .close-sort-panel {
color: var(--text-black);
}

body.eye-mode .close-sort-panel {
color: var(--text-eye);
}

.close-sort-panel:hover {
background-color: var(--accent-dark);
}

body.day-mode .close-sort-panel:hover {
background-color: var(--accent-light);
}

body.black-mode .close-sort-panel:hover {
background-color: var(--accent-black);
}

body.eye-mode .close-sort-panel:hover {
background-color: var(--accent-eye);
}

.author-list {
display: flex;
flex-direction: column;
gap: 10px;
margin-bottom: 20px;
}

.author-item {
background-color: var(--accent-dark);
border-radius: 8px;
padding: 15px;
border: 1px solid var(--accent-dark);
cursor: grab;
transition: all 0.2s var(--transition-function);
display: flex;
align-items: center;
justify-content: space-between;
}

body.day-mode .author-item {
background-color: var(--accent-light);
border: 1px solid var(--accent-light);
}

body.black-mode .author-item {
background-color: var(--accent-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .author-item {
background-color: var(--accent-eye);
border: 1px solid var(--accent-eye);
}

.author-item:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

body.day-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
}

body.eye-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
}

.author-item.dragging {
opacity: 0.5;
transform: rotate(5deg);
cursor: grabbing;
}

.author-name {
font-weight: 500;
color: var(--text-dark);
}

body.day-mode .author-name {
color: var(--text-light);
}

body.black-mode .author-name {
color: var(--text-black);
}

body.eye-mode .author-name {
color: var(--text-eye);
}

.drag-handle {
color: var(--text-dark);
opacity: 0.6;
font-size: 1.2rem;
}

body.day-mode .drag-handle {
color: var(--text-light);
}

body.black-mode .drag-handle {
color: var(--text-black);
}

body.eye-mode .drag-handle {
color: var(--text-eye);
}

.sort-actions {
display: flex;
gap: 10px;
justify-content: flex-end;
}

.sort-btn {
padding: 10px 20px;
border: none;
border-radius: 20px;
font-size: 0.9rem;
cursor: pointer;
transition: all 0.2s var(--transition-function);
}

.save-sort-btn {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .save-sort-btn {
background-color: var(--highlight-black);
}

body.eye-mode .save-sort-btn {
background-color: var(--highlight-eye);
}

.save-sort-btn:hover {
background-color: #1a91da;
}

body.black-mode .save-sort-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .save-sort-btn:hover {
background-color: #6b9bd4;
}

.reset-sort-btn {
background-color: var(--accent-dark);
color: var(--text-dark);
}

body.day-mode .reset-sort-btn {
background-color: var(--accent-light);
color: var(--text-light);
}

body.black-mode .reset-sort-btn {
background-color: var(--accent-black);
color: var(--text-black);
}

body.eye-mode .reset-sort-btn {
background-color: var(--accent-eye);
color: var(--text-eye);
}

.reset-sort-btn:hover {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .reset-sort-btn:hover {
background-color: var(--highlight-black);
}

body.eye-mode .reset-sort-btn:hover {
background-color: var(--highlight-eye);
}

/* Favorites - YENİ TASARIM */
#favorites {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--accent-dark);
}

body.day-mode #favorites {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #favorites {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #favorites {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#favorites h2 {
font-size: 1.8rem;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 2px solid var(--highlight-dark);
display: flex;
align-items: center;
justify-content: center;
gap: 12px;
color: var(--text-dark);
text-align: center;
}

body.day-mode #favorites h2 {
color: var(--text-light);
}

body.black-mode #favorites h2 {
color: var(--text-black);
border-bottom-color: var(--highlight-black);
}

body.eye-mode #favorites h2 {
color: var(--text-eye);
border-bottom-color: var(--highlight-eye);
}

#favorites h2 i {
color: var(--highlight-dark);
font-size: 1.5rem;
}

body.black-mode #favorites h2 i {
color: var(--highlight-black);
}

body.eye-mode #favorites h2 i {
color: var(--highlight-eye);
}

#favorites-list {
display: flex;
flex-direction: column;
gap: 15px;
margin-bottom: 25px;
}

#favorites-list .verse {
background-color: var(--accent-dark);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--accent-dark);
transition: all 0.3s var(--transition-function);
position: relative;
overflow: hidden;
}

body.day-mode #favorites-list .verse {
background-color: var(--accent-light);
border: 1px solid var(--accent-light);
}

body.black-mode #favorites-list .verse {
background-color: var(--accent-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #favorites-list .verse {
background-color: var(--accent-eye);
border: 1px solid var(--accent-eye);
}

#favorites-list .verse:hover {
transform: translateY(-3px);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
border-color: var(--highlight-dark);
}

body.day-mode #favorites-list .verse:hover {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
}

body.black-mode #favorites-list .verse:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.08);
border-color: var(--highlight-black);
}

body.eye-mode #favorites-list .verse:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.05);
border-color: var(--highlight-eye);
}

#favorites-list .verse::before {
content: '';
position: absolute;
left: 0;
top: 0;
height: 100%;
width: 4px;
background: linear-gradient(45deg, var(--highlight-dark), #1a91da);
}

body.black-mode #favorites-list .verse::before {
background: linear-gradient(45deg, var(--highlight-black), #3a8eff);
}

body.eye-mode #favorites-list .verse::before {
background: linear-gradient(45deg, var(--highlight-eye), #6b9bd4);
}

#favorites-list .verse .verse-actions {
opacity: 1;
position: absolute;
right: 15px;
top: 15px;
}

#favorites-list .verse .favorite-btn {
background-color: rgba(229, 62, 62, 0.1);
color: #e53e3e;
border-radius: 8px;
padding: 8px 12px;
font-size: 0.9rem;
}

#favorites-list .verse .favorite-btn:hover {
background-color: rgba(229, 62, 62, 0.2);
transform: scale(1.05);
}

#favorites-list .verse .copy-url-btn {
background-color: rgba(29, 161, 242, 0.1);
color: var(--highlight-dark);
border-radius: 8px;
padding: 8px 12px;
font-size: 0.9rem;
}

body.black-mode #favorites-list .verse .copy-url-btn {
color: var(--highlight-black);
}

body.eye-mode #favorites-list .verse .copy-url-btn {
color: var(--highlight-eye);
}

#favorites-list .verse .copy-url-btn:hover {
background-color: rgba(29, 161, 242, 0.2);
transform: scale(1.05);
}

#back-to-surahs {
padding: 15px 25px;
border: none;
border-radius: 25px;
background: linear-gradient(45deg, var(--highlight-dark), #1a91da);
color: white;
font-size: 1rem;
font-weight: 500;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
margin: 0 auto;
transition: all 0.3s var(--transition-function);
box-shadow: none; /* Removed blue glow */
min-width: 200px;
}

body.black-mode #back-to-surahs {
background: linear-gradient(45deg, var(--highlight-black), #3a8eff);
}

body.eye-mode #back-to-surahs {
background: linear-gradient(45deg, var(--highlight-eye), #6b9bd4);
}

#back-to-surahs:hover {
transform: translateY(-2px);
box-shadow: none; /* Removed blue glow */
}

/* Search Page */
#search-page {
position: fixed;
top: 0;
left: 60px;
width: calc(100% - 60px);
height: 100%;
background-color: var(--primary-dark);
z-index: 100;
padding: 20px;
display: none;
overflow-y: auto;
transition: all 0.3s var(--transition-function);
}

body.day-mode #search-page {
background-color: var(--primary-light);
}

body.black-mode #search-page {
background-color: var(--primary-black);
}

body.eye-mode #search-page {
background-color: var(--primary-eye);
}

#search-page.active {
display: flex;
flex-direction: column;
}

.search-page-header {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 30px;
padding-bottom: 15px;
border-bottom: 1px solid var(--accent-dark);
}

body.day-mode .search-page-header {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .search-page-header {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .search-page-header {
border-bottom: 1px solid var(--accent-eye);
}

.search-page-back {
background: none;
border: none;
color: var(--text-dark);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode .search-page-back {
color: var(--text-light);
}

body.black-mode .search-page-back {
color: var(--text-black);
}

body.eye-mode .search-page-back {
color: var(--text-eye);
}

.search-page-back:hover {
background-color: var(--accent-dark);
}

body.day-mode .search-page-back:hover {
background-color: var(--accent-light);
}

body.black-mode .search-page-back:hover {
background-color: var(--accent-black);
}

body.eye-mode .search-page-back:hover {
background-color: var(--accent-eye);
}

.search-page-container {
display: flex;
gap: 20px;
flex: 1;
}

.search-page-main {
flex: 1;
}

.search-page-input-container {
position: relative;
margin-bottom: 30px;
}

#search-page-input {
width: 100%;
padding: 15px 20px;
border: 1px solid var(--accent-dark);
border-radius: 25px;
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 1.1rem;
transition: all 0.2s var(--transition-function);
}

body.day-mode #search-page-input {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
color: var(--text-light);
}

body.black-mode #search-page-input {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
color: var(--text-black);
}

body.eye-mode #search-page-input {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
color: var(--text-eye);
}

#search-page-input:focus {
outline: none;
border-color: var(--highlight-dark);
box-shadow: none; /* Removed blue glow */
}

body.black-mode #search-page-input:focus {
border-color: var(--highlight-black);
}

body.eye-mode #search-page-input:focus {
border-color: var(--highlight-eye);
}

.search-page-icon {
position: absolute;
right: 20px;
top: 50%;
transform: translateY(-50%);
color: var(--text-dark);
opacity: 0.6;
font-size: 1.1rem;
}

body.day-mode .search-page-icon {
color: var(--text-light);
}

body.black-mode .search-page-icon {
color: var(--text-black);
}

body.eye-mode .search-page-icon {
color: var(--text-eye);
}

#search-results {
display: flex;
flex-direction: column;
gap: 10px;
}

.search-page-sidebar {
width: 250px;
padding: 20px;
background-color: var(--secondary-dark);
border-radius: 12px;
border: 1px solid var(--accent-dark);
align-self: flex-start;
position: sticky;
top: 20px;
}

body.day-mode .search-page-sidebar {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .search-page-sidebar {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .search-page-sidebar {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.search-page-sidebar h3 {
font-size: 1.1rem;
margin-bottom: 15px;
padding-bottom: 10px;
border-bottom: 1px solid var(--accent-dark);
}

body.day-mode .search-page-sidebar h3 {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode .search-page-sidebar h3 {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode .search-page-sidebar h3 {
border-bottom: 1px solid var(--accent-eye);
}

.example-searches {
display: flex;
flex-direction: column;
gap: 10px;
}

.example-search {
padding: 8px 12px;
background-color: var(--accent-dark);
border-radius: 15px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
font-size: 0.9rem;
display: flex;
align-items: center;
gap: 5px;
}

body.day-mode .example-search {
background-color: var(--accent-light);
}

body.black-mode .example-search {
background-color: var(--accent-black);
}

body.eye-mode .example-search {
background-color: var(--accent-eye);
}

.example-search:hover {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .example-search:hover {
background-color: var(--highlight-black);
}

body.eye-mode .example-search:hover {
background-color: var(--highlight-eye);
}

.highlight {
background-color: rgba(29, 161, 242, 0.2);
padding: 0 2px;
border-radius: 3px;
}

body.black-mode .highlight {
background-color: rgba(74, 158, 255, 0.2);
}

body.eye-mode .highlight {
background-color: rgba(123, 167, 217, 0.2);
}

/* Podcasts Section */
#podcasts {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--accent-dark);
}

body.day-mode #podcasts {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #podcasts {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #podcasts {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#podcasts h2 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--accent-dark);
display: flex;
align-items: center;
gap: 10px;
}

body.day-mode #podcasts h2 {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode #podcasts h2 {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode #podcasts h2 {
border-bottom: 1px solid var(--accent-eye);
}

#podcasts h2 i {
color: var(--highlight-dark);
}

body.black-mode #podcasts h2 i {
color: var(--highlight-black);
}

body.eye-mode #podcasts h2 i {
color: var(--highlight-eye);
}

.podcast-container {
margin-bottom: 30px;
width: 100%;
}

.podcast-container iframe {
width: 100%;
margin-bottom: 20px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

body.day-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

body.black-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.05);
}

body.eye-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.03);
}

/* Settings Section */
#settings {
background-color: var(--secondary-dark);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--accent-dark);
}

body.day-mode #settings {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode #settings {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode #settings {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

#settings h2 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--accent-dark);
display: flex;
align-items: center;
gap: 10px;
}

body.day-mode #settings h2 {
border-bottom: 1px solid var(--accent-light);
}

body.black-mode #settings h2 {
border-bottom: 1px solid var(--accent-black);
}

body.eye-mode #settings h2 {
border-bottom: 1px solid var(--accent-eye);
}

#settings h2 i {
color: var(--highlight-dark);
}

body.black-mode #settings h2 i {
color: var(--highlight-black);
}

body.eye-mode #settings h2 i {
color: var(--highlight-eye);
}

.settings-section {
margin-bottom: 30px;
}

.settings-section h3 {
font-size: 1.2rem;
margin-bottom: 15px;
font-weight: 500;
}

.setting-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px;
background-color: var(--accent-dark);
border-radius: 10px;
margin-bottom: 15px;
transition: all 0.2s var(--transition-function);
}

body.day-mode .setting-item {
background-color: var(--accent-light);
}

body.black-mode .setting-item {
background-color: var(--accent-black);
}

body.eye-mode .setting-item {
background-color: var(--accent-eye);
}

.setting-item:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

body.day-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
}

body.eye-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
}

.setting-label {
display: flex;
flex-direction: column;
}

.setting-label span:first-child {
font-weight: 500;
margin-bottom: 5px;
}

.setting-label span:last-child {
font-size: 0.85rem;
opacity: 0.7;
}

/* Theme Mode Selection */
.theme-mode-selection {
display: flex;
gap: 10px;
flex-wrap: wrap;
}

.theme-option {
padding: 10px 15px;
border: 2px solid var(--accent-dark);
border-radius: 10px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 0.9rem;
display: flex;
align-items: center;
gap: 8px;
min-width: 120px;
justify-content: center;
}

body.day-mode .theme-option {
border-color: var(--accent-light);
background-color: var(--secondary-light);
color: var(--text-light);
}

body.black-mode .theme-option {
border-color: var(--accent-black);
background-color: var(--secondary-black);
color: var(--text-black);
}

body.eye-mode .theme-option {
border-color: var(--accent-eye);
background-color: var(--secondary-eye);
color: var(--text-eye);
}

.theme-option.active {
border-color: var(--highlight-dark);
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .theme-option.active {
border-color: var(--highlight-black);
background-color: var(--highlight-black);
}

body.eye-mode .theme-option.active {
border-color: var(--highlight-eye);
background-color: var(--highlight-eye);
}

.theme-option:hover {
transform: translateY(-2px);
border-color: var(--highlight-dark);
}

body.black-mode .theme-option:hover {
border-color: var(--highlight-black);
}

body.eye-mode .theme-option:hover {
border-color: var(--highlight-eye);
}

/* Toggle Switch */
.toggle-switch {
position: relative;
display: inline-block;
width: 50px;
height: 24px;
}

.toggle-switch input {
opacity: 0;
width: 0;
height: 0;
}

.toggle-slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: var(--accent-dark);
transition: .4s;
border-radius: 24px;
}

body.day-mode .toggle-slider {
background-color: #ccc;
}

body.black-mode .toggle-slider {
background-color: var(--accent-black);
}

body.eye-mode .toggle-slider {
background-color: var(--accent-eye);
}

.toggle-slider:before {
position: absolute;
content: "";
height: 18px;
width: 18px;
left: 3px;
bottom: 3px;
background-color: white;
transition: .4s;
border-radius: 50%;
}

input:checked + .toggle-slider {
background-color: var(--highlight-dark);
}

body.black-mode input:checked + .toggle-slider {
background-color: var(--highlight-black);
}

body.eye-mode input:checked + .toggle-slider {
background-color: var(--highlight-eye);
}

input:checked + .toggle-slider:before {
transform: translateX(26px);
}

/* Color Picker */
.color-options {
display: flex;
gap: 10px;
flex-wrap: wrap;
}

.color-option {
width: 30px;
height: 30px;
border-radius: 50%;
cursor: pointer;
transition: transform 0.2s var(--transition-function);
position: relative;
}

.color-option:hover {
transform: scale(1.1);
}

.color-option.active::after {
content: '\f00c';
font-family: 'Font Awesome 5 Free';
font-weight: 900;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
color: white;
font-size: 14px;
text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
}

/* Font Size Control */
.font-size-control {
display: flex;
align-items: center;
gap: 15px;
}

.font-size-btn {
width: 36px;
height: 36px;
border-radius: 50%;
background-color: var(--accent-dark);
color: var(--text-dark);
border: none;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 1.2rem;
transition: all 0.2s var(--transition-function);
}

body.day-mode .font-size-btn {
background-color: var(--accent-light);
color: var(--text-light);
}

body.black-mode .font-size-btn {
background-color: var(--accent-black);
color: var(--text-black);
}

body.eye-mode .font-size-btn {
background-color: var(--accent-eye);
color: var(--text-eye);
}

.font-size-btn:hover {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .font-size-btn:hover {
background-color: var(--highlight-black);
}

body.eye-mode .font-size-btn:hover {
background-color: var(--highlight-eye);
}

.font-size-value {
font-weight: 500;
min-width: 30px;
text-align: center;
}

/* Select Dropdown */
.custom-select {
position: relative;
width: 100%;
}

.custom-select select {
width: 100%;
padding: 10px 15px;
border: 1px solid var(--accent-dark);
border-radius: 10px;
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 0.95rem;
appearance: none;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
background-repeat: no-repeat;
background-position: right 15px center;
background-size: 16px;
transition: all 0.2s var(--transition-function);
}

body.day-mode .custom-select select {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
color: var(--text-light);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%230f1419' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.black-mode .custom-select select {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
color: var(--text-black);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e0e0e0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.eye-mode .custom-select select {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
color: var(--text-eye);
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d4d4d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

.custom-select select:focus {
outline: none;
border-color: var(--highlight-dark);
box-shadow: none; /* Removed blue glow */
}

body.black-mode .custom-select select:focus {
border-color: var(--highlight-black);
}

body.eye-mode .custom-select select:focus {
border-color: var(--highlight-eye);
}

/* Range Slider */
.range-slider {
width: 100%;
margin: 10px 0;
}

.range-slider input {
width: 100%;
height: 5px;
border-radius: 5px;
background: var(--accent-dark);
outline: none;
-webkit-appearance: none;
}

body.day-mode .range-slider input {
background: var(--accent-light);
}

body.black-mode .range-slider input {
background: var(--accent-black);
}

body.eye-mode .range-slider input {
background: var(--accent-eye);
}

.range-slider input::-webkit-slider-thumb {
-webkit-appearance: none;
appearance: none;
width: 18px;
height: 18px;
border-radius: 50%;
background: var(--highlight-dark);
cursor: pointer;
}

body.black-mode .range-slider input::-webkit-slider-thumb {
background: var(--highlight-black);
}

body.eye-mode .range-slider input::-webkit-slider-thumb {
background: var(--highlight-eye);
}

.range-slider input::-moz-range-thumb {
width: 18px;
height: 18px;
border-radius: 50%;
background: var(--highlight-dark);
cursor: pointer;
border: none;
}

body.black-mode .range-slider input::-moz-range-thumb {
background: var(--highlight-black);
}

body.eye-mode .range-slider input::-moz-range-thumb {
background: var(--highlight-eye);
}

/* Settings Button */
.settings-btn {
padding: 12px 20px;
border: none;
border-radius: 10px;
background-color: var(--highlight-dark);
color: white;
font-size: 0.95rem;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
transition: background-color 0.2s var(--transition-function);
width: 100%;
margin-top: 10px;
}

body.black-mode .settings-btn {
background-color: var(--highlight-black);
}

body.eye-mode .settings-btn {
background-color: var(--highlight-eye);
}

.settings-btn:hover {
background-color: #1a91da;
}

body.black-mode .settings-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .settings-btn:hover {
background-color: #6b9bd4;
}

/* Footer */
footer {
padding: 15px 20px;
text-align: center;
font-size: 0.9rem;
color: var(--text-dark);
opacity: 0.8;
border-top: 1px solid var(--accent-dark);
margin-top: auto;
transition: all 0.3s var(--transition-function);
}

body.day-mode footer {
color: var(--text-light);
border-top: 1px solid var(--accent-light);
}

body.black-mode footer {
color: var(--text-black);
border-top: 1px solid var(--accent-black);
}

body.eye-mode footer {
color: var(--text-eye);
border-top: 1px solid var(--accent-eye);
}

@keyframes loadingProgress {
0% { width: 0%; }
50% { width: 100%; }
100% { width: 0%; }
}

/* Bottom Navigation */
.bottom-nav {
position: fixed;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
background-color: var(--secondary-dark);
border-radius: 30px;
padding: 5px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
z-index: 50;
display: none;
}

body.day-mode .bottom-nav {
background-color: var(--secondary-light);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

body.black-mode .bottom-nav {
background-color: var(--secondary-black);
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
}

body.eye-mode .bottom-nav {
background-color: var(--secondary-eye);
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
}

.bottom-nav-item {
display: flex;
align-items: center;
justify-content: center;
width: 50px;
height: 50px;
border-radius: 25px;
cursor: pointer;
transition: all 0.3s ease;
}

.bottom-nav-item:hover {
background-color: var(--accent-dark);
}

body.day-mode .bottom-nav-item:hover {
background-color: var(--accent-light);
}

body.black-mode .bottom-nav-item:hover {
background-color: var(--accent-black);
}

body.eye-mode .bottom-nav-item:hover {
background-color: var(--accent-eye);
}

.bottom-nav-item.active {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .bottom-nav-item.active {
background-color: var(--highlight-black);
}

body.eye-mode .bottom-nav-item.active {
background-color: var(--highlight-eye);
}

.bottom-nav-item i {
font-size: 1.2rem;
}

.home-btn {
width: 60px;
height: 60px;
border-radius: 30px;
background-color: var(--highlight-dark);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.5rem;
margin: 0 5px;
box-shadow: none; /* Removed blue glow */
transition: all 0.3s ease;
}

body.black-mode .home-btn {
background-color: var(--highlight-black);
}

body.eye-mode .home-btn {
background-color: var(--highlight-eye);
}

.home-btn:hover {
transform: translateY(-5px);
box-shadow: none; /* Removed blue glow */
}

/* Responsive */
@media (max-width: 768px) {
.sidebar {
display: none;
}

body:has(#search-page.active) .sidebar {
display: flex;
width: 50px;
z-index: 101;
}

body:has(#search-page.active) #search-page {
left: 50px;
width: calc(100% - 50px);
}

.main-content {
margin-left: 0;
}

.content {
padding: 15px;
padding-bottom: 80px;
}

#surahs {
grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
}

.search-page-container {
flex-direction: column;
}

.search-page-sidebar {
width: 100%;
position: static;
margin-bottom: 20px;
}

.setting-item {
flex-direction: column;
align-items: flex-start;
gap: 15px;
}

.setting-item .setting-label {
margin-bottom: 10px;
}

.color-options {
justify-content: center;
}

.theme-mode-selection {
justify-content: center;
}

.bottom-nav {
display: flex;
}

#search-page {
left: 0;
width: 100%;
}

/* MOBİL İÇİN YAZAR SIRALAMA PANELİ */
.author-sort-content {
width: 95%;
max-height: 90vh;
padding: 20px;
}

.author-sort-title {
font-size: 1.1rem;
}

.author-item {
padding: 12px;
}

.sort-actions {
flex-direction: column;
gap: 8px;
}

.sort-btn {
width: 100%;
}
}

@media (max-width: 480px) {
.header h1 {
font-size: 1rem;
}

.controls-row {
flex-direction: column;
}

#search, #author-select, #show-favorites {
font-size: 0.9rem;
padding: 10px 15px;
}

.surah h2 {
font-size: 1rem;
}

#verse-panel h3, #favorites h2, #verse-detail-panel h3, #podcasts h2, #settings h2 {
font-size: 1.3rem;
}

.verse {
font-size: 0.9rem;
}

#verse-detail-panel .selected-translation {
font-size: 1rem;
padding: 15px;
}

#verse-detail-panel .other-translations div {
font-size: 0.9rem;
padding: 12px;
}

.settings-section h3 {
font-size: 1.1rem;
}
}

/* Hide bottom nav on desktop */
@media (min-width: 769px) {
.bottom-nav {
display: none;
}
}

/* Show bottom nav on mobile */
@media (max-width: 768px) {
.bottom-nav {
display: flex;
}
}

/* URL hash link styles */
.verse-link {
color: inherit;
text-decoration: none;
display: inline-block;
margin-right: 5px;
}

.verse-link:hover {
text-decoration: underline;
color: var(--highlight-dark);
}

body.black-mode .verse-link:hover {
color: var(--highlight-black);
}

body.eye-mode .verse-link:hover {
color: var(--highlight-eye);
}

.copy-url-btn {
background: none;
border: none;
color: var(--text-dark);
font-size: 1rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

body.day-mode .copy-url-btn {
color: var(--text-light);
}

body.black-mode .copy-url-btn {
color: var(--text-black);
}

body.eye-mode .copy-url-btn {
color: var(--text-eye);
}

.copy-url-btn:hover {
background-color: var(--accent-dark);
color: var(--highlight-dark);
}

body.day-mode .copy-url-btn:hover {
background-color: var(--accent-light);
}

body.black-mode .copy-url-btn:hover {
background-color: var(--accent-black);
color: var(--highlight-black);
}

body.eye-mode .copy-url-btn:hover {
background-color: var(--accent-eye);
color: var(--highlight-eye);
}

/* New styles for Arabic text display */
.arabic-text {
font-family: 'Amiri', 'Scheherazade New', serif;
direction: rtl;
text-align: right;
font-size: 1.5em;
line-height: 1.8;
margin-bottom: 15px;
padding: 15px;
background-color: var(--accent-dark);
border-radius: 12px;
border: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .arabic-text {
background-color: var(--accent-light);
border: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .arabic-text {
background-color: var(--accent-black);
border: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .arabic-text {
background-color: var(--accent-eye);
border: 1px solid rgba(255, 255, 255, 0.03);
}

/* Word-by-word analysis styles */
.word-analysis {
margin-top: 20px;
border-top: 1px solid var(--accent-dark);
padding-top: 20px;
}

body.day-mode .word-analysis {
border-top: 1px solid var(--accent-light);
}

body.black-mode .word-analysis {
border-top: 1px solid var(--accent-black);
}

body.eye-mode .word-analysis {
border-top: 1px solid var(--accent-eye);
}

.word-analysis h4 {
font-size: 1.1rem;
margin-bottom: 15px;
color: var(--highlight-dark);
}

body.black-mode .word-analysis h4 {
color: var(--highlight-black);
}

body.eye-mode .word-analysis h4 {
color: var(--highlight-eye);
}

.word-list {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-bottom: 20px;
}

.word-item {
background-color: var(--secondary-dark);
border-radius: 8px;
padding: 10px;
border: 1px solid var(--accent-dark);
cursor: pointer;
transition: all 0.2s var(--transition-function);
min-width: 100px;
text-align: center;
}

body.day-mode .word-item {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .word-item {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .word-item {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.word-item:hover {
transform: translateY(-3px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
border-color: var(--highlight-dark);
}

body.day-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
border-color: var(--highlight-black);
}

body.eye-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
border-color: var(--highlight-eye);
}

.word-arabic {
font-family: 'Amiri', 'Scheherazade New', serif;
font-size: 1.3em;
margin-bottom: 5px;
direction: rtl;
}

.word-translation {
font-size: 0.85rem;
color: var(--text-dark);
opacity: 0.9;
}

body.day-mode .word-translation {
color: var(--text-light);
}

body.black-mode .word-translation {
color: var(--text-black);
}

body.eye-mode .word-translation {
color: var(--text-eye);
}

.word-detail {
display: none;
background-color: var(--accent-dark);
border-radius: 10px;
padding: 15px;
margin-top: 10px;
border: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .word-detail {
background-color: var(--accent-light);
border: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .word-detail {
background-color: var(--accent-black);
border: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .word-detail {
background-color: var(--accent-eye);
border: 1px solid rgba(255, 255, 255, 0.03);
}

.word-detail.active {
display: block;
}

.word-detail-row {
display: flex;
margin-bottom: 8px;
align-items: flex-start;
}

.word-detail-label {
font-weight: 500;
min-width: 100px;
color: var(--highlight-dark);
}

body.black-mode .word-detail-label {
color: var(--highlight-black);
}

body.eye-mode .word-detail-label {
color: var(--highlight-eye);
}

.word-detail-value {
flex: 1;
}

.root-info {
margin-top: 10px;
padding-top: 10px;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .root-info {
border-top: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .root-info {
border-top: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .root-info {
border-top: 1px solid rgba(255, 255, 255, 0.03);
}

/* Transcription styles */
.transcription {
margin-bottom: 20px;
padding: 15px;
background-color: var(--secondary-dark);
border-radius: 12px;
border: 1px solid var(--accent-dark);
font-style: italic;
}

body.day-mode .transcription {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
}

body.black-mode .transcription {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .transcription {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
}

.transcription-label {
font-weight: 500;
color: var(--highlight-dark);
margin-right: 5px;
}

body.black-mode .transcription-label {
color: var(--highlight-black);
}

body.eye-mode .transcription-label {
color: var(--highlight-eye);
}

/* Kelimenin geçtiği diğer ayetler için stiller */
.other-occurrences {
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .other-occurrences {
border-top: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .other-occurrences {
border-top: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .other-occurrences {
border-top: 1px solid rgba(255, 255, 255, 0.03);
}

.occurrences-title {
font-size: 1.1rem;
margin-bottom: 10px;
color: var(--highlight-dark);
}

body.black-mode .occurrences-title {
color: var(--highlight-black);
}

body.eye-mode .occurrences-title {
color: var(--highlight-eye);
}

.word-occurrences {
display: flex;
flex-direction: column;
gap: 8px;
max-height: 200px;
overflow-y: auto;
}

.occurrence-item {
padding: 8px 12px;
background-color: var(--accent-dark);
border-radius: 8px;
transition: all 0.2s var(--transition-function);
}

body.day-mode .occurrence-item {
background-color: var(--accent-light);
}

body.black-mode .occurrence-item {
background-color: var(--accent-black);
}

body.eye-mode .occurrence-item {
background-color: var(--accent-eye);
}

.occurrence-item:hover {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .occurrence-item:hover {
background-color: var(--highlight-black);
}

body.eye-mode .occurrence-item:hover {
background-color: var(--highlight-eye);
}

.occurrence-link {
color: inherit;
text-decoration: none;
display: block;
width: 100%;
}

.loading-occurrences, .no-occurrences, .more-occurrences {
padding: 8px;
text-align: center;
font-style: italic;
opacity: 0.8;
}

.more-occurrences {
font-size: 0.9rem;
color: var(--highlight-dark);
}

body.black-mode .more-occurrences {
color: var(--highlight-black);
}

body.eye-mode .more-occurrences {
color: var(--highlight-eye);
}

/* Ana sayfa arama sonuçları için stil */
#main-search-results {
margin-top: 20px;
display: none;
}

#main-search-results.active {
display: block;
}

/* Soluk Arka Plan Blok Stili - Ayet Numaraları İçin */
.verse-number-bg {
display: inline-block;
background-color: rgba(29, 161, 242, 0.15);
color: var(--highlight-dark);
font-weight: bold;
padding: 2px 6px;
border-radius: 4px;
margin-right: 8px;
min-width: 30px;
text-align: center;
}

body.day-mode .verse-number-bg {
background-color: rgba(29, 161, 242, 0.1);
}

body.black-mode .verse-number-bg {
background-color: rgba(74, 158, 255, 0.15);
color: var(--highlight-black);
}

body.eye-mode .verse-number-bg {
background-color: rgba(123, 167, 217, 0.15);
color: var(--highlight-eye);
}

/* KAYDIRMA SORUNUNU DÜZELTME - SADECE AYET PANELİNDE */
#verse-detail-panel {
scroll-behavior: smooth;
}

#verse-detail-panel .verse-content-container {
scroll-behavior: smooth;
}

/* Prevent scroll jumping */
html {
scroll-behavior: smooth;
}

/* Swipe indicator styles for mobile */
.swipe-indicator {
position: fixed;
top: 50%;
transform: translateY(-50%);
background-color: rgba(29, 161, 242, 0.8);
color: white;
padding: 10px 15px;
border-radius: 25px;
font-size: 0.9rem;
z-index: 1000;
opacity: 0;
transition: opacity 0.3s ease;
pointer-events: none;
}

body.black-mode .swipe-indicator {
background-color: rgba(74, 158, 255, 0.8);
}

body.eye-mode .swipe-indicator {
background-color: rgba(123, 167, 217, 0.8);
}

.swipe-indicator.left {
left: 20px;
}

.swipe-indicator.right {
right: 20px;
}

.swipe-indicator.show {
opacity: 1;
}

/* Notification styles */
.notification {
position: fixed;
top: 20px;
right: 20px;
background-color: var(--secondary-dark);
color: var(--text-dark);
padding: 15px 20px;
border-radius: 12px;
border: 1px solid var(--accent-dark);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
z-index: 1001;
max-width: 350px;
transform: translateX(400px);
transition: transform 0.3s ease;
}

body.day-mode .notification {
background-color: var(--secondary-light);
color: var(--text-light);
border: 1px solid var(--accent-light);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
}

body.black-mode .notification {
background-color: var(--secondary-black);
color: var(--text-black);
border: 1px solid var(--accent-black);
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.08);
}

body.eye-mode .notification {
background-color: var(--secondary-eye);
color: var(--text-eye);
border: 1px solid var(--accent-eye);
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.05);
}

.notification.show {
transform: translateX(0);
}

.notification.success {
border-left: 4px solid #4caf50;
}

.notification.error {
border-left: 4px solid #f44336;
}

.notification.info {
border-left: 4px solid var(--highlight-dark);
}

body.black-mode .notification.info {
border-left-color: var(--highlight-black);
}

body.eye-mode .notification.info {
border-left-color: var(--highlight-eye);
}

.notification-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 8px;
}

.notification-title {
font-weight: 600;
font-size: 0.95rem;
}

.notification-close {
background: none;
border: none;
color: var(--text-dark);
cursor: pointer;
padding: 4px;
border-radius: 4px;
transition: background-color 0.2s;
}

body.day-mode .notification-close {
color: var(--text-light);
}

body.black-mode .notification-close {
color: var(--text-black);
}

body.eye-mode .notification-close {
color: var(--text-eye);
}

.notification-close:hover {
background-color: var(--accent-dark);
}

body.day-mode .notification-close:hover {
background-color: var(--accent-light);
}

body.black-mode .notification-close:hover {
background-color: var(--accent-black);
}

body.eye-mode .notification-close:hover {
background-color: var(--accent-eye);
}

.notification-message {
font-size: 0.9rem;
line-height: 1.4;
}

/* Favorites improvements */
.favorites-toolbar {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
padding: 15px;
background-color: var(--accent-dark);
border-radius: 12px;
border: 1px solid var(--accent-dark);
}

body.day-mode .favorites-toolbar {
background-color: var(--accent-light);
border: 1px solid var(--accent-light);
}

body.black-mode .favorites-toolbar {
background-color: var(--accent-black);
border: 1px solid var(--accent-black);
}

body.eye-mode .favorites-toolbar {
background-color: var(--accent-eye);
border: 1px solid var(--accent-eye);
}

.favorites-count {
font-size: 0.9rem;
color: var(--text-dark);
opacity: 0.8;
}

body.day-mode .favorites-count {
color: var(--text-light);
}

body.black-mode .favorites-count {
color: var(--text-black);
}

body.eye-mode .favorites-count {
color: var(--text-eye);
}

.favorites-actions {
display: flex;
gap: 10px;
}

.favorites-btn {
padding: 8px 15px;
border: none;
border-radius: 20px;
background-color: var(--highlight-dark);
color: white;
font-size: 0.85rem;
cursor: pointer;
display: flex;
align-items: center;
gap: 6px;
transition: all 0.2s var(--transition-function);
}

body.black-mode .favorites-btn {
background-color: var(--highlight-black);
}

body.eye-mode .favorites-btn {
background-color: var(--highlight-eye);
}

.favorites-btn:hover {
background-color: #1a91da;
transform: translateY(-1px);
}

body.black-mode .favorites-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .favorites-btn:hover {
background-color: #6b9bd4;
}

.favorites-btn.secondary {
background-color: var(--accent-dark);
color: var(--text-dark);
}

body.day-mode .favorites-btn.secondary {
background-color: var(--accent-light);
color: var(--text-light);
}

body.black-mode .favorites-btn.secondary {
background-color: var(--accent-black);
color: var(--text-black);
}

body.eye-mode .favorites-btn.secondary {
background-color: var(--accent-eye);
color: var(--text-eye);
}

.favorites-btn.secondary:hover {
background-color: var(--highlight-dark);
color: white;
}

body.black-mode .favorites-btn.secondary:hover {
background-color: var(--highlight-black);
}

body.eye-mode .favorites-btn.secondary:hover {
background-color: var(--highlight-eye);
}

.favorites-search {
width: 100%;
padding: 12px 15px;
border: 1px solid var(--accent-dark);
border-radius: 20px;
background-color: var(--secondary-dark);
color: var(--text-dark);
font-size: 0.9rem;
margin-bottom: 15px;
transition: all 0.2s var(--transition-function);
}

body.day-mode .favorites-search {
background-color: var(--secondary-light);
border: 1px solid var(--accent-light);
color: var(--text-light);
}

body.black-mode .favorites-search {
background-color: var(--secondary-black);
border: 1px solid var(--accent-black);
color: var(--text-black);
}

body.eye-mode .favorites-search {
background-color: var(--secondary-eye);
border: 1px solid var(--accent-eye);
color: var(--text-eye);
}

.favorites-search:focus {
outline: none;
border-color: var(--highlight-dark);
}

body.black-mode .favorites-search:focus {
border-color: var(--highlight-black);
}

body.eye-mode .favorites-search:focus {
border-color: var(--highlight-eye);
}

.favorites-empty {
text-align: center;
padding: 60px 20px;
color: var(--text-dark);
opacity: 0.6;
}

body.day-mode .favorites-empty {
color: var(--text-light);
}

body.black-mode .favorites-empty {
color: var(--text-black);
}

body.eye-mode .favorites-empty {
color: var(--text-eye);
}

.favorites-empty i {
font-size: 3rem;
margin-bottom: 15px;
color: var(--highlight-dark);
}

body.black-mode .favorites-empty i {
color: var(--highlight-black);
}

body.eye-mode .favorites-empty i {
color: var(--highlight-eye);
}

.favorites-empty h3 {
font-size: 1.2rem;
margin-bottom: 10px;
}

.favorites-empty p {
font-size: 0.9rem;
}
</style>
</head>
<body>
<!-- Desktop Sidebar -->
<div class="sidebar">
<img src="sdc1.PNG" alt="Logo" class="sidebar-logo" />
<nav class="sidebar-nav">
<div class="nav-item active" id="home-nav-desktop">
<i class="fas fa-home"></i>
</div>
<div class="nav-item" id="search-nav-desktop">
<i class="fas fa-search"></i>
</div>
<div class="nav-item" id="favorites-nav-desktop">
<i class="fas fa-star"></i>
</div>
<div class="nav-item" id="meal-writers-nav-desktop">
<i class="fas fa-users"></i>
</div>
<div class="nav-item" id="podcasts-nav-desktop">
<i class="fas fa-podcast"></i>
</div>
<div class="nav-item" id="settings-nav-desktop">
<i class="fas fa-cog"></i>
</div>
</nav>
</div>

<div class="main-content">
<header class="header">
<h1>SADECE KURAN</h1>
<div class="header-actions">
<button id="theme-toggle"><i class="fas fa-moon"></i></button>
</div>
</header>

<div class="content">
<div class="controls">
<div class="search-container">
<input type="text" id="search" placeholder="Sure, ayet veya kelime ara..." />
<i class="fas fa-search search-icon"></i>
</div>
<div class="controls-row">
<select id="author-select">
<option value="">Meal Seçin</option>
</select>
<button id="show-favorites"><i class="fas fa-star"></i> Favoriler</button>
</div>
<div id="loading-bar">
<div class="progress"></div>
</div>
</div>

<!-- Ana sayfa arama sonuçları -->
<div id="main-search-results"></div>

<div id="surahs"></div>

<div id="verse-panel">
<h3>
<button id="close-panel"><i class="fas fa-arrow-left"></i></button>
<span id="panel-title"></span>
</h3>
<div id="verses"></div>
</div>

<!-- YENİ TASARIM - Ayet Detay Paneli -->
<div id="verse-detail-panel">
<h3>
<button id="back-btn" class="back-btn"><i class="fas fa-arrow-left"></i></button>
<span id="verse-detail-title"></span>
</h3>

<!-- BÜYÜK EKRANLAR İÇİN YENİ LAYOUT -->
<div class="verse-content-container">
<!-- Sol sidebar - Diğer Mealler (sadece büyük ekranlarda) -->
<div class="verse-left-sidebar">
    <div class="sidebar-title">
        DİĞER MEALLER
        <button class="sort-authors-btn" id="sort-authors-btn">
            <i class="fas fa-sort"></i> Sırala
        </button>
    </div>
    <div id="other-translations" class="other-translations"></div>
</div>

<!-- Ana içerik -->
<div class="verse-main-content">
<!-- Meal (Türkçe çeviri) -->
<div class="verse-section">
    <div id="selected-translation" class="selected-translation"></div>
</div>

<!-- Arapça metin -->
<div class="verse-section">
    <div id="arabic-text" class="arabic-text"></div>
</div>

<!-- Türkçe okunuş -->
<div class="verse-section">
    <div class="transcription">
        <span class="transcription-label">T.:</span>
        <span id="transcription-tr"></span>
    </div>
</div>

<!-- Navigasyon butonları -->
<div class="verse-navigation-buttons">
    <button id="prev-verse-btn" class="nav-btn"><i class="fas fa-chevron-left"></i> Önceki</button>
    <button id="next-verse-btn" class="nav-btn">Sonraki <i class="fas fa-chevron-right"></i></button>
</div>
</div>

<!-- Sağ sidebar - Kelime Analizi (sadece büyük ekranlarda) -->
<div class="verse-right-sidebar">
<h4 class="sidebar-title">KELİME ANALİZİ</h4>
<div class="word-analysis">
    <div id="word-list" class="word-list"></div>
    <div id="word-detail" class="word-detail"></div>
</div>
</div>
</div>

<!-- MOBİL İÇİN SEKMELER -->
<div class="tab-container">
<div class="tab-buttons">
<div class="tab-header">
    <button class="tab-button active" data-tab="other-translations">
        DİĞER MEALLER
    </button>
    <button class="sort-authors-btn" id="sort-authors-btn-mobile">
        <i class="fas fa-sort"></i>
    </button>
</div>
<button class="tab-button" data-tab="word-analysis">Kelime Analizi</button>
</div>

<!-- Diğer Mealler sekmesi -->
<div class="tab-content active" id="other-translations-tab">
<div id="other-translations-mobile" class="other-translations"></div>
</div>

<!-- Kelime Analizi sekmesi -->
<div class="tab-content" id="word-analysis-tab">
<div class="word-analysis">
    <div id="word-list-mobile" class="word-list"></div>
    <div id="word-detail-mobile" class="word-detail"></div>
</div>
</div>
</div>
</div>

<!-- Yazar Sıralama Paneli -->
<div class="author-sort-panel" id="author-sort-panel">
<div class="author-sort-content">
<div class="author-sort-header">
<h3 class="author-sort-title">Meal Yazarları Sıralaması</h3>
<button class="close-sort-panel" id="close-sort-panel">
    <i class="fas fa-times"></i>
</button>
</div>

<div class="author-list" id="author-list">
<!-- Yazarlar dinamik olarak buraya eklenecek -->
</div>

<div class="sort-actions">
<button class="sort-btn reset-sort-btn" id="reset-sort-btn">
    <i class="fas fa-undo"></i> Sıfırla
</button>
<button class="sort-btn save-sort-btn" id="save-sort-btn">
    <i class="fas fa-save"></i> Kaydet
</button>
</div>
</div>
</div>

<div id="favorites">
<h2><i class="fas fa-star"></i> Favori Ayetler</h2>

<!-- Favorites Toolbar -->
<div class="favorites-toolbar">
<div class="favorites-count" id="favorites-count">0 favori ayet</div>
<div class="favorites-actions">
<button class="favorites-btn" id="export-favorites">
    <i class="fas fa-download"></i> Dışa Aktar
</button>
<button class="favorites-btn secondary" id="clear-all-favorites">
    <i class="fas fa-trash"></i> Tümünü Temizle
</button>
</div>
</div>

<!-- Favorites Search -->
<input type="text" class="favorites-search" id="favorites-search" placeholder="Favorilerde ara..." />

<div id="favorites-list"></div>
<button id="back-to-surahs"><i class="fas fa-arrow-left"></i> Ana Sayfaya Dön</button>
</div>

<div id="podcasts">
<h2><i class="fas fa-podcast"></i> Podcastler</h2>

<div class="podcast-container">
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/3RRKc1JEyzLSkBjfut5EwH?utm_source=generator" width="100%" height="156" title="Sadece Kuran Podcast" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

</div>
</div>

<!-- Settings Section -->
<div id="settings">
<h2><i class="fas fa-cog"></i> Ayarlar</h2>

<div class="settings-section">
<h3>Görünüm</h3>

<div class="setting-item">
<div class="setting-label">
    <span>Tema Modu</span>
    <span>Karanlık, tam siyah, göz dostu veya açık tema seçin</span>
</div>
<div class="theme-mode-selection">
    <div class="theme-option" data-theme="dark">
        <i class="fas fa-moon"></i> Karanlık
    </div>
    <div class="theme-option" data-theme="black">
        <i class="fas fa-circle"></i> Tam Siyah
    </div>
    <div class="theme-option" data-theme="eye">
        <i class="fas fa-eye"></i> Göz Dostu
    </div>
    <div class="theme-option" data-theme="day">
        <i class="fas fa-sun"></i> Açık
    </div>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Tema Rengi</span>
    <span>Uygulamanın vurgu rengini seçin</span>
</div>
<div class="color-options">
    <div class="color-option active" style="background-color: #1da1f2;" data-color="#1da1f2"></div>
    <div class="color-option" style="background-color: #4caf50;" data-color="#4caf50"></div>
    <div class="color-option" style="background-color: #f44336;" data-  data-color="#4caf50"></div>
    <div class="color-option" style="background-color: #f44336;" data-color="#f44336"></div>
    <div class="color-option" style="background-color: #9c27b0;" data-color="#9c27b0"></div>
    <div class="color-option" style="background-color: #ff9800;" data-color="#ff9800"></div>
    <div class="color-option" style="background-color: #7b7675;" data-color="#7b7675"></div>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Yazı Boyutu</span>
    <span>Ayet metinlerinin boyutunu ayarlayın</span>
</div>
<div class="font-size-control">
    <button class="font-size-btn" id="decrease-font"><i class="fas fa-minus"></i></button>
    <span class="font-size-value" id="font-size-value">100%</span>
    <button class="font-size-btn" id="increase-font"><i class="fas fa-plus"></i></button>
</div>
</div>

<!-- Ayet Numarası Stili Ayarı -->
<div class="setting-item">
<div class="setting-label">
    <span>Ayet Numarası Stili</span>
    <span>Ayet numaralarının görünümünü seçin</span>
</div>
<div class="custom-select">
    <select id="verse-number-style">
        <option value="default">Varsayılan</option>
        <option value="bg" selected>Soluk Arka Plan</option>
        <option value="bold">Kalın ve Renkli</option>
        <option value="underline">Altı Çizgili</option>
    </select>
</div>
</div>

<!-- Arapça Metin Görünümü Ayarı -->
<div class="setting-item">
<div class="setting-label">
    <span>Arapça Metin Görünümü</span>
    <span>Arapça metin gösterim tercihini seçin</span>
</div>
<div class="custom-select">
    <select id="arabic-display-mode">
        <option value="always">Her Zaman Göster</option>
        <option value="tab" selected>Sekme Olarak Göster</option>
        <option value="never">Gösterme</option>
    </select>
</div>
</div>
</div>

<div class="settings-section">
<h3>Okuma Ayarları</h3>

<div class="setting-item">
<div class="setting-label">
    <span>Varsayılan Meal</span>
    <span>Tercih ettiğiniz meali seçin</span>
</div>
<div class="custom-select">
    <select id="default-author">
        <option value="Mehmet Okuyan">Mehmet Okuyan</option>
        <option value="Mustafa İslamoğlu">Mustafa İslamoğlu</option>
        <option value="Yaşar Nuri Öztürk">Yaşar Nuri Öztürk</option>
        <option value="Edip Yüksel">Edip Yüksel</option>
        <option value="Diyanet Vakfı">Diyanet Vakfı</option>
    </select>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Otomatik Kaydırma</span>
    <span>Uzun surelerde otomatik kaydırma</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="auto-scroll-toggle">
    <span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Kaydırma Hızı</span>
    <span>Otomatik kaydırma hızını ayarlayın</span>
</div>
<div class="range-slider">
    <input type="range" min="1" max="10" value="5" id="scroll-speed">
</div>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Kelime Analizi</span>
    <span>Ayet detayında kelime analizi göster</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="word-analysis-toggle" checked>
    <span class="toggle-slider"></span>
</label>
</div>
</div>

<div class="settings-section">
<h3>Bildirimler</h3>

<div class="setting-item">
<div class="setting-label">
    <span>Günlük Ayet Bildirimleri</span>
    <span>Her gün rastgele bir ayet bildirimi alın</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="daily-verse-toggle">
    <span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Bildirim Zamanı</span>
    <span>Günlük ayet bildiriminin zamanını seçin</span>
</div>
<div class="custom-select">
    <select id="notification-time">
        <option value="morning">Sabah (08:00)</option>
        <option value="noon">Öğle (12:00)</option>
        <option value="evening">Akşam (18:00)</option>
        <option value="night">Gece (21:00)</option>
    </select>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Bildirim Sesi</span>
    <span>Bildirim geldiğinde ses çıkarsın</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="notification-sound-toggle" checked>
    <span class="toggle-slider"></span>
</label>
</div>
</div>

<div class="settings-section">
<h3>Veri ve Gizlilik</h3>

<div class="setting-item">
<div class="setting-label">
    <span>Çevrimdışı Kullanım</span>
    <span>İnternetsiz kullanım için verileri kaydet</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="offline-toggle" checked>
    <span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
    <span>Arama Geçmişi</span>
    <span>Arama geçmişinizi kaydet</span>
</div>
<label class="toggle-switch">
    <input type="checkbox" id="search-history-toggle" checked>
    <span class="toggle-slider"></span>
</label>
</div>

<button class="settings-btn" id="clear-data-btn">
<i class="fas fa-trash-alt"></i> Tüm Verileri Temizle
</button>
</div>

<div class="settings-section">
<h3>Hakkında</h3>

<button class="settings-btn" id="app-btn">
<svg class="button-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
    <!-- Örnek bir Android simgesi SVG'si -->
    <path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.86 3.11c-.2.2-.2.51 0 .71.2.2.51.2.71 0l1.3-1.3C10.66 2.19 11.32 2 12 2c.68 0 1.34.19 1.91.54zM12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8z"/>
</svg> Mobil Uygulama İNDİR
</button>

<div class="setting-item">
<div class="setting-label">
    <span>Uygulama Versiyonu</span>
    <span>v1.4.0</span>
</div>
</div>

<button class="settings-btn" id="feedback-btn">
<i class="fas fa-comment-alt"></i> Geri Bildirim Gönder
</button>
</div>
</div>
</div>

<footer>
<p>© 2025 THE LENG | SADECE KURAN</p>
</footer>
</div>

<div id="search-page">
<div class="search-page-header">
<button class="search-page-back"><i class="fas fa-arrow-left"></i></button>
<h2>Arama</h2>
</div>

<div class="search-page-container">
<div class="search-page-main">
<div class="search-page-input-container">
<input type="text" id="search-page-input" placeholder="Sure, ayet veya kelime ara..." autofocus />
<i class="fas fa-search search-page-icon"></i>
</div>
<div id="search-results"></div>
</div>

<div class="search-page-sidebar">
<h3>Örnek Aramalar</h3>
<div class="example-searches">
<div class="example-search"><i class="fas fa-hashtag"></i> islam</div>
<div class="example-search"><i class="fas fa-hashtag"></i> iman</div>
<div class="example-search"><i class="fas fa-hashtag"></i> rahmet</div>
<div class="example-search"><i class="fas fa-hashtag"></i> tevhid</div>
<div class="example-search"><i class="fas fa-hashtag"></i> sabır</div>
<div class="example-search"><i class="fas fa-hashtag"></i> şükür</div>
<div class="example-search"><i class="fas fa-hashtag"></i> dua</div>
<div class="example-search"><i class="fas fa-hashtag"></i> namaz</div>
</div>
</div>
</div>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
<div class="bottom-nav-item active" id="home-nav">
<i class="fas fa-home"></i>
</div>
<div class="bottom-nav-item" id="search-nav">
<i class="fas fa-search"></i>
</div>
<div class="home-btn" id="home-btn">
<i class="fas fa-book-open"></i>
</div>
<div class="bottom-nav-item" id="favorites-nav">
<i class="fas fa-star"></i>
</div>
<div class="bottom-nav-item" id="settings-nav">
<i class="fas fa-cog"></i>
</div>
</div>

<!-- Swipe indicators for mobile -->
<div class="swipe-indicator left" id="swipe-left">
<i class="fas fa-chevron-left"></i> Önceki
</div>
<div class="swipe-indicator right" id="swipe-right">
Sonraki <i class="fas fa-chevron-right"></i>
</div>

<script>
let quranData = [];
let jsonData = {};
let allSurahsData = null;
let selectedAuthor = "Mehmet Okuyan";
const totalSurahs = 114;
let verseNumberStyle = localStorage.getItem("verseNumberStyle") || "bg";
let arabicDisplayMode = localStorage.getItem("arabicDisplayMode") || "tab";
let showWordAnalysis = localStorage.getItem("showWordAnalysis") !== "false";
let dataLoaded = false;

// Navigation variables
let currentSurahIndex = 0;
let currentVerseIndex = 0;

// Touch/Swipe variables - SADECE AYET PANELİ İÇİN
let touchStartX = 0;
let touchStartY = 0;
let touchEndX = 0;
let touchEndY = 0;
let isSwipeDetected = false;
let isInVerseDetailPanel = false;

// Mobile scroll detection variables - YENİ EKLENEN
let isScrolling = false;
let scrollTimeout = null;
let lastScrollY = 0;
let scrollThreshold = 10;

// Mobile long press variables
let longPressTimer = null;
let isLongPress = false;
let longPressTarget = null;

// Author sorting variables
let authorOrder = JSON.parse(localStorage.getItem("authorOrder") || "[]");
let originalAuthorOrder = [];

// Notification variables
let notificationPermissionGranted = false;
let notificationSound = localStorage.getItem("notificationSound") !== "false";

// Favorites variables
let allFavorites = [];
let filteredFavorites = [];

// Sure isimleri haritası
const surahNames = {
1: "Fatiha", 2: "Bakara", 3: "Al-i Imran", 4: "Nisa", 5: "Maide", 6: "Enam", 7: "Araf", 8: "Enfal", 9: "Tevbe", 10: "Yunus",
11: "Hud", 12: "Yusuf", 13: "Rad", 14: "Ibrahim", 15: "Hicr", 16: "Nahl", 17: "Isra", 18: "Kehf", 19: "Meryem", 20: "Ta-Ha",
21: "Enbiya", 22: "Hac", 23: "Muminun", 24: "Nur", 25: "Furkan", 26: "Suara", 27: "Neml", 28: "Kasas", 29: "Ankebut", 30: "Rum",
31: "Lokman", 32: "Secde", 33: "Ahzab", 34: "Sebe", 35: "Fatir", 36: "Yasin", 37: "Saffat", 38: "Sad", 39: "Zumer", 40: "Mumin",
41: "Fussilet", 42: "Sura", 43: "Zuhruf", 44: "Duhan", 45: "Casiye", 46: "Ahkaf", 47: "Muhammed", 48: "Fetih", 49: "Hucurat", 50: "Kaf",
51: "Zariyat", 52: "Tur", 53: "Necm", 54: "Kamer", 55: "Rahman", 56: "Vakia", 57: "Hadid", 58: "Mucadele", 59: "Hasr", 60: "Mumtehine",
61: "Saf", 62: "Cuma", 63: "Munafikun", 64: "Tegabun", 65: "Talak", 66: "Tahrim", 67: "Mulk", 68: "Kalem", 69: "Hakka", 70: "Mearic",
71: "Nuh", 72: "Cin", 73: "Muzzemmil", 74: "Muddessir", 75: "Kiyame", 76: "Insan", 77: "Murselat", 78: "Nebe", 79: "Naziat", 80: "Abese",
81: "Tekvir", 82: "Infitar", 83: "Mutaffifin", 84: "Insikak", 85: "Buruc", 86: "Tarik", 87: "Ala", 88: "Gasiye", 89: "Fecr", 90: "Beled",
91: "Sems", 92: "Leyl", 93: "Duha", 94: "Insirah", 95: "Tin", 96: "Alak", 97: "Kadr", 98: "Beyyine", 99: "Zilzal", 100: "Adiyat",
101: "Karia", 102: "Tekasur", 103: "Asr", 104: "Humeze", 105: "Fil", 106: "Kureys", 107: "Maun", 108: "Kevser", 109: "Kafirun", 110: "Nasr",
111: "Tebbet", 112: "Ihlas", 113: "Felak", 114: "Nas"
};

// Tema ve ayarlar değişkenleri
let currentTheme = localStorage.getItem("currentTheme") || "dark";
let highlightColor = localStorage.getItem("highlightColor") || "#1da1f2";
let fontSize = parseInt(localStorage.getItem("fontSize") || "100");
let defaultAuthor = localStorage.getItem("defaultAuthor") || "Mehmet Okuyan";
let autoScroll = localStorage.getItem("autoScroll") === "true";
let scrollSpeed = parseInt(localStorage.getItem("scrollSpeed") || "5");
let dailyVerse = localStorage.getItem("dailyVerse") === "true";
let notificationTime = localStorage.getItem("notificationTime") || "morning";
let offlineMode = localStorage.getItem("offlineMode") !== "false";
let searchHistory = localStorage.getItem("searchHistory") !== "false";

// URL hash işlemleri için değişkenler
let currentSurahId = 0;
let currentVerseId = 0;

function getSurahName(id) {
return surahNames[id] || `Sure ${id}`;
}

function getSurahIdByName(name) {
for (const [id, surahName] of Object.entries(surahNames)) {
if (surahName.toLowerCase() === name.toLowerCase()) {
return parseInt(id);
}
}
return null;
}

function checkStorageAvailability() {
try {
const test = "test";
localStorage.setItem(test, test);
localStorage.removeItem(test);
return true;
} catch (e) {
console.warn("LocalStorage kullanılamıyor:", e);
return false;
}
}

function showLoading() {
const loadingBar = document.getElementById("loading-bar");
loadingBar.style.display = "block";
}

function hideLoading() {
const loadingBar = document.getElementById("loading-bar");
loadingBar.style.display = "none";
}

function loadAuthors(data) {
const select = document.getElementById("author-select");
select.innerHTML = '<option value="">Meal Seçin</option>';

const authorsSet = new Set();
const fragment = document.createDocumentFragment();

data.surahs.forEach(surah => {
surah.verses.forEach(verse => {
verse.translations.forEach(trans => {
authorsSet.add(trans.author);
});
});
});

const authors = Array.from(authorsSet);
originalAuthorOrder = [...authors];

// Eğer kaydedilmiş sıralama yoksa, orijinal sıralamayı kullan
if (authorOrder.length === 0) {
authorOrder = [...authors];
localStorage.setItem("authorOrder", JSON.stringify(authorOrder));
}

authors.forEach(author => {
const option = document.createElement("option");
option.value = author;
option.textContent = author;
if (author === selectedAuthor) option.selected = true;
fragment.appendChild(option);
});

select.appendChild(fragment);
}

// Theme functions
function applyTheme(theme) {
// Remove all theme classes
document.body.classList.remove("day-mode", "black-mode", "eye-mode");

// Apply the selected theme
switch(theme) {
case "day":
document.body.classList.add("day-mode");
break;
case "black":
document.body.classList.add("black-mode");
break;
case "eye":
document.body.classList.add("eye-mode");
break;
case "dark":
default:
// Default dark mode, no additional class needed
break;
}

currentTheme = theme;
localStorage.setItem("currentTheme", theme);
updateThemeButton();
updateThemeSelection();
}

function updateThemeButton() {
const themeToggle = document.getElementById("theme-toggle");
switch(currentTheme) {
case "day":
themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
break;
case "black":
themeToggle.innerHTML = '<i class="fas fa-circle"></i>';
break;
case "eye":
themeToggle.innerHTML = '<i class="fas fa-eye"></i>';
break;
case "dark":
default:
themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
break;
}
}

function updateThemeSelection() {
document.querySelectorAll('.theme-option').forEach(option => {
option.classList.remove('active');
if (option.dataset.theme === currentTheme) {
option.classList.add('active');
}
});
}

function cycleTheme() {
const themes = ["dark", "black", "eye", "day"];
const currentIndex = themes.indexOf(currentTheme);
const nextIndex = (currentIndex + 1) % themes.length;
applyTheme(themes[nextIndex]);
}

// Enhanced notification system
function showNotification(message, type = 'info', duration = 3000) {
const notification = document.createElement('div');
notification.className = `notification ${type}`;

const header = document.createElement('div');
header.className = 'notification-header';

const title = document.createElement('div');
title.className = 'notification-title';
title.textContent = type === 'success' ? 'Başarılı' : 
                   type === 'error' ? 'Hata' : 'Bilgi';

const closeBtn = document.createElement('button');
closeBtn.className = 'notification-close';
closeBtn.innerHTML = '<i class="fas fa-times"></i>';
closeBtn.onclick = () => hideNotification(notification);

header.appendChild(title);
header.appendChild(closeBtn);

const messageDiv = document.createElement('div');
messageDiv.className = 'notification-message';
messageDiv.textContent = message;

notification.appendChild(header);
notification.appendChild(messageDiv);

document.body.appendChild(notification);

// Show notification
setTimeout(() => notification.classList.add('show'), 100);

// Auto hide
setTimeout(() => hideNotification(notification), duration);

// Play sound if enabled
if (notificationSound && type !== 'error') {
playNotificationSound();
}
}

function hideNotification(notification) {
notification.classList.remove('show');
setTimeout(() => {
if (document.body.contains(notification)) {
document.body.removeChild(notification);
}
}, 300);
}

function playNotificationSound() {
try {
const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT');
audio.volume = 0.3;
audio.play().catch(() => {}); // Ignore errors
} catch (e) {
// Ignore audio errors
}
}

// Mobile scroll detection - YENİ EKLENEN FONKSİYONLAR
function setupMobileScrollDetection() {
if (window.innerWidth > 768) return; // Only on mobile

const versesContainer = document.getElementById("verses");
if (!versesContainer) return;

versesContainer.addEventListener('scroll', handleScroll, { passive: true });
versesContainer.addEventListener('touchstart', handleScrollTouchStart, { passive: true });
versesContainer.addEventListener('touchmove', handleScrollTouchMove, { passive: true });
versesContainer.addEventListener('touchend', handleScrollTouchEnd, { passive: true });
}

function handleScroll() {
if (window.innerWidth > 768) return; // Only on mobile

isScrolling = true;
disableVerseClicks();

// Clear existing timeout
if (scrollTimeout) {
clearTimeout(scrollTimeout);
}

// Set timeout to re-enable clicks after scrolling stops
scrollTimeout = setTimeout(() => {
isScrolling = false;
enableVerseClicks();
}, 150); // 150ms after scroll stops
}

function handleScrollTouchStart(e) {
if (window.innerWidth > 768) return; // Only on mobile

lastScrollY = e.touches[0].clientY;
}

function handleScrollTouchMove(e) {
if (window.innerWidth > 768) return; // Only on mobile

const currentY = e.touches[0].clientY;
const deltaY = Math.abs(currentY - lastScrollY);

// If significant vertical movement detected, disable verse clicks
if (deltaY > scrollThreshold) {
isScrolling = true;
disableVerseClicks();
}
}

function handleScrollTouchEnd() {
if (window.innerWidth > 768) return; // Only on mobile

// Re-enable clicks after a short delay
setTimeout(() => {
isScrolling = false;
enableVerseClicks();
}, 100);
}

function disableVerseClicks() {
const verses = document.querySelectorAll('.verse');
verses.forEach(verse => {
verse.classList.add('scroll-disabled');
});
}

function enableVerseClicks() {
const verses = document.querySelectorAll('.verse');
verses.forEach(verse => {
verse.classList.remove('scroll-disabled');
});
}

// Mobile long press functionality - GÜNCELLENDİ
function setupMobileLongPress() {
document.addEventListener('touchstart', handleMobileTouchStart, { passive: false });
document.addEventListener('touchend', handleMobileTouchEnd, { passive: false });
document.addEventListener('touchmove', handleMobileTouchMove, { passive: false });
}

function handleMobileTouchStart(e) {
if (window.innerWidth > 768) return; // Only on mobile

const verse = e.target.closest('.verse');
if (!verse || verse.closest('#favorites-list') || verse.classList.contains('scroll-disabled')) return; // Skip if scrolling or in favorites

longPressTarget = verse;
isLongPress = false;

longPressTimer = setTimeout(() => {
if (!isScrolling && longPressTarget && !longPressTarget.classList.contains('scroll-disabled')) {
    isLongPress = true;
    showVerseActions(verse);
    // Haptic feedback if available
    if (navigator.vibrate) {
        navigator.vibrate(50);
    }
}
}, 500); // 500ms for long press
}

function handleMobileTouchEnd(e) {
if (longPressTimer) {
clearTimeout(longPressTimer);
longPressTimer = null;
}

if (!isLongPress && longPressTarget && !isScrolling && !longPressTarget.classList.contains('scroll-disabled')) {
// Normal tap - hide any visible actions and handle verse click
hideAllVerseActions();

// Handle normal verse click
const verse = longPressTarget;
if (verse && !e.target.closest('button') && !e.target.closest('a')) {
const index = parseInt(verse.dataset.index);
const surahId = parseInt(verse.dataset.surahId);
const surah = verse.dataset.surah;

if (index !== undefined && surahId && surah) {
    const surahIndex = quranData.findIndex(s => s.sure === surah);
    if (surahIndex !== -1) {
        const ayet = quranData[surahIndex].ayetler[index];
        displayVerseDetail(surah, ayet, index, surahId);
    }
}
}
}

longPressTarget = null;
isLongPress = false;
}

function handleMobileTouchMove(e) {
if (longPressTimer) {
clearTimeout(longPressTimer);
longPressTimer = null;
}
}

function showVerseActions(verse) {
// Hide all other verse actions first
hideAllVerseActions();

const actions = verse.querySelector('.verse-actions');
if (actions) {
actions.classList.add('show');

// Hide after 3 seconds
setTimeout(() => {
actions.classList.remove('show');
}, 3000);
}
}

function hideAllVerseActions() {
document.querySelectorAll('.verse-actions.show').forEach(actions => {
actions.classList.remove('show');
});
}

// Author sorting functionality
function setupAuthorSorting() {
const sortBtn = document.getElementById('sort-authors-btn');
const sortBtnMobile = document.getElementById('sort-authors-btn-mobile');
const sortPanel = document.getElementById('author-sort-panel');
const closeSortPanel = document.getElementById('close-sort-panel');
const authorList = document.getElementById('author-list');
const saveSortBtn = document.getElementById('save-sort-btn');
const resetSortBtn = document.getElementById('reset-sort-btn');

if (sortBtn) {
sortBtn.addEventListener('click', (e) => {
e.stopPropagation();
showAuthorSortPanel();
});
}

if (sortBtnMobile) {
sortBtnMobile.addEventListener('click', (e) => {
e.stopPropagation();
showAuthorSortPanel();
});
}

if (closeSortPanel) {
closeSortPanel.addEventListener('click', hideAuthorSortPanel);
}

if (sortPanel) {
sortPanel.addEventListener('click', (e) => {
if (e.target === sortPanel) {
    hideAuthorSortPanel();
}
});
}

if (saveSortBtn) {
saveSortBtn.addEventListener('click', saveAuthorOrder);
}

if (resetSortBtn) {
resetSortBtn.addEventListener('click', resetAuthorOrder);
}

// Setup drag and drop
setupDragAndDrop();
}

function showAuthorSortPanel() {
const sortPanel = document.getElementById('author-sort-panel');
const authorList = document.getElementById('author-list');

// Populate author list
populateAuthorList();

sortPanel.style.display = 'flex';
document.body.style.overflow = 'hidden';
}

function hideAuthorSortPanel() {
const sortPanel = document.getElementById('author-sort-panel');
sortPanel.style.display = 'none';
document.body.style.overflow = '';
}

function populateAuthorList() {
const authorList = document.getElementById('author-list');
authorList.innerHTML = '';

const currentOrder = [...authorOrder];

currentOrder.forEach((author, index) => {
const authorItem = document.createElement('div');
authorItem.className = 'author-item';
authorItem.draggable = true;
authorItem.dataset.author = author;
authorItem.dataset.index = index;

authorItem.innerHTML = `
<span class="author-name">${author}</span>
<i class="fas fa-grip-vertical drag-handle"></i>
`;

authorList.appendChild(authorItem);
});
}

function setupDragAndDrop() {
let draggedElement = null;
let draggedIndex = null;

document.addEventListener('dragstart', (e) => {
if (e.target.classList.contains('author-item')) {
draggedElement = e.target;
draggedIndex = parseInt(e.target.dataset.index);
e.target.classList.add('dragging');
e.dataTransfer.effectAllowed = 'move';
}
});

document.addEventListener('dragend', (e) => {
if (e.target.classList.contains('author-item')) {
e.target.classList.remove('dragging');
draggedElement = null;
draggedIndex = null;
}
});

document.addEventListener('dragover', (e) => {
e.preventDefault();
const authorList = document.getElementById('author-list');
if (authorList && authorList.contains(e.target)) {
e.dataTransfer.dropEffect = 'move';
}
});

document.addEventListener('drop', (e) => {
e.preventDefault();
const targetItem = e.target.closest('.author-item');
const authorList = document.getElementById('author-list');

if (targetItem && draggedElement && authorList.contains(targetItem)) {
const targetIndex = parseInt(targetItem.dataset.index);

if (draggedIndex !== targetIndex) {
    // Reorder the array
    const draggedAuthor = authorOrder[draggedIndex];
    authorOrder.splice(draggedIndex, 1);
    authorOrder.splice(targetIndex, 0, draggedAuthor);
    
    // Repopulate the list
    populateAuthorList();
}
}
});
}

function saveAuthorOrder() {
localStorage.setItem("authorOrder", JSON.stringify(authorOrder));
showNotification("Yazar sıralaması kaydedildi!", "success");
hideAuthorSortPanel();

// Refresh the current verse detail if open
const verseDetailPanel = document.getElementById('verse-detail-panel');
if (verseDetailPanel.classList.contains('active')) {
refreshOtherTranslations();
}
}

function resetAuthorOrder() {
authorOrder = [...originalAuthorOrder];
populateAuthorList();
showNotification("Sıralama sıfırlandı", "info");
}

function refreshOtherTranslations() {
// This function will be called to refresh the translations with new order
// Implementation depends on current verse data
const verseDetailPanel = document.getElementById('verse-detail-panel');
if (verseDetailPanel.classList.contains('active')) {
// Get current verse data and refresh
const title = document.getElementById('verse-detail-title').textContent;
const match = title.match(/(.+) - Ayet (\d+)/);
if (match) {
const sureName = match[1];
const verseId = parseInt(match[2]);
const surahIndex = quranData.findIndex(s => s.sure === sureName);
if (surahIndex !== -1) {
    const verseIndex = verseId - 1;
    const surahId = quranData[surahIndex].id;
    const ayet = quranData[surahIndex].ayetler[verseIndex];
    displayVerseDetail(sureName, ayet, verseIndex, surahId);
}
}
}
}

async function loadQuranData(author) {
const cacheKey = `quranData_${author}`;
const cachedData = localStorage.getItem(cacheKey);
const cacheExpiry = 86400000;

showLoading();

if (cachedData && checkStorageAvailability()) {
try {
const parsedCache = JSON.parse(cachedData);
const now = Date.now();

if (parsedCache.timestamp && (now - parsedCache.timestamp < cacheExpiry)) {
quranData = parsedCache.data;
displaySurahs(quranData);
dataLoaded = true;
hideLoading();

setTimeout(() => {
    checkUrlHash();
}, 100);
return;
}
} catch (e) {
console.warn("Önbellek verisi ayrıştırılamadı:", e);
}
}

try {
const response = await fetch("kuran_mealleri.json");
if (!response.ok) {
throw new Error(`JSON dosyası yüklenemedi: ${response.status}`);
}
jsonData = await response.json();

quranData = jsonData.surahs.map(surah => ({
sure: getSurahName(surah.id),
ayetler: surah.verses.map(verse => {
const translation = verse.translations.find(t => t.author === author);
return translation ? `${verse.verse_id}. ${translation.text}` : `${verse.verse_id}. Çeviri bulunamadı`;
}),
id: surah.id
}));

displaySurahs(quranData);
dataLoaded = true;

setTimeout(() => {
checkUrlHash();
}, 100);

if (checkStorageAvailability()) {
try {
localStorage.setItem(
    cacheKey,
    JSON.stringify({
        data: quranData,
        timestamp: Date.now()
    })
);
} catch (storageError) {
console.warn("localStorage'a yazma sırasında hata oluştu:", storageError);
try {
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('quranData_') && key !== cacheKey) {
            localStorage.removeItem(key);
        }
    }
    localStorage.setItem(
        cacheKey,
        JSON.stringify({
            data: quranData,
            timestamp: Date.now()
        })
    );
} catch (e) {
    console.warn("Önbellek temizleme başarısız:", e);
}
}
}
} catch (error) {
console.error("JSON yüklenirken hata:", error);
showNotification("Kuran mealleri yüklenirken bir hata oluştu: " + error.message, "error");
} finally {
hideLoading();
}
}

async function loadAllSurahsData() {
const cacheKey = 'allSurahsData';
const cachedData = localStorage.getItem(cacheKey);
const cacheExpiry = 604800000;

if (cachedData && checkStorageAvailability()) {
try {
const parsedCache = JSON.parse(cachedData);
const now = Date.now();

if (parsedCache.timestamp && (now - parsedCache.timestamp < cacheExpiry)) {
allSurahsData = parsedCache.data;
return allSurahsData;
}
} catch (e) {
console.warn("Önbellek verisi ayrıştırılamadı:", e);
}
}

try {
showLoading();
const response = await fetch("all_surahs_data.json");
if (!response.ok) {
throw new Error(`JSON dosyası yüklenemedi: ${response.status}`);
}

allSurahsData = await response.json();

if (checkStorageAvailability()) {
try {
localStorage.setItem(
    cacheKey,
    JSON.stringify({
        data: allSurahsData,
        timestamp: Date.now()
    })
);
} catch (storageError) {
console.warn("localStorage'a yazma sırasında hata oluştu:", storageError);
}
}

return allSurahsData;
} catch (error) {
console.error("all_surahs_data.json yüklenirken hata:", error);
showNotification("Detaylı veri yüklenemedi. Temel özellikler çalışmaya devam edecek.", "error");
return null;
} finally {
hideLoading();
}
}

function displaySurahs(data) {
const surahsDiv = document.getElementById("surahs");
surahsDiv.innerHTML = "";

if (data.length === 0) {
surahsDiv.innerHTML = "<p>Veri bulunamadı.</p>";
return;
}

const fragment = document.createDocumentFragment();
const batchSize = 20;
let currentIndex = 0;

function processBatch() {
const endIndex = Math.min(currentIndex + batchSize, data.length);

for (let i = currentIndex; i < endIndex; i++) {
const sure = data[i];
const surahDiv = document.createElement("div");
surahDiv.className = "surah";

const surahLink = document.createElement("a");
surahLink.href = `#${sure.id}`;
surahLink.className = "verse-link";
surahLink.innerHTML = `<h2>${sure.sure}</h2>`;

surahDiv.appendChild(surahLink);
surahDiv.dataset.index = i;
surahDiv.dataset.id = sure.id;

fragment.appendChild(surahDiv);
}

if (currentIndex === 0) {
surahsDiv.appendChild(fragment);
} else {
surahsDiv.appendChild(fragment.cloneNode(true));
}

currentIndex = endIndex;

if (currentIndex < data.length) {
requestAnimationFrame(processBatch);
}
}

processBatch();

surahsDiv.addEventListener("click", (e) => {
const surahDiv = e.target.closest('.surah');
if (surahDiv) {
const index = parseInt(surahDiv.dataset.index);
const sure = data[index];
displayVerses(sure.sure, sure.ayetler, sure.id);
surahsDiv.style.display = "none";
document.querySelector('.controls').style.display = "none";
document.getElementById("main-search-results").classList.remove("active");
}
});
}

function highlightText(text, searchTerm) {
if (!searchTerm) return text;
const regex = new RegExp(`(${searchTerm})`, "gi");
return text.replace(regex, '<span class="highlight">$1</span>');
}

function displayMainSearchResults(searchTerm) {
const resultsDiv = document.getElementById("main-search-results");
resultsDiv.innerHTML = "";

if (!searchTerm || searchTerm.length < 2) {
resultsDiv.classList.remove("active");
document.getElementById("surahs").style.display = "grid";
return;
}

const fragment = document.createDocumentFragment();
const numberMatch = searchTerm.match(/^(\d+)\s+(\d+)$/);
const surahVerseMatch = searchTerm.match(/^([a-zA-ZçÇğĞıİöÖşŞüÜ\s-]+)\s+(\d+)$/i);

if (numberMatch || surahVerseMatch) {
let surahId, verseId;

if (numberMatch) {
surahId = parseInt(numberMatch[1]);
verseId = parseInt(numberMatch[2]);
} else if (surahVerseMatch) {
const surahNameInput = surahVerseMatch[1].trim().toLowerCase();
verseId = parseInt(surahVerseMatch[2]);
surahId = Object.keys(surahNames).find(
(key) => surahNames[key].toLowerCase() === surahNameInput
);
}

if (surahId && verseId) {
const surahIndex = surahId - 1;
if (surahIndex >= 0 && surahIndex < quranData.length) {
const sure = quranData[surahIndex];
const ayet = sure.ayetler[verseId - 1];
if (ayet) {
    const verseElement = document.createElement("div");
    verseElement.className = "verse-result";
    
    const verseLink = document.createElement("a");
    verseLink.href = `#${surahId}-${verseId}`;
    verseLink.className = "verse-link";
    verseLink.textContent = `${sure.sure}: ${ayet}`;
    
    verseElement.appendChild(verseLink);
    verseElement.dataset.surah = sure.sure;
    verseElement.dataset.verseIndex = verseId - 1;
    verseElement.dataset.surahId = surahId;
    fragment.appendChild(verseElement);
    resultsDiv.appendChild(fragment);
    resultsDiv.classList.add("active");
    document.getElementById("surahs").style.display = "none";
    return;
} else {
    resultsDiv.innerHTML = "<p>Belirtilen ayet bulunamadı.</p>";
    resultsDiv.classList.add("active");
    document.getElementById("surahs").style.display = "none";
    return;
}
} else {
resultsDiv.innerHTML = "<p>Belirtilen sure bulunamadı.</p>";
resultsDiv.classList.add("active");
document.getElementById("surahs").style.display = "none";
return;
}
}
}

let resultCount = 0;

quranData.forEach((sure, surahIndex) => {
if (sure.sure.toLowerCase().includes(searchTerm.toLowerCase())) {
const surahElement = document.createElement("div");
surahElement.className = "verse-result";

const surahLink = document.createElement("a");
surahLink.href = `#${sure.id}`;
surahLink.className = "verse-link";
surahLink.innerHTML = `<h2>${highlightText(sure.sure, searchTerm)}</h2>`;

surahElement.appendChild(surahLink);
surahElement.dataset.index = surahIndex;
fragment.appendChild(surahElement);
resultCount++;
}

sure.ayetler.forEach((ayet, verseIndex) => {
if (ayet.toLowerCase().includes(searchTerm.toLowerCase())) {
const verseElement = document.createElement("div");
verseElement.className = "verse-result";

const verseLink = document.createElement("a");
verseLink.href = `#${sure.id}-${verseIndex + 1}`;
verseLink.className = "verse-link";
verseLink.innerHTML = `${sure.sure}: ${highlightText(ayet, searchTerm)}`;

verseElement.appendChild(verseLink);
verseElement.dataset.surah = sure.sure;
verseElement.dataset.verseIndex = verseIndex;
verseElement.dataset.surahId = sure.id;
fragment.appendChild(verseElement);
resultCount++;
}
});
});

if (resultCount === 0) {
resultsDiv.innerHTML = "<p>Sonuç bulunamadı.</p>";
} else {
resultsDiv.appendChild(fragment);
}

resultsDiv.classList.add("active");
document.getElementById("surahs").style.display = "none";

resultsDiv.addEventListener("click", (e) => {
const verseResult = e.target.closest('.verse-result');
if (verseResult) {
if (verseResult.dataset.index) {
const index = parseInt(verseResult.dataset.index);
const sure = quranData[index];
displayVerses(sure.sure, sure.ayetler, sure.id);
resultsDiv.classList.remove("active");
document.getElementById("surahs").style.display = "none";
document.querySelector('.controls').style.display = "none";
} else {
const surah = verseResult.dataset.surah;
const verseIndex = parseInt(verseResult.dataset.verseIndex);
const surahId = parseInt(verseResult.dataset.surahId);
const surahIndex = quranData.findIndex(s => s.sure === surah);
const ayet = quranData[surahIndex].ayetler[verseIndex];
displayVerseDetail(surah, ayet, verseIndex, surahId);
resultsDiv.classList.remove("active");
document.querySelector('.controls').style.display = "none";
}
}
});
}

function displaySearchResults(searchTerm, container = "#search-results") {
const resultsDiv = document.querySelector(container);
resultsDiv.innerHTML = "";
const fragment = document.createDocumentFragment();

const numberMatch = searchTerm.match(/^(\d+)\s+(\d+)$/);
const surahVerseMatch = searchTerm.match(/^([a-zA-ZçÇğĞıİöÖşŞüÜ\s-]+)\s+(\d+)$/i);

if (numberMatch || surahVerseMatch) {
let surahId, verseId;

if (numberMatch) {
surahId = parseInt(numberMatch[1]);
verseId = parseInt(numberMatch[2]);
} else if (surahVerseMatch) {
const surahNameInput = surahVerseMatch[1].trim().toLowerCase();
verseId = parseInt(surahVerseMatch[2]);
surahId = Object.keys(surahNames).find(
(key) => surahNames[key].toLowerCase() === surahNameInput
);
}

if (surahId && verseId) {
const surahIndex = surahId - 1;
if (surahIndex >= 0 && surahIndex < quranData.length) {
const sure = quranData[surahIndex];
const ayet = sure.ayetler[verseId - 1];
if (ayet) {
    const verseElement = document.createElement("div");
    verseElement.className = "verse-result";
    
    const verseLink = document.createElement("a");
    verseLink.href = `#${surahId}-${verseId}`;
    verseLink.className = "verse-link";
    verseLink.textContent = `${sure.sure}: ${ayet}`;
    
    verseElement.appendChild(verseLink);
    verseElement.dataset.surah = sure.sure;
    verseElement.dataset.verseIndex = verseId - 1;
    verseElement.dataset.surahId = surahId;
    fragment.appendChild(verseElement);
    resultsDiv.appendChild(fragment);
    return;
} else {
    resultsDiv.innerHTML = "<p>Belirtilen ayet bulunamadı.</p>";
    return;
}
} else {
resultsDiv.innerHTML = "<p>Belirtilen sure bulunamadı.</p>";
return;
}
}
}

let resultCount = 0;

quranData.forEach((sure, surahIndex) => {
if (sure.sure.toLowerCase().includes(searchTerm.toLowerCase())) {
const surahElement = document.createElement("div");
surahElement.className = "verse-result";

const surahLink = document.createElement("a");
surahLink.href = `#${sure.id}`;
surahLink.className = "verse-link";
surahLink.innerHTML = `<h2>${highlightText(sure.sure, searchTerm)}</h2>`;

surahElement.appendChild(surahLink);
surahElement.dataset.index = surahIndex;
fragment.appendChild(surahElement);
resultCount++;
}

sure.ayetler.forEach((ayet, verseIndex) => {
if (ayet.toLowerCase().includes(searchTerm.toLowerCase())) {
const verseElement = document.createElement("div");
verseElement.className = "verse-result";

const verseLink = document.createElement("a");
verseLink.href = `#${sure.id}-${verseIndex + 1}`;
verseLink.className = "verse-link";
verseLink.innerHTML = `${sure.sure}: ${highlightText(ayet, searchTerm)}`;

verseElement.appendChild(verseLink);
verseElement.dataset.surah = sure.sure;
verseElement.dataset.verseIndex = verseIndex;
verseElement.dataset.surahId = sure.id;
fragment.appendChild(verseElement);
resultCount++;
}
});
});

if (resultCount === 0) {
resultsDiv.innerHTML = "<p>Sonuç bulunamadı.</p>";
} else {
resultsDiv.appendChild(fragment);
}

resultsDiv.addEventListener("click", (e) => {
const verseResult = e.target.closest('.verse-result');
if (verseResult) {
if (verseResult.dataset.index) {
const index = parseInt(verseResult.dataset.index);
const sure = quranData[index];
displayVerses(sure.sure, sure.ayetler, sure.id);
document.getElementById("search-page").classList.remove("active");
document.getElementById("surahs").style.display = "none";
document.querySelector('.controls').style.display = "none";
} else {
const surah = verseResult.dataset.surah;
const verseIndex = parseInt(verseResult.dataset.verseIndex);
const surahId = parseInt(verseResult.dataset.surahId);
const surahIndex = quranData.findIndex(s => s.sure === surah);
const ayet = quranData[surahIndex].ayetler[verseIndex];
displayVerseDetail(surah, ayet, verseIndex, surahId);
document.getElementById("search-page").classList.remove("active");
document.querySelector('.controls').style.display = "none";
}
}
});
}

function formatVerseNumber(verseText, surahId, verseId) {
const verseMatch = verseText.match(/^(\d+\.)\s(.+)$/);

if (verseMatch) {
const verseNumber = verseMatch[1].replace('.', '');
const verseContent = verseMatch[2];

const verseLink = `<a href="#${surahId}-${verseNumber}" class="verse-link">${verseNumber}</a>`;

switch(verseNumberStyle) {
case 'bg':
return `<span class="verse-number-bg">${verseLink}</span> ${verseContent}`;
case 'bold':
return `<span style="color: var(--highlight-dark); font-weight: bold; margin-right: 5px;">${verseLink}.</span> ${verseContent}`;
case 'underline':
return `<span style="color: var(--highlight-dark); font-weight: bold; border-bottom: 2px solid var(--highlight-dark); padding-bottom: 2px; margin-right: 5px;">${verseLink}.</span> ${verseContent}`;
default:
return `${verseLink}. ${verseContent}`;
}
}

return verseText;
}

function displayVerses(sureName, ayetler, surahId) {
const panel = document.getElementById("verse-panel");
const panelTitle = document.getElementById("panel-title");
const versesDiv = document.getElementById("verses");
const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

window.location.hash = `${surahId}`;
currentSurahId = surahId;
currentVerseId = 0;

panelTitle.textContent = sureName;
versesDiv.innerHTML = "";

const sortedAyetler = [...ayetler].sort((a, b) => {
const aNumMatch = a.match(/^(\d+)\./);
const bNumMatch = b.match(/^(\d+)\./);

if (!aNumMatch || !bNumMatch) return 0;

const aNum = parseInt(aNumMatch[1]);
const bNum = parseInt(bNumMatch[1]);

return aNum - bNum;
});

const fragment = document.createDocumentFragment();
const batchSize = 30;
let currentIndex = 0;

function processBatch() {
const endIndex = Math.min(currentIndex + batchSize, sortedAyetler.length);

for (let i = currentIndex; i < endIndex; i++) {
const ayet = sortedAyetler[i];
const isFavorite = favorites.some((f) => f.surah === sureName && f.verse === ayet);
const verseElement = document.createElement("p");
verseElement.className = "verse";
verseElement.dataset.verse = ayet;
verseElement.dataset.surah = sureName;
verseElement.dataset.index = i;
verseElement.dataset.surahId = surahId;

const verseNumber = ayet.match(/^(\d+)\./);
const verseId = verseNumber ? verseNumber[1] : (i + 1);

const formattedVerse = formatVerseNumber(ayet, surahId, verseId);

verseElement.innerHTML = `
<span>${formattedVerse}</span>
<span class="verse-actions">
    <button class="favorite-btn ${isFavorite ? "active" : ""}" data-verse="${ayet}" data-surah="${sureName}"><i class="fas fa-star"></i></button>
    <button class="share-btn" data-verse="${ayet}" data-surah="${sureName}" data-surah-id="${surahId}" data-verse-id="${verseId}"><i class="fas fa-share-alt"></i></button>
    <button class="copy-url-btn" data-surah-id="${surahId}" data-verse-id="${verseId}" title="URL'yi kopyala"><i class="fas fa-link"></i></button>
</span>
`;

fragment.appendChild(verseElement);
}

if (currentIndex === 0) {
versesDiv.appendChild(fragment);
} else {
versesDiv.appendChild(fragment.cloneNode(true));
}

currentIndex = endIndex;

if (currentIndex < sortedAyetler.length) {
requestAnimationFrame(processBatch);
}
}

processBatch();

panel.classList.add("active");

versesDiv.addEventListener("click", (e) => {
const favoriteBtn = e.target.closest('.favorite-btn');
const shareBtn = e.target.closest('.share-btn');
const copyUrlBtn = e.target.closest('.copy-url-btn');
const verse = e.target.closest('.verse');

if (favoriteBtn) {
e.stopPropagation();
const verse = favoriteBtn.dataset.verse;
const surah = favoriteBtn.dataset.surah;
toggleFavorite(surah, verse, favoriteBtn);
} else if (shareBtn) {
e.stopPropagation();
const verse = shareBtn.dataset.verse;
const surah = shareBtn.dataset.surah;
const surahId = shareBtn.dataset.surahId;
const verseId = shareBtn.dataset.verseId;
shareVerse(surah, verse, surahId, verseId);
} else if (copyUrlBtn) {
e.stopPropagation();
const surahId = copyUrlBtn.dataset.surahId;
const verseId = copyUrlBtn.dataset.verseId;
copyVerseUrl(surahId, verseId);
} else if (verse && !e.target.closest('button') && !e.target.closest('a')) {
// Mobile: only handle click if not scrolling and not on mobile or if actions are not visible
if (window.innerWidth > 768 || (!isScrolling && !verse.classList.contains('scroll-disabled') && !verse.querySelector('.verse-actions.show'))) {
e.stopPropagation();
const index = parseInt(verse.dataset.index);
const surahId = parseInt(verse.dataset.surahId);
displayVerseDetail(sureName, sortedAyetler[index], index, surahId);
}
}
});

// Setup mobile scroll detection for this verses container
setupMobileScrollDetection();
}

async function displayVerseDetail(sureName, selectedVerse, verseIndex, surahId) {
const panel = document.getElementById("verse-detail-panel");
const title = document.getElementById("verse-detail-title");
const selectedTranslation = document.getElementById("selected-translation");
const otherTranslations = document.getElementById("other-translations");
const otherTranslationsMobile = document.getElementById("other-translations-mobile");
const surahIndex = jsonData.surahs.findIndex(s => getSurahName(s.id) === sureName);
const verseData = jsonData.surahs[surahIndex].verses[verseIndex];
const allTranslations = verseData.translations;

// Store current navigation state
currentSurahIndex = surahIndex;
currentVerseIndex = verseIndex;

// Set flag for swipe detection
isInVerseDetailPanel = true;

window.location.hash = `${surahId}-${verseData.verse_id}`;
currentSurahId = surahId;
currentVerseId = verseData.verse_id;

title.textContent = `${sureName} - Ayet ${verseData.verse_id}`;

const verseContent = selectedVerse.replace(/^\d+\.\s+/, '');
selectedTranslation.innerHTML = verseContent;

// Sort translations according to saved author order
const sortedTranslations = allTranslations
.filter(t => t.author !== selectedAuthor)
.sort((a, b) => {
const aIndex = authorOrder.indexOf(a.author);
const bIndex = authorOrder.indexOf(b.author);

// If author not in order, put at end
if (aIndex === -1 && bIndex === -1) return 0;
if (aIndex === -1) return 1;
if (bIndex === -1) return -1;

return aIndex - bIndex;
});

otherTranslations.innerHTML = "";
if (otherTranslationsMobile) {
otherTranslationsMobile.innerHTML = "";
}

sortedTranslations.forEach((t, index) => {
const textWithoutNumber = t.text.replace(/^\d+\.\s+/, '');

const translationItem = document.createElement("div");
translationItem.className = "translation-item";

const floatingLabel = document.createElement("div");
floatingLabel.className = "floating-label";
floatingLabel.textContent = t.author;

const translationText = document.createElement("div");
translationText.className = "translation-text";
translationText.textContent = textWithoutNumber;

translationItem.appendChild(floatingLabel);
translationItem.appendChild(translationText);
otherTranslations.appendChild(translationItem);

if (otherTranslationsMobile) {
const mobileTranslationItem = translationItem.cloneNode(true);
otherTranslationsMobile.appendChild(mobileTranslationItem);
}
});

if (allSurahsData) {
try {
const detailedSurah = allSurahsData.surahs.find(s => s.id === surahId);
if (detailedSurah) {
const detailedVerse = detailedSurah.verses.find(v => v.verse_number === verseData.verse_id);
if (detailedVerse) {
    document.getElementById("arabic-text").textContent = detailedVerse.text;
    document.getElementById("transcription-tr").textContent = detailedVerse.transcription_tr;
    
    if (showWordAnalysis && detailedVerse.words) {
        const wordList = document.getElementById("word-list");
        const wordListMobile = document.getElementById("word-list-mobile");
        
        wordList.innerHTML = "";
        if (wordListMobile) {
            wordListMobile.innerHTML = "";
        }
        
                detailedVerse.words.forEach((word, wordIndex) => {
            const wordItem = document.createElement("div");
            wordItem.className = "word-item";
            wordItem.dataset.wordIndex = wordIndex;
            
            wordItem.innerHTML = `
                <div class="word-arabic">${word.text}</div>
                <div class="word-translation">${word.translation}</div>
            `;
            
            wordList.appendChild(wordItem);
            
            if (wordListMobile) {
                const mobileWordItem = wordItem.cloneNode(true);
                wordListMobile.appendChild(mobileWordItem);
            }
        });
        
        // Word click handlers
        [wordList, wordListMobile].forEach(container => {
            if (container) {
                container.addEventListener("click", (e) => {
                    const wordItem = e.target.closest('.word-item');
                    if (wordItem) {
                        const wordIndex = parseInt(wordItem.dataset.wordIndex);
                        const word = detailedVerse.words[wordIndex];
                        displayWordDetail(word, wordIndex, detailedVerse.verse_number, surahId);
                    }
                });
            }
        });
    } else {
        // Hide word analysis if no detailed data
        document.getElementById("word-list").innerHTML = "<p>Kelime analizi mevcut değil.</p>";
        if (document.getElementById("word-list-mobile")) {
            document.getElementById("word-list-mobile").innerHTML = "<p>Kelime analizi mevcut değil.</p>";
        }
    }
} else {
    // Hide word analysis if no detailed data
    document.getElementById("word-list").innerHTML = "<p>Kelime analizi mevcut değil.</p>";
    if (document.getElementById("word-list-mobile")) {
        document.getElementById("word-list-mobile").innerHTML = "<p>Kelime analizi mevcut değil.</p>";
    }
}
} catch (error) {
console.error("Detaylı veri işlenirken hata:", error);
}
} else {
// Load detailed data if not available
await loadAllSurahsData();
if (allSurahsData) {
displayVerseDetail(sureName, selectedVerse, verseIndex, surahId);
return;
}
}

// Hide verse panel and show verse detail panel
document.getElementById("verse-panel").classList.remove("active");
panel.classList.add("active");

// Setup navigation buttons
setupVerseNavigation(sureName, surahId);

// Setup touch/swipe for mobile navigation
setupTouchNavigation();
}

function displayWordDetail(word, wordIndex, verseNumber, surahId) {
const wordDetail = document.getElementById("word-detail");
const wordDetailMobile = document.getElementById("word-detail-mobile");

const detailContent = `
<h5>Kelime Detayı: ${word.text}</h5>
<div class="word-detail-row">
    <span class="word-detail-label">Çeviri:</span>
    <span class="word-detail-value">${word.translation}</span>
</div>
<div class="word-detail-row">
    <span class="word-detail-label">Kök:</span>
    <span class="word-detail-value">${word.root || 'Belirtilmemiş'}</span>
</div>
<div class="word-detail-row">
    <span class="word-detail-label">Türü:</span>
    <span class="word-detail-value">${word.pos || 'Belirtilmemiş'}</span>
</div>
${word.lemma ? `
<div class="word-detail-row">
    <span class="word-detail-label">Lemma:</span>
    <span class="word-detail-value">${word.lemma}</span>
</div>
` : ''}
${word.features ? `
<div class="word-detail-row">
    <span class="word-detail-label">Özellikler:</span>
    <span class="word-detail-value">${word.features}</span>
</div>
` : ''}
`;

[wordDetail, wordDetailMobile].forEach(container => {
if (container) {
container.innerHTML = detailContent;
container.classList.add("active");
}
});

// Load other occurrences of this word
loadWordOccurrences(word.root || word.text, wordDetail, wordDetailMobile);
}

async function loadWordOccurrences(searchWord, container1, container2) {
if (!allSurahsData || !searchWord) return;

const occurrencesDiv1 = document.createElement("div");
occurrencesDiv1.className = "other-occurrences";
occurrencesDiv1.innerHTML = `
<h5 class="occurrences-title">Bu kelimenin geçtiği diğer ayetler:</h5>
<div class="word-occurrences">
    <div class="loading-occurrences">Yükleniyor...</div>
</div>
`;

const occurrencesDiv2 = occurrencesDiv1.cloneNode(true);

[container1, container2].forEach((container, index) => {
if (container) {
const occurrencesDiv = index === 0 ? occurrencesDiv1 : occurrencesDiv2;
container.appendChild(occurrencesDiv);
}
});

try {
const occurrences = [];
let foundCount = 0;
const maxResults = 10;

for (const surah of allSurahsData.surahs) {
if (foundCount >= maxResults) break;

for (const verse of surah.verses) {
if (foundCount >= maxResults) break;

if (verse.words && verse.words.some(w => 
    (w.root && w.root.includes(searchWord)) || 
    w.text.includes(searchWord) ||
    (w.lemma && w.lemma.includes(searchWord))
)) {
    occurrences.push({
        surahId: surah.id,
        surahName: getSurahName(surah.id),
        verseNumber: verse.verse_number,
        text: verse.translations?.[0]?.text || 'Çeviri bulunamadı'
    });
    foundCount++;
}
}
}

[occurrencesDiv1, occurrencesDiv2].forEach(occurrencesDiv => {
const wordOccurrences = occurrencesDiv.querySelector('.word-occurrences');
if (wordOccurrences) {
if (occurrences.length === 0) {
    wordOccurrences.innerHTML = '<div class="no-occurrences">Bu kelime için başka ayet bulunamadı.</div>';
} else {
    wordOccurrences.innerHTML = '';
    
    occurrences.forEach(occ => {
        const occItem = document.createElement("div");
        occItem.className = "occurrence-item";
        
        const occLink = document.createElement("a");
        occLink.href = `#${occ.surahId}-${occ.verseNumber}`;
        occLink.className = "occurrence-link";
        occLink.textContent = `${occ.surahName} ${occ.verseNumber}: ${occ.text.substring(0, 100)}...`;
        
        occItem.appendChild(occLink);
        wordOccurrences.appendChild(occItem);
    });
    
    if (foundCount >= maxResults) {
        const moreDiv = document.createElement("div");
        moreDiv.className = "more-occurrences";
        moreDiv.textContent = "Daha fazla sonuç mevcut...";
        wordOccurrences.appendChild(moreDiv);
    }
}
}
});

} catch (error) {
console.error("Kelime geçişleri yüklenirken hata:", error);
[occurrencesDiv1, occurrencesDiv2].forEach(occurrencesDiv => {
const wordOccurrences = occurrencesDiv.querySelector('.word-occurrences');
if (wordOccurrences) {
wordOccurrences.innerHTML = '<div class="no-occurrences">Kelime geçişleri yüklenirken hata oluştu.</div>';
}
});
}
}

function setupVerseNavigation(sureName, surahId) {
const prevBtn = document.getElementById("prev-verse-btn");
const nextBtn = document.getElementById("next-verse-btn");

if (prevBtn) {
prevBtn.onclick = () => navigateVerse(-1, sureName, surahId);
}

if (nextBtn) {
nextBtn.onclick = () => navigateVerse(1, sureName, surahId);
}

// Update button states
updateNavigationButtons(sureName, surahId);
}

function updateNavigationButtons(sureName, surahId) {
const prevBtn = document.getElementById("prev-verse-btn");
const nextBtn = document.getElementById("next-verse-btn");

if (!prevBtn || !nextBtn) return;

const surahIndex = jsonData.surahs.findIndex(s => getSurahName(s.id) === sureName);
const currentSurah = jsonData.surahs[surahIndex];

// Check if we can go to previous verse
const canGoPrev = currentVerseIndex > 0 || surahIndex > 0;
prevBtn.disabled = !canGoPrev;
prevBtn.style.opacity = canGoPrev ? "1" : "0.5";

// Check if we can go to next verse
const canGoNext = currentVerseIndex < currentSurah.verses.length - 1 || surahIndex < jsonData.surahs.length - 1;
nextBtn.disabled = !canGoNext;
nextBtn.style.opacity = canGoNext ? "1" : "0.5";
}

function navigateVerse(direction, sureName, surahId) {
let newSurahIndex = currentSurahIndex;
let newVerseIndex = currentVerseIndex + direction;

// Handle verse boundaries
if (newVerseIndex < 0) {
// Go to previous surah's last verse
newSurahIndex--;
if (newSurahIndex >= 0) {
newVerseIndex = jsonData.surahs[newSurahIndex].verses.length - 1;
} else {
return; // Can't go further back
}
} else if (newVerseIndex >= jsonData.surahs[currentSurahIndex].verses.length) {
// Go to next surah's first verse
newSurahIndex++;
if (newSurahIndex < jsonData.surahs.length) {
newVerseIndex = 0;
} else {
return; // Can't go further forward
}
}

// Get new surah and verse data
const newSurah = jsonData.surahs[newSurahIndex];
const newSurahName = getSurahName(newSurah.id);
const newVerse = newSurah.verses[newVerseIndex];

// Find the corresponding verse text in quranData
const quranSurahIndex = quranData.findIndex(s => s.sure === newSurahName);
if (quranSurahIndex !== -1) {
const verseText = quranData[quranSurahIndex].ayetler[newVerseIndex];
displayVerseDetail(newSurahName, verseText, newVerseIndex, newSurah.id);
}
}

// Touch/Swipe functionality for mobile navigation - SADECE AYET PANELİ İÇİN
function setupTouchNavigation() {
const verseDetailPanel = document.getElementById("verse-detail-panel");

if (verseDetailPanel && window.innerWidth <= 768) {
verseDetailPanel.addEventListener('touchstart', handleTouchStart, { passive: true });
verseDetailPanel.addEventListener('touchmove', handleTouchMove, { passive: true });
verseDetailPanel.addEventListener('touchend', handleTouchEnd, { passive: true });
}
}

function handleTouchStart(e) {
if (!isInVerseDetailPanel || window.innerWidth > 768) return;

touchStartX = e.touches[0].clientX;
touchStartY = e.touches[0].clientY;
isSwipeDetected = false;
}

function handleTouchMove(e) {
if (!isInVerseDetailPanel || window.innerWidth > 768) return;

touchEndX = e.touches[0].clientX;
touchEndY = e.touches[0].clientY;

const deltaX = Math.abs(touchEndX - touchStartX);
const deltaY = Math.abs(touchEndY - touchStartY);

// Only detect horizontal swipes (deltaX > deltaY)
if (deltaX > 50 && deltaX > deltaY) {
isSwipeDetected = true;

// Show swipe indicator
const direction = touchEndX > touchStartX ? 'left' : 'right';
showSwipeIndicator(direction);
}
}

function handleTouchEnd(e) {
if (!isInVerseDetailPanel || window.innerWidth > 768) return;

hideSwipeIndicator();

if (isSwipeDetected) {
const deltaX = touchEndX - touchStartX;
const deltaY = Math.abs(touchEndY - touchStartY);

// Minimum swipe distance and ensure it's more horizontal than vertical
if (Math.abs(deltaX) > 100 && Math.abs(deltaX) > deltaY) {
const verseDetailPanel = document.getElementById("verse-detail-panel");
if (verseDetailPanel.classList.contains('active')) {
    const title = document.getElementById('verse-detail-title').textContent;
    const match = title.match(/(.+) - Ayet (\d+)/);
    if (match) {
        const sureName = match[1];
        const surahId = jsonData.surahs.find(s => getSurahName(s.id) === sureName)?.id;
        
        if (deltaX > 0) {
            // Swipe right - previous verse
            navigateVerse(-1, sureName, surahId);
        } else {
            // Swipe left - next verse
            navigateVerse(1, sureName, surahId);
        }
    }
}
}
}

// Reset values
touchStartX = 0;
touchStartY = 0;
touchEndX = 0;
touchEndY = 0;
isSwipeDetected = false;
}

function showSwipeIndicator(direction) {
const indicator = document.getElementById(`swipe-${direction}`);
if (indicator) {
indicator.classList.add('show');
}
}

function hideSwipeIndicator() {
document.querySelectorAll('.swipe-indicator').forEach(indicator => {
indicator.classList.remove('show');
});
}

function toggleFavorite(surah, verse, button) {
let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
const existingIndex = favorites.findIndex((f) => f.surah === surah && f.verse === verse);

if (existingIndex > -1) {
favorites.splice(existingIndex, 1);
button.classList.remove("active");
showNotification("Favorilerden çıkarıldı", "info");
} else {
favorites.push({ surah, verse, timestamp: Date.now() });
button.classList.add("active");
showNotification("Favorilere eklendi", "success");
}

localStorage.setItem("favorites", JSON.stringify(favorites));
updateFavoritesCount();
}

function shareVerse(surah, verse, surahId, verseId) {
const url = `${window.location.origin}${window.location.pathname}#${surahId}-${verseId}`;
const text = `${surah} - Ayet ${verseId}: ${verse}\n\n${url}`;

if (navigator.share) {
navigator.share({
title: `${surah} - Ayet ${verseId}`,
text: verse,
url: url
}).catch(err => console.log('Paylaşım hatası:', err));
} else if (navigator.clipboard) {
navigator.clipboard.writeText(text).then(() => {
showNotification("Ayet panoya kopyalandı", "success");
}).catch(err => {
console.error('Panoya kopyalama hatası:', err);
showNotification("Kopyalama başarısız", "error");
});
} else {
// Fallback for older browsers
const textArea = document.createElement("textarea");
textArea.value = text;
document.body.appendChild(textArea);
textArea.select();
try {
document.execCommand('copy');
showNotification("Ayet panoya kopyalandı", "success");
} catch (err) {
showNotification("Kopyalama başarısız", "error");
}
document.body.removeChild(textArea);
}
}

function copyVerseUrl(surahId, verseId) {
const url = `${window.location.origin}${window.location.pathname}#${surahId}-${verseId}`;

if (navigator.clipboard) {
navigator.clipboard.writeText(url).then(() => {
showNotification("Ayet URL'si kopyalandı", "success");
}).catch(err => {
console.error('URL kopyalama hatası:', err);
showNotification("URL kopyalama başarısız", "error");
});
} else {
// Fallback for older browsers
const textArea = document.createElement("textarea");
textArea.value = url;
document.body.appendChild(textArea);
textArea.select();
try {
document.execCommand('copy');
showNotification("Ayet URL'si kopyalandı", "success");
} catch (err) {
showNotification("URL kopyalama başarısız", "error");
}
document.body.removeChild(textArea);
}
}

function updateFavoritesCount() {
const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");
const countElement = document.getElementById("favorites-count");
if (countElement) {
countElement.textContent = `${favorites.length} favori ayet`;
}
}

function displayFavorites() {
const favoritesDiv = document.getElementById("favorites");
const favoritesList = document.getElementById("favorites-list");

allFavorites = JSON.parse(localStorage.getItem("favorites") || "[]");
filteredFavorites = [...allFavorites];

updateFavoritesCount();

if (filteredFavorites.length === 0) {
favoritesList.innerHTML = `
<div class="favorites-empty">
    <i class="fas fa-star"></i>
    <h3>Henüz favori ayet yok</h3>
    <p>Beğendiğiniz ayetleri favorilere ekleyerek buradan kolayca erişebilirsiniz.</p>
</div>
`;
} else {
favoritesList.innerHTML = "";
const fragment = document.createDocumentFragment();

// Sort favorites by timestamp (newest first)
filteredFavorites.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

filteredFavorites.forEach((favorite, index) => {
const verseElement = document.createElement("div");
verseElement.className = "verse";
verseElement.dataset.verse = favorite.verse;
verseElement.dataset.surah = favorite.surah;
verseElement.dataset.index = index;

// Extract verse number and surah ID for URL
const verseMatch = favorite.verse.match(/^(\d+)\./);
const verseNumber = verseMatch ? verseMatch[1] : "1";
const surahId = Object.keys(surahNames).find(key => surahNames[key] === favorite.surah) || "1";

verseElement.innerHTML = `
<span>${favorite.verse}</span>
<span class="verse-actions">
    <button class="favorite-btn active" data-verse="${favorite.verse}" data-surah="${favorite.surah}">
        <i class="fas fa-trash"></i>
    </button>
    <button class="copy-url-btn" data-surah-id="${surahId}" data-verse-id="${verseNumber}" title="URL'yi kopyala">
        <i class="fas fa-link"></i>
    </button>
</span>
`;

fragment.appendChild(verseElement);
});

favoritesList.appendChild(fragment);
}

// Show favorites section
document.getElementById("surahs").style.display = "none";
document.getElementById("verse-panel").classList.remove("active");
document.getElementById("verse-detail-panel").classList.remove("active");
document.getElementById("main-search-results").classList.remove("active");
document.getElementById("podcasts").style.display = "none";
document.getElementById("settings").style.display = "none";
document.querySelector('.controls').style.display = "none";
favoritesDiv.style.display = "block";

// Set flag for navigation
isInVerseDetailPanel = false;

favoritesList.addEventListener("click", (e) => {
const favoriteBtn = e.target.closest('.favorite-btn');
const copyUrlBtn = e.target.closest('.copy-url-btn');
const verse = e.target.closest('.verse');

if (favoriteBtn) {
e.stopPropagation();
const verseText = favoriteBtn.dataset.verse;
const surah = favoriteBtn.dataset.surah;
toggleFavorite(surah, verseText, favoriteBtn);
// Refresh favorites display
setTimeout(() => displayFavorites(), 100);
} else if (copyUrlBtn) {
e.stopPropagation();
const surahId = copyUrlBtn.dataset.surahId;
const verseId = copyUrlBtn.dataset.verseId;
copyVerseUrl(surahId, verseId);
} else if (verse && !e.target.closest('button')) {
e.stopPropagation();
const surah = verse.dataset.surah;
const verseText = verse.dataset.verse;
const index = parseInt(verse.dataset.index);

// Find the verse in the original data
const surahIndex = quranData.findIndex(s => s.sure === surah);
if (surahIndex !== -1) {
const verseIndex = quranData[surahIndex].ayetler.findIndex(a => a === verseText);
if (verseIndex !== -1) {
    const surahId = quranData[surahIndex].id;
    displayVerseDetail(surah, verseText, verseIndex, surahId);
    favoritesDiv.style.display = "none";
}
}
}
});
}

function filterFavorites(searchTerm) {
if (!searchTerm) {
filteredFavorites = [...allFavorites];
} else {
filteredFavorites = allFavorites.filter(favorite => 
favorite.verse.toLowerCase().includes(searchTerm.toLowerCase()) ||
favorite.surah.toLowerCase().includes(searchTerm.toLowerCase())
);
}

// Re-render favorites list
const favoritesList = document.getElementById("favorites-list");
if (filteredFavorites.length === 0) {
favoritesList.innerHTML = `
<div class="favorites-empty">
    <i class="fas fa-search"></i>
    <h3>Arama sonucu bulunamadı</h3>
    <p>Farklı kelimeler deneyerek arama yapabilirsiniz.</p>
</div>
`;
} else {
favoritesList.innerHTML = "";
const fragment = document.createDocumentFragment();

filteredFavorites.forEach((favorite, index) => {
const verseElement = document.createElement("div");
verseElement.className = "verse";
verseElement.dataset.verse = favorite.verse;
verseElement.dataset.surah = favorite.surah;
verseElement.dataset.index = index;

const verseMatch = favorite.verse.match(/^(\d+)\./);
const verseNumber = verseMatch ? verseMatch[1] : "1";
const surahId = Object.keys(surahNames).find(key => surahNames[key] === favorite.surah) || "1";

verseElement.innerHTML = `
<span>${favorite.verse}</span>
<span class="verse-actions">
    <button class="favorite-btn active" data-verse="${favorite.verse}" data-surah="${favorite.surah}">
        <i class="fas fa-trash"></i>
    </button>
    <button class="copy-url-btn" data-surah-id="${surahId}" data-verse-id="${verseNumber}" title="URL'yi kopyala">
        <i class="fas fa-link"></i>
    </button>
</span>
`;

fragment.appendChild(verseElement);
});

favoritesList.appendChild(fragment);
}
}

function exportFavorites() {
const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

if (favorites.length === 0) {
showNotification("Dışa aktarılacak favori ayet bulunamadı", "info");
return;
}

let exportText = "FAVORİ AYETLER\n";
exportText += "================\n\n";

favorites.forEach((favorite, index) => {
exportText += `${index + 1}. ${favorite.surah}\n`;
exportText += `${favorite.verse}\n\n`;
});

exportText += `\nToplam ${favorites.length} ayet\n`;
exportText += `Dışa aktarma tarihi: ${new Date().toLocaleDateString('tr-TR')}\n`;
exportText += "SADECE KURAN - sadecekuran.com";

// Create and download file
const blob = new Blob([exportText], { type: 'text/plain;charset=utf-8' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = `favori-ayetler-${new Date().toISOString().split('T')[0]}.txt`;
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);

showNotification("Favori ayetler başarıyla dışa aktarıldı", "success");
}

function clearAllFavorites() {
const favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

if (favorites.length === 0) {
showNotification("Temizlenecek favori ayet bulunamadı", "info");
return;
}

if (confirm(`${favorites.length} favori ayeti silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.`)) {
localStorage.removeItem("favorites");
showNotification("Tüm favori ayetler temizlendi", "success");
displayFavorites(); // Refresh the display
}
}

function showHome() {
// Reset navigation state
isInVerseDetailPanel = false;
currentSurahId = 0;
currentVerseId = 0;

// Clear URL hash
window.location.hash = "";

// Hide all panels
document.getElementById("verse-panel").classList.remove("active");
document.getElementById("verse-detail-panel").classList.remove("active");
document.getElementById("favorites").style.display = "none";
document.getElementById("podcasts").style.display = "none";
document.getElementById("settings").style.display = "none";
document.getElementById("search-page").classList.remove("active");
document.getElementById("main-search-results").classList.remove("active");

// Show main content
document.getElementById("surahs").style.display = "grid";
document.querySelector('.controls').style.display = "block";

// Clear search
document.getElementById("search").value = "";
document.getElementById("search-page-input").value = "";

// Reset author selection to default
document.getElementById("author-select").value = selectedAuthor;

// Update navigation states
updateNavigationStates('home');
}

function showSearch() {
document.getElementById("search-page").classList.add("active");
document.getElementById("search-page-input").focus();
updateNavigationStates('search');
}

function showSettings() {
// Hide all other panels
document.getElementById("surahs").style.display = "none";
document.getElementById("verse-panel").classList.remove("active");
document.getElementById("verse-detail-panel").classList.remove("active");
document.getElementById("favorites").style.display = "none";
document.getElementById("podcasts").style.display = "none";
document.getElementById("main-search-results").classList.remove("active");
document.querySelector('.controls').style.display = "none";

// Show settings
document.getElementById("settings").style.display = "block";

// Reset navigation state
isInVerseDetailPanel = false;

updateNavigationStates('settings');
}

function showPodcasts() {
// Hide all other panels
document.getElementById("surahs").style.display = "none";
document.getElementById("verse-panel").classList.remove("active");
document.getElementById("verse-detail-panel").classList.remove("active");
document.getElementById("favorites").style.display = "none";
document.getElementById("settings").style.display = "none";
document.getElementById("main-search-results").classList.remove("active");
document.querySelector('.controls').style.display = "none";

// Show podcasts
document.getElementById("podcasts").style.display = "block";

// Reset navigation state
isInVerseDetailPanel = false;

updateNavigationStates('podcasts');
}

function updateNavigationStates(activeSection) {
// Desktop navigation
document.querySelectorAll('.sidebar .nav-item').forEach(item => {
item.classList.remove('active');
});

// Mobile navigation
document.querySelectorAll('.bottom-nav-item').forEach(item => {
item.classList.remove('active');
});

// Set active states
switch(activeSection) {
case 'home':
document.getElementById('home-nav-desktop')?.classList.add('active');
document.getElementById('home-nav')?.classList.add('active');
break;
case 'search':
document.getElementById('search-nav-desktop')?.classList.add('active');
document.getElementById('search-nav')?.classList.add('active');
break;
case 'favorites':
document.getElementById('favorites-nav-desktop')?.classList.add('active');
document.getElementById('favorites-nav')?.classList.add('active');
break;
case 'podcasts':
document.getElementById('podcasts-nav-desktop')?.classList.add('active');
break;
case 'settings':
document.getElementById('settings-nav-desktop')?.classList.add('active');
document.getElementById('settings-nav')?.classList.add('active');
break;
}
}

// URL hash handling
function checkUrlHash() {
const hash = window.location.hash.substring(1);
if (!hash || !dataLoaded) return;

const parts = hash.split('-');
const surahId = parseInt(parts[0]);
const verseId = parts[1] ? parseInt(parts[1]) : null;

if (surahId && surahId >= 1 && surahId <= 114) {
const surahIndex = quranData.findIndex(s => s.id === surahId);
if (surahIndex !== -1) {
const sure = quranData[surahIndex];

if (verseId) {
// Navigate to specific verse
const verseIndex = verseId - 1;
if (verseIndex >= 0 && verseIndex < sure.ayetler.length) {
    const ayet = sure.ayetler[verseIndex];
    displayVerseDetail(sure.sure, ayet, verseIndex, surahId);
}
} else {
// Navigate to surah
displayVerses(sure.sure, sure.ayetler, sure.id);
}
}
}
}

// Settings functionality
function applySettings() {
// Apply theme
applyTheme(currentTheme);

// Apply highlight color
document.documentElement.style.setProperty('--highlight-dark', highlightColor);
document.documentElement.style.setProperty('--highlight-black', highlightColor);
document.documentElement.style.setProperty('--highlight-eye', highlightColor);
document.documentElement.style.setProperty('--highlight-light', highlightColor);

// Apply font size
document.documentElement.style.setProperty('--verse-font-size', `${fontSize}%`);

// Update UI elements
document.getElementById('font-size-value').textContent = `${fontSize}%`;
document.getElementById('default-author').value = defaultAuthor;
document.getElementById('auto-scroll-toggle').checked = autoScroll;
document.getElementById('scroll-speed').value = scrollSpeed;
document.getElementById('word-analysis-toggle').checked = showWordAnalysis;
document.getElementById('daily-verse-toggle').checked = dailyVerse;
document.getElementById('notification-time').value = notificationTime;
document.getElementById('notification-sound-toggle').checked = notificationSound;
document.getElementById('offline-toggle').checked = offlineMode;
document.getElementById('search-history-toggle').checked = searchHistory;
document.getElementById('verse-number-style').value = verseNumberStyle;
document.getElementById('arabic-display-mode').value = arabicDisplayMode;

// Update color selection
document.querySelectorAll('.color-option').forEach(option => {
option.classList.remove('active');
if (option.dataset.color === highlightColor) {
option.classList.add('active');
}
});

// Update theme selection
updateThemeSelection();

// Set default author
selectedAuthor = defaultAuthor;
if (dataLoaded) {
loadQuranData(selectedAuthor);
}
}

function setupSettingsEventListeners() {
// Theme selection
document.querySelectorAll('.theme-option').forEach(option => {
option.addEventListener('click', () => {
applyTheme(option.dataset.theme);
});
});

// Color selection
document.querySelectorAll('.color-option').forEach(option => {
option.addEventListener('click', () => {
highlightColor = option.dataset.color;
localStorage.setItem('highlightColor', highlightColor);
applySettings();
});
});

// Font size controls
document.getElementById('decrease-font')?.addEventListener('click', () => {
if (fontSize > 70) {
fontSize -= 10;
localStorage.setItem('fontSize', fontSize.toString());
applySettings();
}
});

document.getElementById('increase-font')?.addEventListener('click', () => {
if (fontSize < 150) {
fontSize += 10;
localStorage.setItem('fontSize', fontSize.toString());
applySettings();
}
});

// Settings toggles and selects
const settingsControls = [
{ id: 'default-author', key: 'defaultAuthor', type: 'select' },
{ id: 'auto-scroll-toggle', key: 'autoScroll', type: 'checkbox' },
{ id: 'scroll-speed', key: 'scrollSpeed', type: 'range' },
{ id: 'word-analysis-toggle', key: 'showWordAnalysis', type: 'checkbox' },
{ id: 'daily-verse-toggle', key: 'dailyVerse', type: 'checkbox' },
{ id: 'notification-time', key: 'notificationTime', type: 'select' },
{ id: 'notification-sound-toggle', key: 'notificationSound', type: 'checkbox' },
{ id: 'offline-toggle', key: 'offlineMode', type: 'checkbox' },
{ id: 'search-history-toggle', key: 'searchHistory', type: 'checkbox' },
{ id: 'verse-number-style', key: 'verseNumberStyle', type: 'select' },
{ id: 'arabic-display-mode', key: 'arabicDisplayMode', type: 'select' }
];

settingsControls.forEach(control => {
const element = document.getElementById(control.id);
if (element) {
element.addEventListener('change', (e) => {
let value;
if (control.type === 'checkbox') {
    value = e.target.checked;
} else if (control.type === 'range') {
    value = parseInt(e.target.value);
} else {
    value = e.target.value;
}

// Update global variable
switch(control.key) {
    case 'defaultAuthor':
        defaultAuthor = value;
        selectedAuthor = value;
        if (dataLoaded) loadQuranData(selectedAuthor);
        break;
    case 'autoScroll':
        autoScroll = value;
        break;
    case 'scrollSpeed':
        scrollSpeed = value;
        break;
    case 'showWordAnalysis':
        showWordAnalysis = value;
        break;
    case 'dailyVerse':
        dailyVerse = value;
        if (value) setupDailyVerseNotification();
        break;
    case 'notificationTime':
        notificationTime = value;
        if (dailyVerse) setupDailyVerseNotification();
        break;
    case 'notificationSound':
        notificationSound = value;
        break;
    case 'offlineMode':
        offlineMode = value;
        break;
    case 'searchHistory':
        searchHistory = value;
        break;
    case 'verseNumberStyle':
        verseNumberStyle = value;
        break;
    case 'arabicDisplayMode':
        arabicDisplayMode = value;
        break;
}

localStorage.setItem(control.key, value.toString());
});
}
});

// Clear data button
document.getElementById('clear-data-btn')?.addEventListener('click', () => {
if (confirm('Tüm veriler silinecek. Bu işlem geri alınamaz. Devam etmek istiyor musunuz?')) {
// Clear all localStorage data
const keysToKeep = ['currentTheme', 'highlightColor', 'fontSize'];
const allKeys = Object.keys(localStorage);
allKeys.forEach(key => {
if (!keysToKeep.includes(key)) {
    localStorage.removeItem(key);
}
});

showNotification('Tüm veriler temizlendi', 'success');

// Reload page to reset everything
setTimeout(() => {
window.location.reload();
}, 1000);
}
});

// Feedback button
document.getElementById('feedback-btn')?.addEventListener('click', () => {
const email = 'info@sadecekuran.com';
const subject = 'SADECE KURAN - Geri Bildirim';
const body = 'Merhaba,\n\nSADECE KURAN uygulaması hakkında geri bildirimim:\n\n';
window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
});

// App download button
document.getElementById('app-btn')?.addEventListener('click', () => {
showNotification('Mobil uygulama yakında mağazalarda!', 'info');
});
}

function setupDailyVerseNotification() {
if (!dailyVerse) return;

// Request notification permission
if ('Notification' in window && Notification.permission === 'default') {
Notification.requestPermission().then(permission => {
notificationPermissionGranted = permission === 'granted';
if (notificationPermissionGranted) {
showNotification('Günlük ayet bildirimleri aktif edildi', 'success');
scheduleDailyNotification();
}
});
} else if (Notification.permission === 'granted') {
notificationPermissionGranted = true;
scheduleDailyNotification();
}
}

function scheduleDailyNotification() {
if (!notificationPermissionGranted || !dailyVerse) return;

// Clear existing notification
const existingNotification = localStorage.getItem('dailyNotificationTimeout');
if (existingNotification) {
clearTimeout(parseInt(existingNotification));
}

// Calculate next notification time
const now = new Date();
const notificationHour = getNotificationHour();
let nextNotification = new Date();
nextNotification.setHours(notificationHour, 0, 0, 0);

// If time has passed today, schedule for tomorrow
if (nextNotification <= now) {
nextNotification.setDate(nextNotification.getDate() + 1);
}

const timeUntilNotification = nextNotification.getTime() - now.getTime();

const timeoutId = setTimeout(() => {
sendDailyVerseNotification();
// Schedule next day
scheduleDailyNotification();
}, timeUntilNotification);

localStorage.setItem('dailyNotificationTimeout', timeoutId.toString());
}

function getNotificationHour() {
switch(notificationTime) {
case 'morning': return 8;
case 'noon': return 12;
case 'evening': return 18;
case 'night': return 21;
default: return 8;
}
}

function sendDailyVerseNotification() {
if (!notificationPermissionGranted || !dataLoaded) return;

// Get random verse
const randomSurahIndex = Math.floor(Math.random() * quranData.length);
const randomSurah = quranData[randomSurahIndex];
const randomVerseIndex = Math.floor(Math.random() * randomSurah.ayetler.length);
const randomVerse = randomSurah.ayetler[randomVerseIndex];

const notification = new Notification('Günün Ayeti - SADECE KURAN', {
body: `${randomSurah.sure}: ${randomVerse.substring(0, 100)}...`,
icon: '/logokuran2.jpg',
badge: '/logokuran2.jpg',
tag: 'daily-verse',
requireInteraction: false
});

notification.onclick = () => {
window.focus();
displayVerseDetail(randomSurah.sure, randomVerse, randomVerseIndex, randomSurah.id);
notification.close();
};

// Auto close after 10 seconds
setTimeout(() => {
notification.close();
}, 10000);
}

// Tab functionality for mobile
function setupTabFunctionality() {
const tabButtons = document.querySelectorAll('.tab-button');
const tabContents = document.querySelectorAll('.tab-content');

tabButtons.forEach(button => {
button.addEventListener('click', () => {
const targetTab = button.dataset.tab;

// Remove active class from all buttons and contents
tabButtons.forEach(btn => btn.classList.remove('active'));
tabContents.forEach(content => content.classList.remove('active'));

// Add active class to clicked button and corresponding content
button.classList.add('active');
document.getElementById(`${targetTab}-tab`)?.classList.add('active');
});
});
}

// Initialize the application
document.addEventListener("DOMContentLoaded", async () => {
// Check storage availability
if (!checkStorageAvailability()) {
showNotification("Tarayıcınız yerel depolama desteklemiyor. Bazı özellikler çalışmayabilir.", "error");
}

// Load settings
applySettings();

// Setup event listeners
setupSettingsEventListeners();
setupTabFunctionality();
setupAuthorSorting();
setupMobileLongPress();

// Load initial data
try {
const response = await fetch("kuran_mealleri.json");
if (!response.ok) {
throw new Error(`JSON dosyası yüklenemedi: ${response.status}`);
}
jsonData = await response.json();
loadAuthors(jsonData);
} catch (error) {
console.error("JSON yüklenirken hata:", error);
showNotification("Kuran mealleri yüklenirken bir hata oluştu: " + error.message, "error");
}

// Load Quran data with selected author
await loadQuranData(selectedAuthor);

// Load detailed data in background
loadAllSurahsData();

// Setup daily notifications if enabled
if (dailyVerse) {
setupDailyVerseNotification();
}

// Navigation event listeners
document.getElementById("theme-toggle")?.addEventListener("click", cycleTheme);

// Desktop navigation
document.getElementById("home-nav-desktop")?.addEventListener("click", showHome);
document.getElementById("search-nav-desktop")?.addEventListener("click", showSearch);
document.getElementById("favorites-nav-desktop")?.addEventListener("click", () => {
displayFavorites();
updateNavigationStates('favorites');
});
document.getElementById("podcasts-nav-desktop")?.addEventListener("click", showPodcasts);
document.getElementById("settings-nav-desktop")?.addEventListener("click", showSettings);

// Mobile navigation
document.getElementById("home-nav")?.addEventListener("click", showHome);
document.getElementById("search-nav")?.addEventListener("click", showSearch);
document.getElementById("favorites-nav")?.addEventListener("click", () => {
displayFavorites();
updateNavigationStates('favorites');
});
document.getElementById("settings-nav")?.addEventListener("click", showSettings);
document.getElementById("home-btn")?.addEventListener("click", showHome);

// Search functionality
document.getElementById("search")?.addEventListener("input", (e) => {
const searchTerm = e.target.value.trim();
displayMainSearchResults(searchTerm);
});

document.getElementById("search-page-input")?.addEventListener("input", (e) => {
const searchTerm = e.target.value.trim();
if (searchTerm.length >= 2) {
displaySearchResults(searchTerm);
} else {
document.getElementById("search-results").innerHTML = "";
}
});

// Author selection
document.getElementById("author-select")?.addEventListener("change", (e) => {
selectedAuthor = e.target.value;
if (selectedAuthor) {
loadQuranData(selectedAuthor);
}
});

// Favorites functionality
document.getElementById("show-favorites")?.addEventListener("click", () => {
displayFavorites();
updateNavigationStates('favorites');
});

document.getElementById("back-to-surahs")?.addEventListener("click", showHome);

// Favorites toolbar
document.getElementById("export-favorites")?.addEventListener("click", exportFavorites);
document.getElementById("clear-all-favorites")?.addEventListener("click", clearAllFavorites);

// Favorites search
document.getElementById("favorites-search")?.addEventListener("input", (e) => {
const searchTerm = e.target.value.trim();
filterFavorites(searchTerm);
});

// Panel close buttons
document.getElementById("close-panel")?.addEventListener("click", showHome);
document.getElementById("back-btn")?.addEventListener("click", () => {
const versePanel = document.getElementById("verse-panel");
if (versePanel.classList.contains("active")) {
showHome();
} else {
// Go back to verse list if coming from verse detail
const title = document.getElementById("verse-detail-title").textContent;
const match = title.match(/(.+) - Ayet \d+/);
if (match) {
const sureName = match[1];
const surahIndex = quranData.findIndex(s => s.sure === sureName);
if (surahIndex !== -1) {
    const sure = quranData[surahIndex];
    displayVerses(sure.sure, sure.ayetler, sure.id);
}
}
}
});

// Search page back button
document.querySelector(".search-page-back")?.addEventListener("click", () => {
document.getElementById("search-page").classList.remove("active");
updateNavigationStates('home');
});

// Example searches
document.querySelectorAll('.example-search').forEach(example => {
example.addEventListener('click', () => {
const searchTerm = example.textContent.replace('#', '').trim();
document.getElementById("search-page-input").value = searchTerm;
displaySearchResults(searchTerm);
});
});

// Handle browser back/forward
window.addEventListener('popstate', () => {
setTimeout(checkUrlHash, 100);
});

// Handle hash changes
window.addEventListener('hashchange', () => {
setTimeout(checkUrlHash, 100);
});

// Initial hash check
setTimeout(checkUrlHash, 500);

console.log("SADECE KURAN uygulaması başlatıldı");
});
</script>
</body>
</html>