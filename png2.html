<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kurâ€™an Meali</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
}

#controls {
  position: sticky;
  top: 0;
  background: #fff;
  padding: 10px;
  border-bottom: 1px solid #ccc;
}

.ayah {
  margin-bottom: 12px;
}

.ref {
  color: #888;
  font-size: 11px;
}
</style>
</head>
<body>

<div id="controls">
  <select id="mealSelect"></select>
</div>

<div id="content"></div>

<script>
let DATA;
let CURRENT_AUTHOR;

async function loadJSON() {
  const res = await fetch("kuran_mealleri.json");
  DATA = await res.json();

  setupMealSelect();
  render();
}

function setupMealSelect() {
  const authors = new Set();

  DATA.surahs.forEach(surah => {
    surah.verses.forEach(verse => {
      verse.translations.forEach(t => {
        authors.add(t.author);
      });
    });
  });

  const select = document.getElementById("mealSelect");

  [...authors].forEach(author => {
    const opt = document.createElement("option");
    opt.value = author;
    opt.textContent = author;
    select.appendChild(opt);
  });

  CURRENT_AUTHOR = select.value = [...authors][0];

  select.onchange = e => {
    CURRENT_AUTHOR = e.target.value;
    render();
  };
}

function render() {
  const box = document.getElementById("content");
  box.innerHTML = "";

  DATA.surahs.forEach(surah => {
    surah.verses.forEach(verse => {
      const tr = verse.translations.find(
        t => t.author === CURRENT_AUTHOR
      );

      if (!tr) return;

      const div = document.createElement("div");
      div.className = "ayah";
      div.innerHTML = `
        <span class="ref">(${surah.id}:${verse.verse_id})</span>
        ${tr.text}
      `;
      box.appendChild(div);
    });
  });
}

loadJSON();
</script>

</body>
</html>
