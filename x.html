<!doctype html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1" />
<title>SADECE KURAN</title>
<link rel="icon" type="image/png" href="/logokuran2.jpg"/>
<link rel="apple-touch-icon" href="/logokuran2.jpg">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
/* Dark Mode (Original) */
--primary-dark: #15202b;
--secondary-dark: #192734;
--accent-dark: #22303c;
--text-dark: #ffffff;
--highlight-dark: #1da1f2;

/* True Black Mode */
--primary-black: #000000;
--secondary-black: #0a0a0a;
--accent-black: #1a1a1a;
--text-black: #e0e0e0;
--highlight-black: #4a9eff;

/* Eye Mode (Muted Colors) */
--primary-eye: #1a1a1a;
--secondary-eye: #2d2d2d;
--accent-eye: #404040;
--text-eye: #d4d4d4;
--highlight-eye: #7ba7d9;

/* Light Mode */
--primary-light: #ffffff;
--secondary-light: #f7f9fa;
--accent-light: #ebeef0;
--text-light: #0f1419;
--highlight-light: #1da1f2;

--transition-speed: 0.3s;
--transition-function: cubic-bezier(0.4, 0, 0.2, 1);
--verse-font-size: 100%;

/* New variables for modern header */
--bg-primary: var(--primary-dark);
--bg-secondary: var(--secondary-dark);
--bg-tertiary: var(--accent-dark);
--text-primary: var(--text-dark);
--text-secondary: var(--text-dark);
--text-muted: #888888;
--border-color: var(--accent-dark);
--accent-light: var(--text-dark);
--accent-dark: var(--primary-light);
--shadow-light: rgba(255, 255, 255, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, var(--text-dark), #cccccc);
--gradient-secondary: linear-gradient(135deg, var(--accent-dark), var(--secondary-dark));
--wire-color: #666666;
--primary-color: var(--highlight-dark);
--secondary-color: #cccccc;
--accent-color: #888888;
--header-height: 60px;
}

/* Theme-specific variable updates */
body.day-mode {
--bg-primary: var(--primary-light);
--bg-secondary: var(--secondary-light);
--bg-tertiary: var(--accent-light);
--text-primary: var(--text-light);
--text-secondary: var(--text-light);
--border-color: var(--accent-light);
--gradient-primary: linear-gradient(135deg, var(--text-light), #475569);
--wire-color: #94a3b8;
--primary-color: var(--highlight-light);
}

body.black-mode {
--bg-primary: var(--primary-black);
--bg-secondary: var(--secondary-black);
--bg-tertiary: var(--accent-black);
--text-primary: var(--text-black);
--text-secondary: var(--text-black);
--border-color: var(--accent-black);
--gradient-primary: linear-gradient(135deg, var(--text-black), #cccccc);
--wire-color: #666666;
--primary-color: var(--highlight-black);
}

body.eye-mode {
--bg-primary: var(--primary-eye);
--bg-secondary: var(--secondary-eye);
--bg-tertiary: var(--accent-eye);
--text-primary: var(--text-eye);
--text-secondary: var(--text-eye);
--border-color: var(--accent-eye);
--gradient-primary: linear-gradient(135deg, var(--text-eye), #8b7355);
--wire-color: #a0916f;
--primary-color: var(--highlight-eye);
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Poppins', sans-serif;
background-color: var(--bg-primary);
color: var(--text-primary);
line-height: 1.5;
display: flex;
flex-direction: column;
min-height: 100vh;
transition: background 0.3s var(--transition-function), color 0.3s var(--transition-function);
scrollbar-width: thin;
scrollbar-color: var(--accent-dark) var(--primary-dark);
overflow-x: hidden;
}

body.day-mode {
background-color: var(--primary-light);
color: var(--text-light);
scrollbar-color: var(--accent-light) var(--primary-light);
}

body.black-mode {
background-color: var(--primary-black);
color: var(--text-black);
scrollbar-color: var(--accent-black) var(--primary-black);
}

body.eye-mode {
background-color: var(--primary-eye);
color: var(--text-eye);
scrollbar-color: var(--accent-eye) var(--primary-eye);
}

body::-webkit-scrollbar {
width: 8px;
}

body::-webkit-scrollbar-track {
background: var(--primary-dark);
}

body.day-mode::-webkit-scrollbar-track {
background: var(--primary-light);
}

body.black-mode::-webkit-scrollbar-track {
background: var(--primary-black);
}

body.eye-mode::-webkit-scrollbar-track {
background: var(--primary-eye);
}

body::-webkit-scrollbar-thumb {
background-color: var(--accent-dark);
border-radius: 20px;
}

body.day-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-light);
}

body.black-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-black);
}

body.eye-mode::-webkit-scrollbar-thumb {
background-color: var(--accent-eye);
}

/* Wire-frame Icons */
.icon {
display: inline-block;
width: 20px;
height: 20px;
stroke: var(--wire-color);
fill: none;
stroke-width: 1.5;
stroke-linecap: round;
stroke-linejoin: round;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.icon:hover {
stroke: var(--text-primary);
transform: scale(1.1);
}

.icon-sm {
width: 16px;
height: 16px;
}

/* Sidebar - Desktop */
.sidebar {
width: 60px;
background-color: var(--bg-secondary);
display: flex;
flex-direction: column;
align-items: center;
padding: 20px 0;
position: fixed;
height: 100%;
z-index: 10;
transition: background-color 0.3s var(--transition-function);
border-right: 1px solid var(--border-color);
}

.sidebar-logo {
width: 40px;
height: 40px;
border-radius: 50%;
margin-bottom: 30px;
object-fit: cover;
}

.sidebar-nav {
display: flex;
flex-direction: column;
align-items: center;
width: 100%;
}

.nav-item {
width: 100%;
display: flex;
justify-content: center;
padding: 15px 0;
color: var(--text-secondary);
font-size: 1.3rem;
cursor: pointer;
transition: background-color 0.2s var(--transition-function);
position: relative;
}

.nav-item:hover {
background-color: var(--bg-tertiary);
}

.nav-item.active {
color: var(--primary-color);
}

.nav-item.active::before {
content: '';
position: absolute;
left: 0;
height: 100%;
width: 3px;
background-color: var(--primary-color);
}

/* Main Content */
.main-content {
flex: 1;
margin-left: 60px;
display: flex;
flex-direction: column;
min-height: 100vh;
}

/* Modern Header */
.header {
position: fixed;
top: 0;
left: 60px;
right: 0;
background: rgba(var(--bg-primary-rgb, 21, 32, 43), 0.95);
backdrop-filter: blur(20px);
border-bottom: 1px solid var(--border-color);
padding: 0.75rem 1rem;
z-index: 1000;
height: var(--header-height);
animation: slideDown 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

body.day-mode .header {
background: rgba(255, 255, 255, 0.95);
}

body.black-mode .header {
background: rgba(0, 0, 0, 0.95);
}

body.eye-mode .header {
background: rgba(26, 26, 26, 0.95);
}

.header-content {
max-width: 1400px;
margin: 0 auto;
display: flex;
justify-content: space-between;
align-items: center;
gap: 1rem;
height: 100%;
}

.logo {
font-size: 1.25rem;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
text-decoration: none;
cursor: pointer;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
white-space: nowrap;
}

.logo:hover {
transform: scale(1.05);
}

.header-actions {
display: flex;
align-items: center;
gap: 0.5rem;
}

.search-btn, .theme-btn, .saved-btn {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
padding: 0.5rem;
border-radius: 8px;
cursor: pointer;
color: var(--text-secondary);
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
}

.search-btn:hover, .theme-btn:hover, .saved-btn:hover {
background: var(--bg-tertiary);
color: var(--text-primary);
border-color: var(--wire-color);
transform: scale(1.05);
}

.saved-btn {
gap: 0.25rem;
padding: 0.5rem 0.75rem;
font-size: 0.8rem;
}

/* Animations */
@keyframes slideDown {
from {
opacity: 0;
transform: translateY(-100%);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}

@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes slideUp {
from {
opacity: 0;
transform: translateY(40px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes slideInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

/* Content Container */
.content {
flex: 1;
padding: 20px;
max-width: 800px;
margin: 0 auto;
width: 100%;
padding-bottom: 80px;
margin-top: var(--header-height);
animation: fadeInUp 1s ease-out 0.8s both;
}

/* BÜYÜK EKRANLAR İÇİN CONTENT GENİŞLETME */
@media (min-width: 1200px) {
.content {
max-width: 1400px;
}
}

/* Controls */
.controls {
margin-bottom: 20px;
display: flex;
flex-direction: column;
gap: 10px;
}

.search-container {
position: relative;
}

#search {
width: 100%;
padding: 12px 15px;
border: 1px solid var(--border-color);
border-radius: 20px;
background-color: var(--bg-secondary);
color: var(--text-primary);
font-size: 0.95rem;
transition: all 0.2s var(--transition-function);
}

#search:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: none;
}

.search-icon {
position: absolute;
right: 15px;
top: 50%;
transform: translateY(-50%);
color: var(--text-primary);
opacity: 0.6;
}

.controls-row {
display: flex;
gap: 10px;
}

#author-select {
flex: 1;
padding: 12px 15px;
border: 1px solid var(--border-color);
border-radius: 20px;
background-color: var(--bg-secondary);
color: var(--text-primary);
font-size: 0.95rem;
appearance: none;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
background-repeat: no-repeat;
background-position: right 15px center;
background-size: 16px;
transition: all 0.2s var(--transition-function);
}

body.day-mode #author-select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%230f1419' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.black-mode #author-select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e0e0e0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.eye-mode #author-select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d4d4d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

#author-select:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: none;
}

#show-saved {
padding: 12px 20px;
border: none;
border-radius: 20px;
background-color: var(--primary-color);
color: white;
font-size: 0.95rem;
cursor: pointer;
display: flex;
align-items: center;
gap: 8px;
transition: background-color 0.2s var(--transition-function);
}

#show-saved:hover {
background-color: #1a91da;
}

body.black-mode #show-saved:hover {
background-color: #3a8eff;
}

body.eye-mode #show-saved:hover {
background-color: #6b9bd4;
}

#loading-bar {
width: 100%;
height: 4px;
background: var(--border-color);
border-radius: 2px;
overflow: hidden;
display: none;
}

#loading-bar .progress {
width: 0%;
height: 100%;
background: var(--primary-color);
border-radius: 2px;
animation: loadingProgress 1.5s infinite ease-in-out;
}

/* Audio Controls Styles */
.audio-controls {
display: flex;
align-items: center;
gap: 8px;
}

.audio-btn {
background: none;
border: 1px solid var(--border-color);
color: var(--text-primary);
font-size: 0.9rem;
cursor: pointer;
padding: 8px 12px;
border-radius: 20px;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
transition: all 0.2s var(--transition-function);
min-width: 40px;
height: 36px;
}

.audio-btn:hover {
background-color: var(--bg-tertiary);
border-color: var(--primary-color);
}

.audio-btn.playing {
background-color: var(--primary-color);
border-color: var(--primary-color);
color: white;
}

.audio-btn:disabled {
opacity: 0.5;
cursor: not-allowed;
}

/* Audio Player Styles - ENHANCED FOR MOBILE */
.audio-player {
position: fixed;
bottom: 0;
left: 0;
right: 0;
background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
border-top: 1px solid var(--border-color);
padding: 15px 20px;
z-index: 100;
transform: translateY(100%);
transition: transform 0.3s var(--transition-function);
backdrop-filter: blur(10px);
box-shadow: 0 -5px 20px var(--shadow-dark);
}

.audio-player.active {
transform: translateY(0);
}

.audio-player-content {
display: flex;
align-items: center;
gap: 15px;
max-width: 1200px;
margin: 0 auto;
}

.audio-info {
flex: 1;
min-width: 0;
}

.audio-title {
font-size: 1rem;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 4px;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.audio-subtitle {
font-size: 0.8rem;
color: var(--text-primary);
opacity: 0.7;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

.audio-controls-main {
display: flex;
align-items: center;
gap: 12px;
}

.audio-control-btn {
background: none;
border: none;
color: var(--text-primary);
font-size: 1.3rem;
cursor: pointer;
padding: 12px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.2s var(--transition-function);
width: 50px;
height: 50px;
}

.audio-control-btn:hover {
background-color: var(--bg-tertiary);
color: var(--primary-color);
}

.audio-play-btn {
background-color: var(--primary-color);
color: white;
font-size: 1.5rem;
width: 60px;
height: 60px;
}

.audio-play-btn:hover {
background-color: var(--primary-color);
transform: scale(1.05);
}

.audio-progress-container {
flex: 1;
display: flex;
flex-direction: column;
gap: 8px;
min-width: 200px;
}

.audio-progress {
width: 100%;
height: 8px;
background-color: var(--border-color);
border-radius: 4px;
overflow: hidden;
cursor: pointer;
position: relative;
}

.audio-progress-bar {
height: 100%;
background-color: var(--primary-color);
border-radius: 4px;
width: 0%;
transition: width 0.1s ease;
position: relative;
}

.audio-progress-bar::after {
content: '';
position: absolute;
right: -8px;
top: 50%;
transform: translateY(-50%);
width: 16px;
height: 16px;
background-color: var(--primary-color);
border-radius: 50%;
opacity: 0;
transition: opacity 0.2s ease;
}

.audio-progress:hover .audio-progress-bar::after {
opacity: 1;
}

.audio-time {
display: flex;
justify-content: space-between;
font-size: 0.75rem;
color: var(--text-primary);
opacity: 0.7;
}

.audio-volume {
display: flex;
align-items: center;
gap: 8px;
}

.volume-slider {
width: 80px;
height: 6px;
background-color: var(--border-color);
border-radius: 3px;
outline: none;
cursor: pointer;
-webkit-appearance: none;
}

.volume-slider::-webkit-slider-thumb {
-webkit-appearance: none;
width: 16px;
height: 16px;
border-radius: 50%;
background-color: var(--primary-color);
cursor: pointer;
}

.volume-slider::-moz-range-thumb {
width: 16px;
height: 16px;
border-radius: 50%;
background-color: var(--primary-color);
cursor: pointer;
border: none;
}

.audio-close-btn {
color: var(--text-primary);
opacity: 0.7;
font-size: 1.2rem;
}

.audio-close-btn:hover {
opacity: 1;
color: #e53e3e;
}

/* Mobile Audio Player Adjustments - ENHANCED */
@media (max-width: 768px) {
.audio-player {
padding: 14px 30px;
padding-bottom: -3px;
}

.audio-player-content {
flex-direction: column;
gap: 15px;
}

.audio-info {
text-align: center;
order: 1;
}

.audio-controls-main {
order: 2;
justify-content: center;
gap: 20px;
}

.audio-progress-container {
order: 3;
min-width: auto;
width: 100%;
}

.audio-progress {
height: 12px;
}

.audio-progress-bar::after {
width: 20px;
height: 20px;
right: -10px;
}

.audio-volume {
display: none;
}

.audio-close-btn {
position: absolute;
top: 15px;
right: 15px;
}

.audio-title {
font-size: 1.1rem;
}

.audio-subtitle {
font-size: 0.85rem;
}

.audio-control-btn {
width: 55px;
height: 55px;
font-size: 1.4rem;
}

.audio-play-btn {
width: 70px;
height: 70px;
font-size: 1.8rem;
}

.audio-time {
font-size: 0.85rem;
margin-top: 5px;
}

body.audio-playing .content {
padding-bottom: 200px;
}

.header {
left: 0;
}

.main-content {
margin-left: 0;
}

.sidebar {
display: none;
}
}

/* Desktop Audio Player Adjustments */
@media (min-width: 769px) {
body.audio-playing .content {
padding-bottom: 120px;
}
}

/* Surah List */
#surahs {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
gap: 15px;
margin-bottom: 20px;
}

.surah {
background-color: var(--bg-secondary);
padding: 15px;
border-radius: 12px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
border: 1px solid var(--border-color);
position: relative;
display: flex;
align-items: center;
justify-content: space-between;
}

.surah:hover {
transform: translateY(-3px);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
border-color: var(--primary-color);
}

body.day-mode .surah:hover {
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

body.black-mode .surah:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
}

body.eye-mode .surah:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.03);
}

.surah h2 {
font-size: 1.1rem;
font-weight: 500;
margin: 0;
flex: 1;
}

.surah-audio-controls {
display: flex;
align-items: center;
opacity: 0;
transition: opacity 0.2s var(--transition-function);
}

.surah:hover .surah-audio-controls {
opacity: 1;
}

@media (max-width: 768px) {
.surah {
flex-direction: row;
align-items: center;
gap: 25px;
}

.surah h2 {
flex: 1;
}

.surah-audio-controls {
opacity: 1;
position: static;
}

#surahs {
grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
gap: 12px;
}
}

.verse-result {
background-color: var(--bg-secondary);
padding: 15px;
border-radius: 12px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
border: 1px solid var(--border-color);
margin-bottom: 10px;
}

.verse-result:hover {
transform: translateY(-3px);
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
border-color: var(--primary-color);
}

body.day-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

body.black-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
}

body.eye-mode .verse-result:hover {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.03);
}

/* Verse Panel */
#verse-panel {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--border-color);
}

#verse-panel.active {
display: block;
}

#verse-panel h3 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
display: flex;
align-items: center;
gap: 10px;
}

.verse-panel-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
}

.verse-panel-title {
display: flex;
align-items: center;
gap: 10px;
}

#close-panel {
background: none;
border: none;
color: var(--text-primary);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

#close-panel:hover {
background-color: var(--bg-tertiary);
}

.verse {
padding: 12px 0;
border-bottom: 1px solid var(--border-color);
display: flex;
justify-content: space-between;
align-items: center;
cursor: pointer;
transition: all 0.2s var(--transition-function);
font-size: var(--verse-font-size);
position: relative;
}

.verse:last-child {
border-bottom: none;
}

.verse:hover {
padding-left: 5px;
}

.verse-actions {
display: flex;
gap: 10px;
opacity: 0;
transition: opacity 0.2s var(--transition-function);
}

@media (min-width: 769px) {
.verse:hover .verse-actions {
opacity: 1;
}
}

@media (max-width: 768px) {
.verse-actions {
position: absolute;
right: 10px;
top: 50%;
transform: translateY(-50%);
background-color: var(--bg-secondary);
border-radius: 20px;
padding: 5px;
box-shadow: 0 4px 12px var(--shadow-dark);
z-index: 10;
opacity: 0;
visibility: hidden;
transition: all 0.3s var(--transition-function);
pointer-events: none;
}

.verse-actions.show {
opacity: 1;
visibility: visible;
pointer-events: auto;
}

.verse-actions::before {
content: '';
position: absolute;
left: -8px;
top: 50%;
transform: translateY(-50%);
width: 0;
height: 0;
border-top: 8px solid transparent;
border-bottom: 8px solid transparent;
border-right: 8px solid var(--bg-secondary);
}

.verse.scroll-disabled {
pointer-events: none;
}

.verse.scroll-disabled .verse-actions {
opacity: 0 !important;
visibility: hidden !important;
pointer-events: none !important;
}
}

.verse .save-btn,
.verse .share-btn {
background: none;
border: none;
color: var(--text-primary);
font-size: 1rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

.verse .save-btn:hover,
.verse .share-btn:hover {
background-color: var(--bg-tertiary);
}

.verse .save-btn.active {
color: var(--primary-color);
}

/* Verse Detail Panel - RESPONSIVE TASARIM DÜZELTMESİ */
#verse-detail-panel {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--border-color);
position: relative;
touch-action: pan-y;
}

#verse-detail-panel.active {
display: block;
}

#verse-detail-panel h3 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
text-align: center;
position: relative;
}

#verse-detail-panel .back-btn {
position: absolute;
left: 0;
top: 0;
background: none;
border: none;
color: var(--text-primary);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

#verse-detail-panel .back-btn:hover {
background-color: var(--bg-tertiary);
}

#verse-detail-panel .selected-translation {
background-color: var(--primary-color);
padding: 20px;
border-radius: 12px;
margin-bottom: 20px;
font-size: 1.1rem;
line-height: 1.6;
border: 1px solid var(--primary-color);
color: white;
font-weight: 500;
box-shadow: none;
font-size: var(--verse-font-size);
}

@media (min-width: 1024px) {
.verse-content-container {
display: grid;
grid-template-columns: 1fr 2fr 1fr;
gap: 30px;
align-items: start;
}

.verse-main-content {
grid-column: 2;
display: flex;
flex-direction: column;
gap: 20px;
}

.verse-left-sidebar {
grid-column: 1;
background-color: var(--bg-tertiary);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--border-color);
}

.verse-right-sidebar {
grid-column: 3;
background-color: var(--bg-tertiary);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--border-color);
}

.sidebar-title {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 15px;
color: var(--primary-color);
text-align: center;
border-bottom: 2px solid var(--primary-color);
padding-bottom: 8px;
display: flex;
align-items: center;
justify-content: space-between;
}

.verse-navigation-buttons {
display: flex;
justify-content: flex-end;
align-items: center;
gap: 15px;
margin: 20px 0;
}

.verse-navigation-audio {
display: flex;
align-items: center;
gap: 10px;
}

.verse-detail-actions {
display: flex;
align-items: center;
gap: 10px;
}

.nav-btn {
background: var(--primary-color);
border: none;
color: white;
font-size: 1rem;
cursor: pointer;
padding: 12px 20px;
border-radius: 25px;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
transition: all 0.2s var(--transition-function);
box-shadow: none;
min-width: 120px;
}

.nav-btn:hover {
background-color: #1a91da;
transform: translateY(-2px);
box-shadow: none;
}

body.black-mode .nav-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .nav-btn:hover {
background-color: #6b9bd4;
}

.tab-container {
display: none;
}
}

@media (max-width: 1023px) {
.verse-content-container {
display: flex;
flex-direction: column;
gap: 20px;
}

.verse-main-content {
order: 1;
}

.verse-left-sidebar,
.verse-right-sidebar {
display: none;
}

.tab-container {
margin-top: 20px;
display: block;
}

.tab-buttons {
display: flex;
border-bottom: 1px solid var(--border-color);
margin-bottom: 15px;
}

.tab-header {
display: flex;
align-items: center;
gap: 5px;
flex: 1;
}

.tab-button {
padding: 10px 20px;
background: none;
border: none;
color: var(--text-primary);
cursor: pointer;
font-size: 0.95rem;
position: relative;
transition: all 0.2s var(--transition-function);
flex: 1;
text-align: center;
}

.tab-button.active {
color: var(--primary-color);
font-weight: 500;
}

.tab-button.active::after {
content: '';
position: absolute;
bottom: -1px;
left: 0;
width: 100%;
height: 2px;
background-color: var(--primary-color);
}

.tab-content {
display: none;
}

.tab-content.active {
display: block;
}

.verse-navigation-buttons {
display: flex;
justify-content: flex-end;
align-items: center;
margin: 20px 0;
gap: 8px;
flex-wrap: nowrap;
}

.verse-navigation-audio {
display: flex;
align-items: center;
gap: 8px;
}

.verse-detail-actions {
display: flex;
align-items: center;
gap: 8px;
}

.nav-btn {
background: var(--primary-color);
border: none;
color: white;
font-size: 0.8rem;
cursor: pointer;
padding: 8px 12px;
border-radius: 15px;
display: flex;
align-items: center;
justify-content: center;
gap: 4px;
transition: background-color 0.2s var(--transition-function);
min-width: 80px;
}

.nav-btn:hover {
background-color: #1a91da;
}

body.black-mode .nav-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .nav-btn:hover {
background-color: #6b9bd4;
}
}

.verse-detail-save-btn,
.verse-detail-share-btn {
background: none;
border: 1px solid var(--border-color);
color: var(--text-primary);
font-size: 1rem;
cursor: pointer;
padding: 10px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.2s var(--transition-function);
width: 40px;
height: 40px;
}

.verse-detail-save-btn:hover,
.verse-detail-share-btn:hover {
background-color: var(--bg-tertiary);
border-color: var(--primary-color);
}

.verse-detail-save-btn.active {
color: var(--primary-color);
border-color: var(--primary-color);
background-color: rgba(29, 161, 242, 0.1);
}

body.black-mode .verse-detail-save-btn.active {
background-color: rgba(74, 158, 255, 0.1);
}

body.eye-mode .verse-detail-save-btn.active {
background-color: rgba(123, 167, 217, 0.1);
}

#verse-detail-panel .other-translations {
display: flex;
flex-direction: column;
gap: 20px;
padding: 10px 0;
}

#verse-detail-panel .other-translations .translation-item {
position: relative;
background-color: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 20px 15px 15px 15px;
transition: all 0.3s var(--transition-function);
animation: fadeInUp 0.4s ease-out;
}

#verse-detail-panel .other-translations .translation-item:hover {
transform: translateY(-2px);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
border-color: var(--primary-color);
}

body.day-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
}

body.black-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.08);
}

body.eye-mode #verse-detail-panel .other-translations .translation-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.05);
}

#verse-detail-panel .other-translations .floating-label {
position: absolute;
top: -8px;
left: 15px;
background-color: var(--primary-color);
color: white;
padding: 4px 12px;
border-radius: 20px;
font-size: 0.8rem;
font-weight: 600;
letter-spacing: 0.5px;
box-shadow: none;
z-index: 2;
}

#verse-detail-panel .other-translations .translation-text {
color: var(--text-primary);
font-size: var(--verse-font-size);
line-height: 1.6;
margin: 0;
padding-top: 5px;
}

@media (max-width: 768px) {
#verse-detail-panel .other-translations .translation-item {
padding: 18px 12px 12px 12px;
}

#verse-detail-panel .other-translations .floating-label {
font-size: 0.75rem;
padding: 3px 10px;
left: 12px;
}

#verse-detail-panel .other-translations .translation-text {
font-size: 0.9rem;
}
}

.sort-authors-btn {
background: none;
border: none;
color: var(--primary-color);
font-size: 0.9rem;
cursor: pointer;
padding: 4px 8px;
border-radius: 15px;
display: flex;
align-items: center;
gap: 4px;
transition: all 0.2s var(--transition-function);
}

.sort-authors-btn:hover {
background-color: rgba(29, 161, 242, 0.1);
}

.author-sort-panel {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
display: none;
align-items: center;
justify-content: center;
}

.author-sort-content {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 25px;
max-width: 500px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
border: 1px solid var(--border-color);
}

.author-sort-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
padding-bottom: 15px;
border-bottom: 1px solid var(--border-color);
}

.author-sort-title {
font-size: 1.3rem;
font-weight: 600;
color: var(--text-primary);
}

.close-sort-panel {
background: none;
border: none;
color: var(--text-primary);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

.close-sort-panel:hover {
background-color: var(--bg-tertiary);
}

.author-list {
display: flex;
flex-direction: column;
gap: 10px;
margin-bottom: 20px;
}

.author-item {
background-color: var(--bg-tertiary);
border-radius: 8px;
padding: 15px;
border: 1px solid var(--border-color);
cursor: grab;
transition: all 0.2s var(--transition-function);
display: flex;
align-items: center;
justify-content: space-between;
}

.author-item:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

body.day-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
}

body.eye-mode .author-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
}

.author-item.dragging {
opacity: 0.5;
transform: rotate(5deg);
cursor: grabbing;
}

.author-name {
font-weight: 500;
color: var(--text-primary);
}

.drag-handle {
color: var(--text-primary);
opacity: 0.6;
font-size: 1.2rem;
}

.sort-actions {
display: flex;
gap: 10px;
justify-content: flex-end;
}

.sort-btn {
padding: 10px 20px;
border: none;
border-radius: 20px;
font-size: 0.9rem;
cursor: pointer;
transition: all 0.2s var(--transition-function);
}

.save-sort-btn {
background-color: var(--primary-color);
color: white;
}

.save-sort-btn:hover {
background-color: #1a91da;
}

body.black-mode .save-sort-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .save-sort-btn:hover {
background-color: #6b9bd4;
}

.reset-sort-btn {
background-color: var(--bg-tertiary);
color: var(--text-primary);
}

.reset-sort-btn:hover {
background-color: var(--primary-color);
color: white;
}

/* Saved Verses - YENİ TASARIM VE DÜZELTİLMİŞ FONKSİYON */
#saved-verses {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--border-color);
}

#saved-verses h2 {
font-size: 1.8rem;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 2px solid var(--primary-color);
display: flex;
align-items: center;
justify-content: center;
gap: 12px;
color: var(--text-primary);
text-align: center;
}

#saved-verses h2 i {
color: var(--primary-color);
font-size: 1.5rem;
}

#saved-list {
display: flex;
flex-direction: column;
gap: 20px;
margin-bottom: 25px;
}

#saved-list .saved-verse-item {
background-color: var(--bg-tertiary);
border-radius: 12px;
padding: 20px;
border: 1px solid var(--border-color);
transition: all 0.3s var(--transition-function);
position: relative;
overflow: hidden;
}

#saved-list .saved-verse-item:hover {
transform: translateY(-3px);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
border-color: var(--primary-color);
}

body.day-mode #saved-list .saved-verse-item:hover {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
}

body.black-mode #saved-list .saved-verse-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.08);
}

body.eye-mode #saved-list .saved-verse-item:hover {
box-shadow: 0 8px 25px rgba(255, 255, 255, 0.05);
}

#saved-list .saved-verse-item::before {
content: '';
position: absolute;
left: 0;
top: 0;
height: 100%;
width: 4px;
background: linear-gradient(45deg, var(--primary-color), #1a91da);
}

body.black-mode #saved-list .saved-verse-item::before {
background: linear-gradient(45deg, var(--primary-color), #3a8eff);
}

body.eye-mode #saved-list .saved-verse-item::before {
background: linear-gradient(45deg, var(--primary-color), #6b9bd4);
}

.saved-verse-content {
margin-bottom: 15px;
}

.saved-verse-text {
font-size: var(--verse-font-size);
line-height: 1.6;
margin-bottom: 10px;
color: var(--text-primary);
}

.saved-verse-reference {
font-size: 0.9rem;
color: var(--primary-color);
font-weight: 500;
margin-bottom: 15px;
}

.saved-verse-note {
background-color: var(--bg-secondary);
border-radius: 8px;
padding: 12px;
margin-top: 10px;
border-left: 3px solid var(--primary-color);
}

.saved-verse-note-label {
font-size: 0.8rem;
color: var(--primary-color);
font-weight: 600;
margin-bottom: 5px;
display: flex;
align-items: center;
gap: 5px;
}

.saved-verse-note-text {
font-size: 0.9rem;
color: var(--text-primary);
line-height: 1.4;
}

.saved-verse-actions {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 15px;
}

.saved-verse-buttons {
display: flex;
gap: 10px;
}

.saved-verse-btn {
background: none;
border: 1px solid var(--border-color);
color: var(--text-primary);
font-size: 0.85rem;
cursor: pointer;
padding: 6px 12px;
border-radius: 15px;
display: flex;
align-items: center;
gap: 5px;
transition: all 0.2s var(--transition-function);
}

.saved-verse-btn:hover {
background-color: var(--bg-tertiary);
border-color: var(--primary-color);
}

.saved-verse-btn.edit-note {
color: var(--primary-color);
border-color: var(--primary-color);
}

.saved-verse-btn.delete {
color: #e53e3e;
border-color: #e53e3e;
}

.saved-verse-btn.delete:hover {
background-color: rgba(229, 62, 62, 0.1);
}

.saved-verse-date {
font-size: 0.75rem;
color: var(--text-primary);
opacity: 0.6;
}

/* Note Modal */
.note-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
display: none;
align-items: center;
justify-content: center;
}

.note-modal-content {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 25px;
max-width: 500px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
border: 1px solid var(--border-color);
}

.note-modal-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
padding-bottom: 15px;
border-bottom: 1px solid var(--border-color);
}

.note-modal-title {
font-size: 1.3rem;
font-weight: 600;
color: var(--text-primary);
}

.close-note-modal {
background: none;
border: none;
color: var(--text-primary);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

.close-note-modal:hover {
background-color: var(--bg-tertiary);
}

.note-verse-preview {
background-color: var(--bg-tertiary);
border-radius: 8px;
padding: 15px;
margin-bottom: 20px;
border-left: 3px solid var(--primary-color);
}

.note-verse-text {
font-size: 0.95rem;
line-height: 1.5;
margin-bottom: 8px;
color: var(--text-primary);
}

.note-verse-ref {
font-size: 0.8rem;
color: var(--primary-color);
font-weight: 500;
}

.note-textarea {
width: 100%;
min-height: 120px;
padding: 15px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--bg-primary);
color: var(--text-primary);
font-size: 0.95rem;
font-family: inherit;
resize: vertical;
transition: border-color 0.2s var(--transition-function);
}

.note-textarea:focus {
outline: none;
border-color: var(--primary-color);
}

.note-actions {
display: flex;
gap: 10px;
justify-content: flex-end;
margin-top: 20px;
}

.note-btn {
padding: 10px 20px;
border: none;
border-radius: 20px;
font-size: 0.9rem;
cursor: pointer;
transition: all 0.2s var(--transition-function);
display: flex;
align-items: center;
gap: 8px;
}

.save-note-btn {
background-color: var(--primary-color);
color: white;
}

.save-note-btn:hover {
background-color: #1a91da;
}

body.black-mode .save-note-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .save-note-btn:hover {
background-color: #6b9bd4;
}

.cancel-note-btn {
background-color: var(--bg-tertiary);
color: var(--text-primary);
}

.cancel-note-btn:hover {
background-color: var(--primary-color);
color: white;
}

#back-to-surahs {
padding: 15px 25px;
border: none;
border-radius: 25px;
background: linear-gradient(45deg, var(--primary-color), #1a91da);
color: white;
font-size: 1rem;
font-weight: 500;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
margin: 0 auto;
transition: all 0.3s var(--transition-function);
box-shadow: none;
min-width: 200px;
}

body.black-mode #back-to-surahs {
background: linear-gradient(45deg, var(--primary-color), #3a8eff);
}

body.eye-mode #back-to-surahs {
background: linear-gradient(45deg, var(--primary-color), #6b9bd4);
}

#back-to-surahs:hover {
transform: translateY(-2px);
box-shadow: none;
}

/* Search Page */
#search-page {
position: fixed;
top: 0;
left: 60px;
width: calc(100% - 60px);
height: 100%;
background-color: var(--bg-primary);
z-index: 100;
padding: 20px;
display: none;
overflow-y: auto;
transition: all 0.3s var(--transition-function);
}

#search-page.active {
display: flex;
flex-direction: column;
}

.search-page-header {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 30px;
padding-bottom: 15px;
border-bottom: 1px solid var(--border-color);
}

.search-page-back {
background: none;
border: none;
color: var(--text-primary);
font-size: 1.2rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

.search-page-back:hover {
background-color: var(--bg-tertiary);
}

.search-page-container {
display: flex;
gap: 20px;
flex: 1;
}

.search-page-main {
flex: 1;
}

.search-page-input-container {
position: relative;
margin-bottom: 30px;
}

#search-page-input {
width: 100%;
padding: 15px 20px;
border: 1px solid var(--border-color);
border-radius: 25px;
background-color: var(--bg-secondary);
color: var(--text-primary);
font-size: 1.1rem;
transition: all 0.2s var(--transition-function);
}

#search-page-input:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: none;
}

.search-page-icon {
position: absolute;
right: 20px;
top: 50%;
transform: translateY(-50%);
color: var(--text-primary);
opacity: 0.6;
font-size: 1.1rem;
}

#search-results {
display: flex;
flex-direction: column;
gap: 10px;
}

.search-page-sidebar {
width: 250px;
padding: 20px;
background-color: var(--bg-secondary);
border-radius: 12px;
border: 1px solid var(--border-color);
align-self: flex-start;
position: sticky;
top: 20px;
}

.search-page-sidebar h3 {
font-size: 1.1rem;
margin-bottom: 15px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
}

.example-searches {
display: flex;
flex-direction: column;
gap: 10px;
}

.example-search {
padding: 8px 12px;
background-color: var(--bg-tertiary);
border-radius: 15px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
font-size: 0.9rem;
display: flex;
align-items: center;
gap: 5px;
}

.example-search:hover {
background-color: var(--primary-color);
color: white;
}

.highlight {
background-color: rgba(29, 161, 242, 0.2);
padding: 0 2px;
border-radius: 3px;
}

body.black-mode .highlight {
background-color: rgba(74, 158, 255, 0.2);
}

body.eye-mode .highlight {
background-color: rgba(123, 167, 217, 0.2);
}

/* Podcasts Section */
#podcasts {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--border-color);
}

#podcasts h2 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
display: flex;
align-items: center;
gap: 10px;
}

#podcasts h2 i {
color: var(--primary-color);
}

.podcast-container {
margin-bottom: 30px;
width: 100%;
}

.podcast-container iframe {
width: 100%;
margin-bottom: 20px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

body.day-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

body.black-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.05);
}

body.eye-mode .podcast-container iframe {
box-shadow: 0 4px 12px rgba(255, 255, 255, 0.03);
}

/* Settings Section */
#settings {
background-color: var(--bg-secondary);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
display: none;
border: 1px solid var(--border-color);
}

#settings h2 {
font-size: 1.5rem;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 1px solid var(--border-color);
display: flex;
align-items: center;
gap: 10px;
}

#settings h2 i {
color: var(--primary-color);
}

.settings-section {
margin-bottom: 30px;
}

.settings-section h3 {
font-size: 1.2rem;
margin-bottom: 15px;
font-weight: 500;
}

.setting-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px;
background-color: var(--bg-tertiary);
border-radius: 10px;
margin-bottom: 15px;
transition: all 0.2s var(--transition-function);
}

.setting-item:hover {
transform: translateY(-2px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

body.day-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
}

body.eye-mode .setting-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
}

.setting-label {
display: flex;
flex-direction: column;
}

.setting-label span:first-child {
font-weight: 500;
margin-bottom: 5px;
}

.setting-label span:last-child {
font-size: 0.85rem;
opacity: 0.7;
}

.theme-mode-selection {
display: flex;
gap: 10px;
flex-wrap: wrap;
}

.theme-option {
padding: 10px 15px;
border: 2px solid var(--border-color);
border-radius: 10px;
cursor: pointer;
transition: all 0.2s var(--transition-function);
background-color: var(--bg-secondary);
color: var(--text-primary);
font-size: 0.9rem;
display: flex;
align-items: center;
gap: 8px;
min-width: 120px;
justify-content: center;
}

.theme-option.active {
border-color: var(--primary-color);
background-color: var(--primary-color);
color: white;
}

.theme-option:hover {
transform: translateY(-2px);
border-color: var(--primary-color);
}

.toggle-switch {
position: relative;
display: inline-block;
width: 50px;
height: 24px;
}

.toggle-switch input {
opacity: 0;
width: 0;
height: 0;
}

.toggle-slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: var(--border-color);
transition: .4s;
border-radius: 24px;
}

body.day-mode .toggle-slider {
background-color: #ccc;
}

.toggle-slider:before {
position: absolute;
content: "";
height: 18px;
width: 18px;
left: 3px;
bottom: 3px;
background-color: white;
transition: .4s;
border-radius: 50%;
}

input:checked + .toggle-slider {
background-color: var(--primary-color);
}

input:checked + .toggle-slider:before {
transform: translateX(26px);
}

.color-options {
display: flex;
gap: 10px;
flex-wrap: wrap;
}

.color-option {
width: 30px;
height: 30px;
border-radius: 50%;
cursor: pointer;
transition: transform 0.2s var(--transition-function);
position: relative;
}

.color-option:hover {
transform: scale(1.1);
}

.color-option.active::after {
content: '\f00c';
font-family: 'Font Awesome 5 Free';
font-weight: 900;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
color: white;
font-size: 14px;
text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
}

.font-size-control {
display: flex;
align-items: center;
gap: 15px;
}

.font-size-btn {
width: 36px;
height: 36px;
border-radius: 50%;
background-color: var(--bg-tertiary);
color: var(--text-primary);
border: none;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 1.2rem;
transition: all 0.2s var(--transition-function);
}

.font-size-btn:hover {
background-color: var(--primary-color);
color: white;
}

.font-size-value {
font-weight: 500;
min-width: 30px;
text-align: center;
}

.custom-select {
position: relative;
width: 100%;
}

.custom-select select {
width: 100%;
padding: 10px 15px;
border: 1px solid var(--border-color);
border-radius: 10px;
background-color: var(--bg-secondary);
color: var(--text-primary);
font-size: 0.95rem;
appearance: none;
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
background-repeat: no-repeat;
background-position: right 15px center;
background-size: 16px;
transition: all 0.2s var(--transition-function);
}

body.day-mode .custom-select select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%230f1419' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.black-mode .custom-select select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23e0e0e0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

body.eye-mode .custom-select select {
background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23d4d4d4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

.custom-select select:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: none;
}

.range-slider {
width: 100%;
margin: 10px 0;
}

.range-slider input {
width: 100%;
height: 5px;
border-radius: 5px;
background: var(--border-color);
outline: none;
-webkit-appearance: none;
}

.range-slider input::-webkit-slider-thumb {
-webkit-appearance: none;
appearance: none;
width: 18px;
height: 18px;
border-radius: 50%;
background: var(--primary-color);
cursor: pointer;
}

.range-slider input::-moz-range-thumb {
width: 18px;
height: 18px;
border-radius: 50%;
background: var(--primary-color);
cursor: pointer;
border: none;
}

.settings-btn {
padding: 12px 20px;
border: none;
border-radius: 10px;
background-color: var(--primary-color);
color: white;
font-size: 0.95rem;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
transition: background-color 0.2s var(--transition-function);
width: 100%;
margin-top: 10px;
}

.settings-btn:hover {
background-color: #1a91da;
}

body.black-mode .settings-btn:hover {
background-color: #3a8eff;
}

body.eye-mode .settings-btn:hover {
background-color: #6b9bd4;
}

footer {
padding: 15px 20px;
text-align: center;
font-size: 0.9rem;
color: var(--text-primary);
opacity: 0.8;
border-top: 1px solid var(--border-color);
margin-top: auto;
transition: all 0.3s var(--transition-function);
}

@keyframes loadingProgress {
0% { width: 0%; }
50% { width: 100%; }
100% { width: 0%; }
}

.bottom-nav {
position: fixed;
bottom: 20px;
left: 50%;
transform: translateX(-50%);
background-color: var(--bg-secondary);
border-radius: 30px;
padding: 5px;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
z-index: 50;
display: none;
}

body.day-mode .bottom-nav {
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

body.black-mode .bottom-nav {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
}

body.eye-mode .bottom-nav {
box-shadow: 0 5px 15px rgba(255, 255, 255, 0.05);
}

.bottom-nav-item {
display: flex;
align-items: center;
justify-content: center;
width: 50px;
height: 50px;
border-radius: 25px;
cursor: pointer;
transition: all 0.3s ease;
}

.bottom-nav-item:hover {
background-color: var(--bg-tertiary);
}

.bottom-nav-item.active {
background-color: var(--primary-color);
color: white;
}

.bottom-nav-item i {
font-size: 1.2rem;
}

.home-btn {
width: 60px;
height: 60px;
border-radius: 30px;
background-color: var(--primary-color);
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.5rem;
margin: 0 5px;
box-shadow: none;
transition: all 0.3s ease;
}

.home-btn:hover {
transform: translateY(-5px);
box-shadow: none;
}

@media (max-width: 768px) {
.sidebar {
display: none;
}

body:has(#search-page.active) .sidebar {
display: flex;
width: 50px;
z-index: 101;
}

body:has(#search-page.active) #search-page {
left: 50px;
width: calc(100% - 50px);
}

.main-content {
margin-left: 0;
}

.content {
padding: 15px;
padding-bottom: 80px;
}

.search-page-container {
flex-direction: column;
}

.search-page-sidebar {
width: 100%;
position: static;
margin-bottom: 20px;
}

.setting-item {
flex-direction: column;
align-items: flex-start;
gap: 15px;
}

.setting-item .setting-label {
margin-bottom: 10px;
}

.color-options {
justify-content: center;
}

.theme-mode-selection {
justify-content: center;
}

.bottom-nav {
display: flex;
}

#search-page {
left: 0;
width: 100%;
}

.author-sort-content {
width: 95%;
max-height: 90vh;
padding: 20px;
}

.author-sort-title {
font-size: 1.1rem;
}

.author-item {
padding: 12px;
}

.sort-actions {
flex-direction: column;
gap: 8px;
}

.sort-btn {
width: 100%;
}
}

@media (max-width: 480px) {
.header h1 {
font-size: 1rem;
}

.controls-row {
flex-direction: column;
}

#search, #author-select, #show-saved {
font-size: 0.9rem;
padding: 10px 15px;
}

.surah h2 {
font-size: 1rem;
}

#verse-panel h3, #saved-verses h2, #verse-detail-panel h3, #podcasts h2, #settings h2 {
font-size: 1.3rem;
}

.verse {
font-size: 0.9rem;
}

#verse-detail-panel .selected-translation {
font-size: 1rem;
padding: 15px;
}

#verse-detail-panel .other-translations div {
font-size: 0.9rem;
padding: 12px;
}

.settings-section h3 {
font-size: 1.1rem;
}
}

@media (min-width: 769px) {
.bottom-nav {
display: none;
}
}

@media (max-width: 768px) {
.bottom-nav {
display: flex;
}
}

.verse-link {
color: inherit;
text-decoration: none;
display: inline-block;
margin-right: 5px;
}

.verse-link:hover {
text-decoration: underline;
color: var(--primary-color);
}

.copy-url-btn {
background: none;
border: none;
color: var(--text-primary);
font-size: 1rem;
cursor: pointer;
padding: 8px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.2s var(--transition-function);
}

.copy-url-btn:hover {
background-color: var(--bg-tertiary);
color: var(--primary-color);
}

.arabic-text {
font-family: 'Amiri', 'Scheherazade New', serif;
direction: rtl;
text-align: right;
font-size: 1.5em;
line-height: 1.8;
margin-bottom: 15px;
padding: 15px;
background-color: var(--bg-tertiary);
border-radius: 12px;
border: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .arabic-text {
border: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .arabic-text {
border: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .arabic-text {
border: 1px solid rgba(255, 255, 255, 0.03);
}

.word-analysis {
margin-top: 20px;
border-top: 1px solid var(--border-color);
padding-top: 20px;
}

.word-analysis h4 {
font-size: 1.1rem;
margin-bottom: 15px;
color: var(--primary-color);
}

.word-list {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-bottom: 20px;
}

.word-item {
background-color: var(--bg-secondary);
border-radius: 8px;
padding: 10px;
border: 1px solid var(--border-color);
cursor: pointer;
transition: all 0.2s var(--transition-function);
min-width: 100px;
text-align: center;
}

.word-item:hover {
transform: translateY(-3px);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
border-color: var(--primary-color);
}

body.day-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
}

body.black-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.05);
}

body.eye-mode .word-item:hover {
box-shadow: 0 4px 8px rgba(255, 255, 255, 0.03);
}

.word-arabic {
font-family: 'Amiri', 'Scheherazade New', serif;
font-size: 1.3em;
margin-bottom: 5px;
direction: rtl;
}

.word-translation {
font-size: 0.85rem;
color: var(--text-primary);
opacity: 0.9;
}

.word-detail {
display: none;
background-color: var(--bg-tertiary);
border-radius: 10px;
padding: 15px;
margin-top: 10px;
border: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .word-detail {
border: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .word-detail {
border: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .word-detail {
border: 1px solid rgba(255, 255, 255, 0.03);
}

.word-detail.active {
display: block;
}

.word-detail-row {
display: flex;
margin-bottom: 8px;
align-items: flex-start;
}

.word-detail-label {
font-weight: 500;
min-width: 100px;
color: var(--primary-color);
}

.word-detail-value {
flex: 1;
}

.root-info {
margin-top: 10px;
padding-top: 10px;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .root-info {
border-top: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .root-info {
border-top: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .root-info {
border-top: 1px solid rgba(255, 255, 255, 0.03);
}

.transcription {
margin-bottom: 20px;
padding: 15px;
background-color: var(--bg-secondary);
border-radius: 12px;
border: 1px solid var(--border-color);
font-style: italic;
}

.transcription-label {
font-weight: 500;
color: var(--primary-color);
margin-right: 5px;
}

.other-occurrences {
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

body.day-mode .other-occurrences {
border-top: 1px solid rgba(0, 0, 0, 0.1);
}

body.black-mode .other-occurrences {
border-top: 1px solid rgba(255, 255, 255, 0.05);
}

body.eye-mode .other-occurrences {
border-top: 1px solid rgba(255, 255, 255, 0.03);
}

.occurrences-title {
font-size: 1.1rem;
margin-bottom: 10px;
color: var(--primary-color);
}

.word-occurrences {
display: flex;
flex-direction: column;
gap: 8px;
max-height: 200px;
overflow-y: auto;
}

.occurrence-item {
padding: 8px 12px;
background-color: var(--bg-tertiary);
border-radius: 8px;
transition: all 0.2s var(--transition-function);
}

.occurrence-item:hover {
background-color: var(--primary-color);
color: white;
}

.occurrence-link {
color: inherit;
text-decoration: none;
display: block;
width: 100%;
}

.loading-occurrences, .no-occurrences, .more-occurrences {
padding: 8px;
text-align: center;
font-style: italic;
opacity: 0.8;
}

.more-occurrences {
font-size: 0.9rem;
color: var(--primary-color);
}

.verse-section {
margin-bottom: 5px;
}

#main-search-results {
margin-top: 20px;
display: none;
}

#main-search-results.active {
display: block;
}

.verse-number-bg {
display: inline-block;
background-color: rgba(29, 161, 242, 0.15);
color: var(--primary-color);
font-weight: bold;
padding: 2px 6px;
border-radius: 4px;
margin-right: 8px;
min-width: 30px;
text-align: center;
}

body.day-mode .verse-number-bg {
background-color: rgba(29, 161, 242, 0.1);
}

body.black-mode .verse-number-bg {
background-color: rgba(74, 158, 255, 0.15);
}

body.eye-mode .verse-number-bg {
background-color: rgba(123, 167, 217, 0.15);
}

#verse-detail-panel {
scroll-behavior: smooth;
}

#verse-detail-panel .verse-content-container {
scroll-behavior: smooth;
}

html {
scroll-behavior: smooth;
}

.swipe-indicator {
position: fixed;
top: 50%;
transform: translateY(-50%);
background-color: rgba(29, 161, 242, 0.8);
color: white;
padding: 10px 15px;
border-radius: 25px;
font-size: 0.9rem;
z-index: 1000;
opacity: 0;
transition: opacity 0.3s ease;
pointer-events: none;
}

body.black-mode .swipe-indicator {
background-color: rgba(74, 158, 255, 0.8);
}

body.eye-mode .swipe-indicator {
background-color: rgba(123, 167, 217, 0.8);
}

.swipe-indicator.left {
left: 20px;
}

.swipe-indicator.right {
right: 20px;
}

.swipe-indicator.show {
opacity: 1;
}
</style>
</head>
<body>
<!-- Desktop Sidebar -->
<div class="sidebar">
<img src="sdc1.PNG" alt="Logo" class="sidebar-logo" />
<nav class="sidebar-nav">
<div class="nav-item active" id="home-nav-desktop">
<i class="fas fa-home"></i>
</div>
<div class="nav-item" id="search-nav-desktop">
<i class="fas fa-search"></i>
</div>
<div class="nav-item" id="saved-nav-desktop">
<i class="fas fa-bookmark"></i>
</div>
<div class="nav-item" id="meal-writers-nav-desktop">
<i class="fas fa-users"></i>
</div>
<div class="nav-item" id="podcasts-nav-desktop">
<i class="fas fa-podcast"></i>
</div>
<div class="nav-item" id="settings-nav-desktop">
<i class="fas fa-cog"></i>
</div>
</nav>
</div>

<div class="main-content">
<!-- Modern Header with Wire-frame Icons -->
<header class="header">
<div class="header-content">
<a href="#" class="logo" onclick="showHome()">SADECE KURAN</a>
<div class="header-actions">
<button class="search-btn" onclick="showSearch()">
<svg class="icon" viewBox="0 0 24 24">
<circle cx="11" cy="11" r="8"></circle>
<path d="m21 21-4.35-4.35"></path>
</svg>
</button>
<button class="saved-btn" onclick="showSavedVerses()">
<svg class="icon icon-sm" viewBox="0 0 24 24">
<path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
</svg>
<span>Kaydedilenler</span>
</button>
<button class="theme-btn" onclick="cycleTheme()">
<svg class="icon" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
</button>
</div>
</div>
</header>

<div class="content">
<div class="controls">
<div class="search-container">
<input type="text" id="search" placeholder="Sure, ayet veya kelime ara..." />
<i class="fas fa-search search-icon"></i>
</div>
<div class="controls-row">
<select id="author-select">
<option value="">Meal Seçin</option>
</select>
<button id="show-saved"><i class="fas fa-bookmark"></i> Kaydedilenler</button>
</div>
<div id="loading-bar">
<div class="progress"></div>
</div>
</div>

<div id="main-search-results"></div>

<div id="surahs"></div>

<div id="verse-panel">
<div class="verse-panel-header">
<div class="verse-panel-title">
<button id="close-panel"><i class="fas fa-arrow-left"></i></button>
<span id="panel-title"></span>
</div>
<div class="audio-controls">
<button id="surah-audio-btn" class="audio-btn" title="Sureyi dinle">
<i class="fas fa-play"></i>
</button>
</div>
</div>
<div id="verses"></div>
</div>

<div id="verse-detail-panel">
<h3>
<button id="back-btn" class="back-btn"><i class="fas fa-arrow-left"></i></button>
<span id="verse-detail-title"></span>
</h3>

<div class="verse-content-container">
<div class="verse-left-sidebar">
<div class="sidebar-title">
DİĞER MEALLER
<button class="sort-authors-btn" id="sort-authors-btn">
  <i class="fas fa-sort"></i> Sırala
</button>
</div>
<div id="other-translations" class="other-translations"></div>
</div>

<div class="verse-main-content">
<div class="verse-section">
<div id="selected-translation" class="selected-translation"></div>
</div>

<div class="verse-section">
<div id="arabic-text" class="arabic-text"></div>
</div>

<div class="verse-section">
<div class="transcription">
<span class="transcription-label">T.:</span>
<span id="transcription-tr"></span>
</div>
</div>

<div class="verse-navigation-buttons">
<div class="verse-navigation-audio">
<button id="verse-audio-btn" class="audio-btn" title="Ayeti dinle">
  <i class="fas fa-play"></i>
</button>
<button id="verse-detail-save-btn" class="verse-detail-save-btn" title="Kaydet">
  <i class="fas fa-bookmark"></i> 
</button>
<button id="verse-detail-share-btn" class="verse-detail-share-btn" title="Paylaş">
  <i class="fas fa-share-alt"></i> 
</button>
</div>
<div class="verse-detail-actions">
</div>
<button id="prev-verse-btn" class="nav-btn"><i class="fas fa-chevron-left"></i> </button>
<button id="next-verse-btn" class="nav-btn"> <i class="fas fa-chevron-right"></i></button>
</div>
</div>

<div class="verse-right-sidebar">
<h4 class="sidebar-title">KELİME ANALİZİ</h4>
<div class="word-analysis">
<div id="word-list" class="word-list"></div>
<div id="word-detail" class="word-detail"></div>
</div>
</div>
</div>

<div class="tab-container">
<div class="tab-buttons">
<div class="tab-header">
<button class="tab-button active" data-tab="other-translations">
MEALLER
</button>
<button class="sort-authors-btn" id="sort-authors-btn-mobile">
<i class="fas fa-sort"></i>
</button>
</div>
<button class="tab-button" data-tab="word-analysis">KELİME ANALİZİ</button>
</div>

<div class="tab-content active" id="other-translations-tab">
<div id="other-translations-mobile" class="other-translations"></div>
</div>

<div class="tab-content" id="word-analysis-tab">
<div class="word-analysis">
<div id="word-list-mobile" class="word-list"></div>
<div id="word-detail-mobile" class="word-detail"></div>
</div>
</div>
</div>
</div>

<div class="author-sort-panel" id="author-sort-panel">
<div class="author-sort-content">
<div class="author-sort-header">
<h3 class="author-sort-title">Meal Yazarları Sıralaması</h3>
<button class="close-sort-panel" id="close-sort-panel">
<i class="fas fa-times"></i>
</button>
</div>

<div class="author-list" id="author-list">
</div>

<div class="sort-actions">
<button class="sort-btn reset-sort-btn" id="reset-sort-btn">
<i class="fas fa-undo"></i> Sıfırla
</button>
<button class="sort-btn save-sort-btn" id="save-sort-btn">
<i class="fas fa-save"></i> Kaydet
</button>
</div>
</div>
</div>

<div id="saved-verses">
<h2><i class="fas fa-bookmark"></i> Kaydedilen Ayetler</h2>
<div id="saved-list"></div>
<button id="back-to-surahs"><i class="fas fa-arrow-left"></i> Surelere Dön</button>
</div>

<!-- Note Modal -->
<div class="note-modal" id="note-modal">
<div class="note-modal-content">
<div class="note-modal-header">
<h3 class="note-modal-title">Not Ekle/Düzenle</h3>
<button class="close-note-modal" id="close-note-modal">
<i class="fas fa-times"></i>
</button>
</div>

<div class="note-verse-preview" id="note-verse-preview">
<div class="note-verse-text" id="note-verse-text"></div>
<div class="note-verse-ref" id="note-verse-ref"></div>
</div>

<textarea class="note-textarea" id="note-textarea" placeholder="Notunuzu buraya yazın..."></textarea>

<div class="note-actions">
<button class="note-btn cancel-note-btn" id="cancel-note-btn">
<i class="fas fa-times"></i> İptal
</button>
<button class="note-btn save-note-btn" id="save-note-btn">
<i class="fas fa-save"></i> Kaydet
</button>
</div>
</div>
</div>

<div id="podcasts">
<h2><i class="fas fa-podcast"></i> Podcastler</h2>

<div class="podcast-container">
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/3RRKc1JEyzLSkBjfut5EwH?utm_source=generator" width="100%" height="156" title="Sadece Kuran Podcast" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>

</div>
</div>

<div id="settings">
<h2><i class="fas fa-cog"></i> Ayarlar</h2>

<div class="settings-section">
<h3>Görünüm</h3>

<div class="setting-item">
<div class="setting-label">
<span>Tema Modu</span>
<span>Karanlık, tam siyah, göz dostu veya açık tema seçin</span>
</div>
<div class="theme-mode-selection">
<div class="theme-option" data-theme="dark">
<i class="fas fa-moon"></i> Karanlık
</div>
<div class="theme-option" data-theme="black">
<i class="fas fa-circle"></i> Tam Siyah
</div>
<div class="theme-option" data-theme="eye">
<i class="fas fa-eye"></i> Göz Dostu
</div>
<div class="theme-option" data-theme="day">
<i class="fas fa-sun"></i> Açık
</div>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Tema Rengi</span>
<span>Uygulamanın vurgu rengini seçin</span>
</div>
<div class="color-options">
<div class="color-option active" style="background-color: #1da1f2;" data-color="#1da1f2"></div>
<div class="color-option" style="background-color: #4caf50;" data-color="#4caf50"></div>
<div class="color-option" style="background-color: #f44336;" data-color="#f44336"></div>
<div class="color-option" style="background-color: #9c27b0;" data-color="#9c27b0"></div>
<div class="color-option" style="background-color: #ff9800;" data-color="#ff9800"></div>
<div class="color-option" style="background-color: #7b7675;" data-color="#7b7675"></div>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Yazı Boyutu</span>
<span>Ayet metinlerinin boyutunu ayarlayın</span>
</div>
<div class="font-size-control">
<button class="font-size-btn" id="decrease-font"><i class="fas fa-minus"></i></button>
<span class="font-size-value" id="font-size-value">100%</span>
<button class="font-size-btn" id="increase-font"><i class="fas fa-plus"></i></button>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Ayet Numarası Stili</span>
<span>Ayet numaralarının görünümünü seçin</span>
</div>
<div class="custom-select">
<select id="verse-number-style">
<option value="default">Varsayılan</option>
<option value="bg" selected>Soluk Arka Plan</option>
<option value="bold">Kalın ve Renkli</option>
<option value="underline">Altı Çizgili</option>
</select>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Arapça Metin Görünümü</span>
<span>Arapça metin gösterim tercihini seçin</span>
</div>
<div class="custom-select">
<select id="arabic-display-mode">
<option value="always">Her Zaman Göster</option>
<option value="tab" selected>Sekme Olarak Göster</option>
<option value="never">Gösterme</option>
</select>
</div>
</div>
</div>

<div class="settings-section">
<h3>Okuma Ayarları</h3>

<div class="setting-item">
<div class="setting-label">
<span>Varsayılan Meal</span>
<span>Tercih ettiğiniz meali seçin</span>
</div>
<div class="custom-select">
<select id="default-author">
<option value="Mehmet Okuyan">Mehmet Okuyan</option>
<option value="Mustafa İslamoğlu">Mustafa İslamoğlu</option>
<option value="Yaşar Nuri Öztürk">Yaşar Nuri Öztürk</option>
<option value="Edip Yüksel">Edip Yüksel</option>
<option value="Diyanet Vakfı">Diyanet Vakfı</option>
</select>
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Otomatik Kaydırma</span>
<span>Uzun surelerde otomatik kaydırma</span>
</div>
<label class="toggle-switch">
<input type="checkbox" id="auto-scroll-toggle">
<span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Kaydırma Hızı</span>
<span>Otomatik kaydırma hızını ayarlayın</span>
</div>
<div class="range-slider">
<input type="range" min="1" max="10" value="5" id="scroll-speed">
</div>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Kelime Analizi</span>
<span>Ayet detayında kelime analizi göster</span>
</div>
<label class="toggle-switch">
<input type="checkbox" id="word-analysis-toggle" checked>
<span class="toggle-slider"></span>
</label>
</div>
</div>

<div class="settings-section">
<h3>Bildirimler</h3>

<div class="setting-item">
<div class="setting-label">
<span>Günlük Ayet Bildirimleri</span>
<span>Her gün rastgele bir ayet bildirimi alın</span>
</div>
<label class="toggle-switch">
<input type="checkbox" id="daily-verse-toggle">
<span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Bildirim Zamanı</span>
<span>Günlük ayet bildiriminin zamanını seçin</span>
</div>
<div class="custom-select">
<select id="notification-time">
  <option value="morning">Sabah (08:00)</option>
  <option value="noon">Öğle (12:00)</option>
  <option value="evening">Akşam (18:00)</option>
  <option value="night">Gece (21:00)</option>
</select>
</div>
</div>
</div>

<div class="settings-section">
<h3>Veri ve Gizlilik</h3>

<div class="setting-item">
<div class="setting-label">
<span>Çevrimdışı Kullanım</span>
<span>İnternetsiz kullanım için verileri kaydet</span>
</div>
<label class="toggle-switch">
<input type="checkbox" id="offline-toggle" checked>
<span class="toggle-slider"></span>
</label>
</div>

<div class="setting-item">
<div class="setting-label">
<span>Arama Geçmişi</span>
<span>Arama geçmişinizi kaydet</span>
</div>
<label class="toggle-switch">
<input type="checkbox" id="search-history-toggle" checked>
<span class="toggle-slider"></span>
</label>
</div>

<button class="settings-btn" id="clear-data-btn">
<i class="fas fa-trash-alt"></i> Tüm Verileri Temizle
</button>
</div>

<div class="settings-section">
<h3>Hakkında</h3>

<button class="settings-btn" id="app-btn">
<svg class="button-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
<path d="M6 18c0 .55.45 1 1 1h1v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h2v3.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h1c.55 0 1-.45 1-1V8H6v10zM3.5 8C2.67 8 2 8.67 2 9.5v7c0 .83.67 1.5 1.5 1.5S5 17.33 5 16.5v-7C5 8.67 4.33 8 3.5 8zm17 0c-.83 0-1.5.67-1.5 1.5v7c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-7c0-.83-.67-1.5-1.5-1.5zm-4.97-5.84l1.3-1.3c.2-.2.2-.51 0-.71-.2-.2-.51-.2-.71 0l-1.48 1.48C13.85 1.23 12.95 1 12 1c-.96 0-1.86.23-2.66.63L7.86 3.11c-.2.2-.2.51 0 .71.2.2.51.2.71 0l1.3-1.3C10.66 2.19 11.32 2 12 2c.68 0 1.34.19 1.91.54zM12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8z"/>
</svg> Mobil Uygulama İNDİR
</button>

<div class="setting-item">
<div class="setting-label">
<span>Uygulama Versiyonu</span>
<span>v1.3.0</span>
</div>
</div>

<button class="settings-btn" id="feedback-btn">
<i class="fas fa-comment-alt"></i> Geri Bildirim Gönder
</button>
</div>
</div>
</div>

<footer>
<p>© 2025 THE LENG | SADECE KURAN</p>
</footer>
</div>

<div id="search-page">
<div class="search-page-header">
<button class="search-page-back"><i class="fas fa-arrow-left"></i></button>
<h2>Arama</h2>
</div>

<div class="search-page-container">
<div class="search-page-main">
<div class="search-page-input-container">
<input type="text" id="search-page-input" placeholder="Sure, ayet veya kelime ara..." autofocus />
<i class="fas fa-search search-page-icon"></i>
</div>
<div id="search-results"></div>
</div>

<div class="search-page-sidebar">
<h3>Örnek Aramalar</h3>
<div class="example-searches">
<div class="example-search"><i class="fas fa-hashtag"></i> islam</div>
<div class="example-search"><i class="fas fa-hashtag"></i> iman</div>
<div class="example-search"><i class="fas fa-hashtag"></i> rahmet</div>
<div class="example-search"><i class="fas fa-hashtag"></i> tevhid</div>
<div class="example-search"><i class="fas fa-hashtag"></i> sabır</div>
<div class="example-search"><i class="fas fa-hashtag"></i> şükür</div>
<div class="example-search"><i class="fas fa-hashtag"></i> dua</div>
<div class="example-search"><i class="fas fa-hashtag"></i> namaz</div>
</div>
</div>
</div>
</div>

<div class="bottom-nav">
<div class="bottom-nav-item active" id="home-nav">
<i class="fas fa-home"></i>
</div>
<div class="bottom-nav-item" id="search-nav">
<i class="fas fa-search"></i>
</div>
<div class="home-btn" id="home-btn">
<i class="fas fa-book-open"></i>
</div>
<div class="bottom-nav-item" id="saved-nav">
<i class="fas fa-bookmark"></i>
</div>
<div class="bottom-nav-item" id="settings-nav">
<i class="fas fa-cog"></i>
</div>
</div>

<div class="audio-player" id="audio-player">
<div class="audio-player-content">
<div class="audio-info">
<div class="audio-title" id="audio-title">Sure Adı</div>
<div class="audio-subtitle" id="audio-subtitle">Sesli Kuran</div>
</div>

<div class="audio-controls-main">
<button class="audio-control-btn" id="audio-prev-btn" title="Önceki Sure">
<i class="fas fa-step-backward"></i>
</button>
<button class="audio-control-btn audio-play-btn" id="audio-play-pause-btn" title="Oynat/Duraklat">
<i class="fas fa-play"></i>
</button>
<button class="audio-control-btn" id="audio-next-btn" title="Sonraki Sure">
<i class="fas fa-step-forward"></i>
</button>
</div>

<div class="audio-progress-container">
<div class="audio-progress" id="audio-progress">
<div class="audio-progress-bar" id="audio-progress-bar"></div>
</div>
<div class="audio-time">
<span id="audio-current-time">0:00</span>
<span id="audio-duration">0:00</span>
</div>
</div>

<div class="audio-volume">
<button class="audio-control-btn" id="audio-volume-btn" title="Ses">
<i class="fas fa-volume-up"></i>
</button>
<input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="100">
</div>

<button class="audio-control-btn audio-close-btn" id="audio-close-btn" title="Kapat">
<i class="fas fa-times"></i>
</button>
</div>
</div>

<div class="swipe-indicator left" id="swipe-left">
<i class="fas fa-chevron-left"></i>
</div>
<div class="swipe-indicator right" id="swipe-right">  <i class="fas fa-chevron-right"></i>
</div>

<audio id="audio-element" preload="none"></audio>

<script>
let quranData = [];
let jsonData = {};
let allSurahsData = null;
let selectedAuthor = "Mehmet Okuyan";
const totalSurahs = 114;
let verseNumberStyle = localStorage.getItem("verseNumberStyle") || "bg";
let arabicDisplayMode = localStorage.getItem("arabicDisplayMode") || "tab";
let showWordAnalysis = localStorage.getItem("showWordAnalysis") !== "false";
let dataLoaded = false;

let currentSurahIndex = 0;
let currentVerseIndex = 0;

let audioElement = null;
let audioPlayer = null;
let currentAudioSurah = null;
let isAudioPlaying = false;
let currentAudioTime = 0;
let audioDuration = 0;
let audioVolume = 1;

let touchStartX = 0;
let touchStartY = 0;
let touchEndX = 0;
let touchEndY = 0;
let isSwipeDetected = false;
let isInVerseDetailPanel = false;

let isScrolling = false;
let scrollTimeout = null;
let lastScrollY = 0;
let scrollThreshold = 10;

let longPressTimer = null;
let isLongPress = false;
let longPressTarget = null;

let authorOrder = JSON.parse(localStorage.getItem("authorOrder") || "[]");
let originalAuthorOrder = [];

let notificationPermissionGranted = false;

// Note editing variables
let currentEditingVerse = null;

// Current verse detail variables
let currentDetailVerse = null;

const surahNames = {
1: "Fatiha", 2: "Bakara", 3: "Al-i Imran", 4: "Nisa", 5: "Maide", 6: "Enam", 7: "Araf", 8: "Enfal", 9: "Tevbe", 10: "Yunus",
11: "Hud", 12: "Yusuf", 13: "Rad", 14: "Ibrahim", 15: "Hicr", 16: "Nahl", 17: "Isra", 18: "Kehf", 19: "Meryem", 20: "Ta-Ha",
21: "Enbiya", 22: "Hac", 23: "Muminun", 24: "Nur", 25: "Furkan", 26: "Suara", 27: "Neml", 28: "Kasas", 29: "Ankebut", 30: "Rum",
31: "Lokman", 32: "Secde", 33: "Ahzab", 34: "Sebe", 35: "Fatir", 36: "Yasin", 37: "Saffat", 38: "Sad", 39: "Zumer", 40: "Mumin",
41: "Fussilet", 42: "Sura", 43: "Zuhruf", 44: "Duhan", 45: "Casiye", 46: "Ahkaf", 47: "Muhammed", 48: "Fetih", 49: "Hucurat", 50: "Kaf",
51: "Zariyat", 52: "Tur", 53: "Necm", 54: "Kamer", 55: "Rahman", 56: "Vakia", 57: "Hadid", 58: "Mucadele", 59: "Hasr", 60: "Mumtehine",
61: "Saf", 62: "Cuma", 63: "Munafikun", 64: "Tegabun", 65: "Talak", 66: "Tahrim", 67: "Mulk", 68: "Kalem", 69: "Hakka", 70: "Mearic",
71: "Nuh", 72: "Cin", 73: "Muzzemmil", 74: "Muddessir", 75: "Kiyame", 76: "Insan", 77: "Murselat", 78: "Nebe", 79: "Naziat", 80: "Abese",
81: "Tekvir", 82: "Infitar", 83: "Mutaffifin", 84: "Insikak", 85: "Buruc", 86: "Tarik", 87: "Ala", 88: "Gasiye", 89: "Fecr", 90: "Beled",
91: "Sems", 92: "Leyl", 93: "Duha", 94: "Insirah", 95: "Tin", 96: "Alak", 97: "Kadr", 98: "Beyyine", 99: "Zilzal", 100: "Adiyat",
101: "Karia", 102: "Tekasur", 103: "Asr", 104: "Humeze", 105: "Fil", 106: "Kureys", 107: "Maun", 108: "Kevser", 109: "Kafirun", 110: "Nasr",
111: "Tebbet", 112: "Ihlas", 113: "Felak", 114: "Nas"
};

let currentTheme = localStorage.getItem("currentTheme") || "dark";
let highlightColor = localStorage.getItem("highlightColor") || "#1da1f2";
let fontSize = parseInt(localStorage.getItem("fontSize") || "100");
let defaultAuthor = localStorage.getItem("defaultAuthor") || "Mehmet Okuyan";
let autoScroll = localStorage.getItem("autoScroll") === "true";
let scrollSpeed = parseInt(localStorage.getItem("scrollSpeed") || "5");
let dailyVerse = localStorage.getItem("dailyVerse") === "true";
let notificationTime = localStorage.getItem("notificationTime") || "morning";
let offlineMode = localStorage.getItem("offlineMode") !== "false";
let searchHistory = localStorage.getItem("searchHistory") !== "false";

let currentSurahId = 0;
let currentVerseId = 0;

function initializeAudio() {
audioElement = document.getElementById('audio-element');
audioPlayer = document.getElementById('audio-player');

if (!audioElement) {
audioElement = document.createElement('audio');
audioElement.id = 'audio-element';
audioElement.preload = 'none';
document.body.appendChild(audioElement);
}

audioElement.addEventListener('loadedmetadata', () => {
audioDuration = audioElement.duration;
updateAudioTime();
});

audioElement.addEventListener('timeupdate', () => {
currentAudioTime = audioElement.currentTime;
updateAudioProgress();
updateAudioTime();
});

audioElement.addEventListener('ended', () => {
stopAudio();
if (currentAudioSurah < totalSurahs) {
setTimeout(() => {
playAudio(currentAudioSurah + 1);
}, 1000);
}
});

audioElement.addEventListener('error', (e) => {
console.error('Audio error:', e);
showNotification('Ses dosyası yüklenemedi', 'error');
stopAudio();
});

audioElement.addEventListener('loadstart', () => {

});

audioElement.addEventListener('canplay', () => {
hideAudioLoading();
});

setupAudioPlayerControls();
}

function setupAudioPlayerControls() {
const playPauseBtn = document.getElementById('audio-play-pause-btn');
const prevBtn = document.getElementById('audio-prev-btn');
const nextBtn = document.getElementById('audio-next-btn');
const closeBtn = document.getElementById('audio-close-btn');
const volumeBtn = document.getElementById('audio-volume-btn');
const volumeSlider = document.getElementById('volume-slider');
const progressBar = document.getElementById('audio-progress');

if (playPauseBtn) {
playPauseBtn.addEventListener('click', toggleAudioPlayPause);
}

if (prevBtn) {
prevBtn.addEventListener('click', () => {
if (currentAudioSurah > 1) {
playAudio(currentAudioSurah - 1);
}
});
}

if (nextBtn) {
nextBtn.addEventListener('click', () => {
if (currentAudioSurah < totalSurahs) {
playAudio(currentAudioSurah + 1);
}
});
}

if (closeBtn) {
closeBtn.addEventListener('click', () => {
stopAudio();
hideAudioPlayer();
});
}

if (volumeBtn) {
volumeBtn.addEventListener('click', toggleMute);
}

if (volumeSlider) {
volumeSlider.addEventListener('input', (e) => {
const volume = e.target.value / 100;
setAudioVolume(volume);
});
}

if (progressBar) {
progressBar.addEventListener('click', (e) => {
const rect = progressBar.getBoundingClientRect();
const clickX = e.clientX - rect.left;
const percentage = clickX / rect.width;
seekAudio(percentage);
});
}
}

function playAudio(surahId) {
if (isAudioPlaying && currentAudioSurah === surahId) {
toggleAudioPlayPause();
return;
}

stopAudio();

const audioUrl = `https://api.sadecekuran.com.tr/${surahId}.mp3`;
audioElement.src = audioUrl;
currentAudioSurah = surahId;

updateAudioPlayerInfo(surahId);
showAudioPlayer();

audioElement.play().then(() => {
isAudioPlaying = true;
updateAudioButtons();
updateAudioPlayerButtons();
document.body.classList.add('audio-playing');
}).catch((error) => {
console.error('Audio play error:', error);
showNotification('Ses dosyası çalınamadı', 'error');
stopAudio();
hideAudioPlayer();
});
}

function stopAudio() {
if (audioElement) {
audioElement.pause();
audioElement.currentTime = 0;
}
isAudioPlaying = false;
currentAudioSurah = null;
currentAudioTime = 0;
updateAudioButtons();
updateAudioPlayerButtons();
document.body.classList.remove('audio-playing');
}

function toggleAudioPlayPause() {
if (!audioElement || !currentAudioSurah) return;

if (isAudioPlaying) {
audioElement.pause();
isAudioPlaying = false;
} else {
audioElement.play().then(() => {
isAudioPlaying = true;
}).catch((error) => {
console.error('Audio play error:', error);
showNotification('Ses dosyası çalınamadı', 'error');
});
}

updateAudioButtons();
updateAudioPlayerButtons();
}

function setAudioVolume(volume) {
audioVolume = Math.max(0, Math.min(1, volume));
if (audioElement) {
audioElement.volume = audioVolume;
}

const volumeSlider = document.getElementById('volume-slider');
if (volumeSlider) {
volumeSlider.value = audioVolume * 100;
}

updateVolumeIcon();
}

function toggleMute() {
if (audioVolume > 0) {
setAudioVolume(0);
} else {
setAudioVolume(1);
}
}

function seekAudio(percentage) {
if (audioElement && audioDuration) {
const newTime = audioDuration * percentage;
audioElement.currentTime = newTime;
currentAudioTime = newTime;
updateAudioProgress();
updateAudioTime();
}
}

function updateAudioProgress() {
if (audioDuration > 0) {
const percentage = (currentAudioTime / audioDuration) * 100;
const progressBar = document.getElementById('audio-progress-bar');
if (progressBar) {
progressBar.style.width = percentage + '%';
}
}
}

function updateAudioTime() {
const currentTimeEl = document.getElementById('audio-current-time');
const durationEl = document.getElementById('audio-duration');

if (currentTimeEl) {
currentTimeEl.textContent = formatTime(currentAudioTime);
}

if (durationEl) {
durationEl.textContent = formatTime(audioDuration);
}
}

function formatTime(seconds) {
if (isNaN(seconds) || seconds < 0) return '0:00';

const minutes = Math.floor(seconds / 60);
const remainingSeconds = Math.floor(seconds % 60);
return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
}

function updateAudioPlayerInfo(surahId) {
const titleEl = document.getElementById('audio-title');
const subtitleEl = document.getElementById('audio-subtitle');

if (titleEl) {
titleEl.textContent = `${surahId}. ${surahNames[surahId]}`;
}

if (subtitleEl) {
subtitleEl.textContent = 'Sesli Kuran';
}
}

function showAudioPlayer() {
if (audioPlayer) {
audioPlayer.classList.add('active');
}
}

function hideAudioPlayer() {
if (audioPlayer) {
audioPlayer.classList.remove('active');
}
document.body.classList.remove('audio-playing');
}

function updateAudioButtons() {
const audioButtons = document.querySelectorAll('.audio-btn');
audioButtons.forEach(btn => {
const icon = btn.querySelector('i');
if (btn.dataset.surahId == currentAudioSurah && isAudioPlaying) {
btn.classList.add('playing');
if (icon) icon.className = 'fas fa-pause';
} else {
btn.classList.remove('playing');
if (icon) icon.className = 'fas fa-play';
}
});
}

function updateAudioPlayerButtons() {
const playPauseBtn = document.getElementById('audio-play-pause-btn');
if (playPauseBtn) {
const icon = playPauseBtn.querySelector('i');
if (icon) {
icon.className = isAudioPlaying ? 'fas fa-pause' : 'fas fa-play';
}
}
}

function updateVolumeIcon() {
const volumeBtn = document.getElementById('audio-volume-btn');
if (volumeBtn) {
const icon = volumeBtn.querySelector('i');
if (icon) {
if (audioVolume === 0) {
icon.className = 'fas fa-volume-mute';
} else if (audioVolume < 0.5) {
icon.className = 'fas fa-volume-down';
} else {
icon.className = 'fas fa-volume-up';
}
}
}
}

function showAudioLoading() {
// Audio loading indicator implementation
}

function hideAudioLoading() {
// Hide audio loading indicator implementation
}

// Initialize audio when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
initializeAudio();
});

// Theme Management
function applyTheme(theme) {
document.body.className = '';
if (theme !== 'dark') {
document.body.classList.add(theme + '-mode');
}

const themeOptions = document.querySelectorAll('.theme-option');
themeOptions.forEach(option => {
option.classList.remove('active');
if (option.dataset.theme === theme) {
option.classList.add('active');
}
});

currentTheme = theme;
localStorage.setItem('currentTheme', theme);
}

function cycleTheme() {
const themes = ['dark', 'black', 'eye', 'day'];
const currentIndex = themes.indexOf(currentTheme);
const nextIndex = (currentIndex + 1) % themes.length;
applyTheme(themes[nextIndex]);
}

function applyHighlightColor(color) {
const root = document.documentElement;
root.style.setProperty('--highlight-dark', color);
root.style.setProperty('--highlight-black', color);
root.style.setProperty('--highlight-eye', color);
root.style.setProperty('--highlight-light', color);

const colorOptions = document.querySelectorAll('.color-option');
colorOptions.forEach(option => {
option.classList.remove('active');
if (option.dataset.color === color) {
option.classList.add('active');
}
});

highlightColor = color;
localStorage.setItem('highlightColor', color);
}

function applyFontSize(size) {
const root = document.documentElement;
root.style.setProperty('--verse-font-size', size + '%');

const fontSizeValue = document.getElementById('font-size-value');
if (fontSizeValue) {
fontSizeValue.textContent = size + '%';
}

fontSize = size;
localStorage.setItem('fontSize', size.toString());
}

function increaseFontSize() {
const newSize = Math.min(fontSize + 10, 200);
applyFontSize(newSize);
}

function decreaseFontSize() {
const newSize = Math.max(fontSize - 10, 50);
applyFontSize(newSize);
}

// Data Loading
async function loadQuranData() {
if (dataLoaded) return;

try {
showLoading();

const response = await fetch('https://api.sadecekuran.com.tr/kuran.json');
if (!response.ok) {
throw new Error(`HTTP error! status: ${response.status}`);
}

const data = await response.json();
quranData = data;

const jsonResponse = await fetch('https://api.sadecekuran.com.tr/kuran2.json');
if (!jsonResponse.ok) {
throw new Error(`HTTP error! status: ${jsonResponse.status}`);
}

jsonData = await jsonResponse.json();

dataLoaded = true;
hideLoading();

populateAuthorSelect();
displaySurahs();

} catch (error) {
console.error('Error loading Quran data:', error);
hideLoading();
showNotification('Veri yüklenirken hata oluştu. Lütfen internet bağlantınızı kontrol edin.', 'error');
}
}

function showLoading() {
const loadingBar = document.getElementById('loading-bar');
if (loadingBar) {
loadingBar.style.display = 'block';
}
}

function hideLoading() {
const loadingBar = document.getElementById('loading-bar');
if (loadingBar) {
loadingBar.style.display = 'none';
}
}

function populateAuthorSelect() {
const authorSelect = document.getElementById('author-select');
if (!authorSelect || !quranData.length) return;

const authors = [...new Set(quranData.map(item => item.author))];

// Apply saved author order or use default
if (authorOrder.length === 0) {
originalAuthorOrder = [...authors];
authorOrder = [...authors];
} else {
// Ensure all authors are in the order array
authors.forEach(author => {
if (!authorOrder.includes(author)) {
authorOrder.push(author);
}
});
}

authorSelect.innerHTML = '<option value="">Meal Seçin</option>';

authorOrder.forEach(author => {
if (authors.includes(author)) {
const option = document.createElement('option');
option.value = author;
option.textContent = author;
authorSelect.appendChild(option);
}
});

// Set default author
if (defaultAuthor && authors.includes(defaultAuthor)) {
authorSelect.value = defaultAuthor;
selectedAuthor = defaultAuthor;
}
}

function displaySurahs() {
const surahsContainer = document.getElementById('surahs');
if (!surahsContainer) return;

surahsContainer.innerHTML = '';

for (let i = 1; i <= totalSurahs; i++) {
const surahDiv = document.createElement('div');
surahDiv.className = 'surah';
surahDiv.innerHTML = `
<h2>${i}. ${surahNames[i]}</h2>
<div class="surah-audio-controls">
<button class="audio-btn" data-surah-id="${i}" onclick="playAudio(${i})" title="Sureyi dinle">
<i class="fas fa-play"></i>
</button>
</div>
`;

surahDiv.addEventListener('click', (e) => {
if (!e.target.closest('.surah-audio-controls')) {
showSurah(i);
}
});

surahsContainer.appendChild(surahDiv);
}
}

function showSurah(surahId) {
currentSurahId = surahId;
const surahData = quranData.filter(item => item.sura === surahId);

if (surahData.length === 0) {
showNotification('Sure bulunamadı', 'error');
return;
}

const versePanel = document.getElementById('verse-panel');
const versesContainer = document.getElementById('verses');
const panelTitle = document.getElementById('panel-title');
const surahAudioBtn = document.getElementById('surah-audio-btn');

if (!versePanel || !versesContainer || !panelTitle) return;

panelTitle.textContent = `${surahId}. ${surahNames[surahId]}`;

if (surahAudioBtn) {
surahAudioBtn.dataset.surahId = surahId;
surahAudioBtn.onclick = () => playAudio(surahId);
}

versesContainer.innerHTML = '';

const verses = {};
surahData.forEach(item => {
if (!verses[item.ayet]) {
verses[item.ayet] = {};
}
verses[item.ayet][item.author] = item.meal;
});

Object.keys(verses).sort((a, b) => parseInt(a) - parseInt(b)).forEach(verseNum => {
const verseDiv = document.createElement('div');
verseDiv.className = 'verse';

const verseText = selectedAuthor && verses[verseNum][selectedAuthor] 
? verses[verseNum][selectedAuthor] 
: Object.values(verses[verseNum])[0];

const verseNumberHtml = getVerseNumberHtml(verseNum);

verseDiv.innerHTML = `
<div class="verse-content">
<span class="verse-link" onclick="showVerseDetail(${surahId}, ${verseNum})">
${verseNumberHtml}${verseText}
</span>
</div>
<div class="verse-actions">
<button class="save-btn" onclick="toggleSaveVerse(${surahId}, ${verseNum})" title="Kaydet">
<i class="fas fa-bookmark"></i>
</button>
<button class="share-btn" onclick="shareVerse(${surahId}, ${verseNum})" title="Paylaş">
<i class="fas fa-share-alt"></i>
</button>
</div>
`;

// Check if verse is saved
if (isVerseSaved(surahId, verseNum)) {
verseDiv.querySelector('.save-btn').classList.add('active');
}

versesContainer.appendChild(verseDiv);
});

versePanel.classList.add('active');
hideOtherSections();
scrollToTop();
}

function getVerseNumberHtml(verseNum) {
switch (verseNumberStyle) {
case 'bg':
return `<span class="verse-number-bg">${verseNum}</span>`;
case 'bold':
return `<strong style="color: var(--highlight-dark);">${verseNum}.</strong> `;
case 'underline':
return `<span style="text-decoration: underline; color: var(--highlight-dark);">${verseNum}.</span> `;
default:
return `${verseNum}. `;
}
}

function showVerseDetail(surahId, verseId) {
currentSurahId = surahId;
currentVerseId = verseId;
currentDetailVerse = { surah: surahId, verse: verseId };

const verseDetailPanel = document.getElementById('verse-detail-panel');
const verseDetailTitle = document.getElementById('verse-detail-title');
const selectedTranslation = document.getElementById('selected-translation');
const arabicText = document.getElementById('arabic-text');
const transcriptionTr = document.getElementById('transcription-tr');
const otherTranslations = document.getElementById('other-translations');
const otherTranslationsMobile = document.getElementById('other-translations-mobile');

if (!verseDetailPanel) return;

verseDetailTitle.textContent = `${surahNames[surahId]} ${verseId}`;

// Get verse data
const verseData = quranData.filter(item => item.sura === surahId && item.ayet === verseId);
const jsonVerseData = jsonData.find(item => item.sura === surahId && item.ayet === verseId);

if (verseData.length === 0) {
showNotification('Ayet bulunamadı', 'error');
return;
}

// Show selected translation
const selectedVerseData = verseData.find(item => item.author === selectedAuthor) || verseData[0];
selectedTranslation.textContent = selectedVerseData.meal;

// Show Arabic text if enabled
if (arabicDisplayMode === 'always') {
if (jsonVerseData && jsonVerseData.arabic) {
arabicText.textContent = jsonVerseData.arabic;
arabicText.style.display = 'block';
} else {
arabicText.style.display = 'none';
}
} else {
arabicText.style.display = 'none';
}

// Show transcription
if (jsonVerseData && jsonVerseData.transcription) {
transcriptionTr.textContent = jsonVerseData.transcription;
} else {
transcriptionTr.textContent = 'Transkripsiyon mevcut değil';
}

// Show other translations
displayOtherTranslations(verseData, selectedAuthor, otherTranslations);
displayOtherTranslations(verseData, selectedAuthor, otherTranslationsMobile);

// Show word analysis if enabled
if (showWordAnalysis && jsonVerseData) {
displayWordAnalysis(jsonVerseData);
}

// Update save button state
updateVerseDetailSaveButton(surahId, verseId);

// Setup navigation buttons
setupVerseNavigation(surahId, verseId);

// Setup audio button
setupVerseAudio(surahId, verseId);

verseDetailPanel.classList.add('active');
hideOtherSections();
scrollToTop();

isInVerseDetailPanel = true;
}

function displayOtherTranslations(verseData, selectedAuthor, container) {
if (!container) return;

container.innerHTML = '';

// Sort translations according to author order
const sortedVerseData = [...verseData].sort((a, b) => {
const indexA = authorOrder.indexOf(a.author);
const indexB = authorOrder.indexOf(b.author);
return indexA - indexB;
});

sortedVerseData.forEach(item => {
if (item.author !== selectedAuthor) {
const translationDiv = document.createElement('div');
translationDiv.className = 'translation-item';
translationDiv.innerHTML = `
<div class="floating-label">${item.author}</div>
<div class="translation-text">${item.meal}</div>
`;
container.appendChild(translationDiv);
}
});
}

function displayWordAnalysis(verseData) {
const wordList = document.getElementById('word-list');
const wordListMobile = document.getElementById('word-list-mobile');

if (!wordList || !verseData.words) return;

const words = verseData.words;

[wordList, wordListMobile].forEach(container => {
if (!container) return;

container.innerHTML = '';

words.forEach((word, index) => {
const wordDiv = document.createElement('div');
wordDiv.className = 'word-item';
wordDiv.innerHTML = `
<div class="word-arabic">${word.arabic || ''}</div>
<div class="word-translation">${word.translation || ''}</div>
`;

wordDiv.addEventListener('click', () => {
showWordDetail(word, index, container.parentElement);
});

container.appendChild(wordDiv);
});
});
}

function showWordDetail(word, index, parentContainer) {
const wordDetail = parentContainer.querySelector('.word-detail');
if (!wordDetail) return;

wordDetail.innerHTML = `
<div class="word-detail-row">
<span class="word-detail-label">Arapça:</span>
<span class="word-detail-value">${word.arabic || 'N/A'}</span>
</div>
<div class="word-detail-row">
<span class="word-detail-label">Çeviri:</span>
<span class="word-detail-value">${word.translation || 'N/A'}</span>
</div>
<div class="word-detail-row">
<span class="word-detail-label">Kök:</span>
<span class="word-detail-value">${word.root || 'N/A'}</span>
</div>
<div class="word-detail-row">
<span class="word-detail-label">Tür:</span>
<span class="word-detail-value">${word.type || 'N/A'}</span>
</div>
`;

wordDetail.classList.add('active');
}

function setupVerseNavigation(surahId, verseId) {
const prevBtn = document.getElementById('prev-verse-btn');
const nextBtn = document.getElementById('next-verse-btn');

if (prevBtn) {
prevBtn.onclick = () => navigateVerse(surahId, verseId, -1);
}

if (nextBtn) {
nextBtn.onclick = () => navigateVerse(surahId, verseId, 1);
}
}

function navigateVerse(surahId, verseId, direction) {
const surahData = quranData.filter(item => item.sura === surahId);
const verses = [...new Set(surahData.map(item => item.ayet))].sort((a, b) => a - b);

const currentIndex = verses.indexOf(verseId);
let newIndex = currentIndex + direction;

let newSurahId = surahId;
let newVerseId = verseId;

if (newIndex < 0) {
// Go to previous surah's last verse
if (surahId > 1) {
newSurahId = surahId - 1;
const prevSurahData = quranData.filter(item => item.sura === newSurahId);
const prevVerses = [...new Set(prevSurahData.map(item => item.ayet))].sort((a, b) => a - b);
newVerseId = prevVerses[prevVerses.length - 1];
} else {
return; // Already at the first verse of the first surah
}
} else if (newIndex >= verses.length) {
// Go to next surah's first verse
if (surahId < totalSurahs) {
newSurahId = surahId + 1;
newVerseId = 1;
} else {
return; // Already at the last verse of the last surah
}
} else {
newVerseId = verses[newIndex];
}

showVerseDetail(newSurahId, newVerseId);
}

function setupVerseAudio(surahId, verseId) {
const verseAudioBtn = document.getElementById('verse-audio-btn');
if (verseAudioBtn) {
verseAudioBtn.onclick = () => {
// For now, play the entire surah
playAudio(surahId);
};
}
}

function updateVerseDetailSaveButton(surahId, verseId) {
const saveBtn = document.getElementById('verse-detail-save-btn');
if (saveBtn) {
if (isVerseSaved(surahId, verseId)) {
saveBtn.classList.add('active');
} else {
saveBtn.classList.remove('active');
}

saveBtn.onclick = () => toggleSaveVerse(surahId, verseId);
}
}

// Search functionality
function performSearch(query) {
if (!query.trim()) {
clearSearchResults();
return;
}

const results = [];
const searchTerms = query.toLowerCase().split(' ').filter(term => term.length > 0);

quranData.forEach(item => {
const mealText = item.meal.toLowerCase();
const isMatch = searchTerms.every(term => mealText.includes(term));

if (isMatch) {
results.push(item);
}
});

displaySearchResults(results, query);
}

function displaySearchResults(results, query) {
const searchResults = document.getElementById('search-results');
const mainSearchResults = document.getElementById('main-search-results');

[searchResults, mainSearchResults].forEach(container => {
if (!container) return;

container.innerHTML = '';

if (results.length === 0) {
container.innerHTML = '<div class="no-results">Sonuç bulunamadı</div>';
return;
}

results.slice(0, 50).forEach(result => {
const resultDiv = document.createElement('div');
resultDiv.className = 'verse-result';

const highlightedText = highlightSearchTerms(result.meal, query);
const verseNumberHtml = getVerseNumberHtml(result.ayet);

resultDiv.innerHTML = `
<div class="verse-content">
<div class="verse-reference">${result.sura}. ${surahNames[result.sura]} - ${result.ayet}</div>
<div class="verse-text">${verseNumberHtml}${highlightedText}</div>
<div class="verse-author">${result.author}</div>
</div>
`;

resultDiv.addEventListener('click', () => {
showVerseDetail(result.sura, result.ayet);
hideSearchPage();
});

container.appendChild(resultDiv);
});

if (results.length > 50) {
const moreDiv = document.createElement('div');
moreDiv.className = 'more-results';
moreDiv.textContent = `${results.length - 50} daha fazla sonuç...`;
container.appendChild(moreDiv);
}
});

// Show main search results if we're on the main page
if (mainSearchResults) {
mainSearchResults.classList.add('active');
}
}

function highlightSearchTerms(text, query) {
const searchTerms = query.toLowerCase().split(' ').filter(term => term.length > 0);
let highlightedText = text;

searchTerms.forEach(term => {
const regex = new RegExp(`(${escapeRegExp(term)})`, 'gi');
highlightedText = highlightedText.replace(regex, '<span class="highlight">$1</span>');
});

return highlightedText;
}

function escapeRegExp(string) {
return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function clearSearchResults() {
const searchResults = document.getElementById('search-results');
const mainSearchResults = document.getElementById('main-search-results');

if (searchResults) {
searchResults.innerHTML = '';
}

if (mainSearchResults) {
mainSearchResults.innerHTML = '';
mainSearchResults.classList.remove('active');
}
}

// Saved verses functionality
function toggleSaveVerse(surahId, verseId) {
const savedVerses = getSavedVerses();
const verseKey = `${surahId}-${verseId}`;

if (savedVerses[verseKey]) {
delete savedVerses[verseKey];
showNotification('Ayet kaydedilenlerde kaldırıldı', 'success');
} else {
const verseData = quranData.find(item => item.sura === surahId && item.ayet === verseId && item.author === selectedAuthor);
if (verseData) {
savedVerses[verseKey] = {
surah: surahId,
verse: verseId,
text: verseData.meal,
author: verseData.author,
date: new Date().toISOString(),
note: ''
};
showNotification('Ayet kaydedilenlere eklendi', 'success');
}
}

localStorage.setItem('savedVerses', JSON.stringify(savedVerses));
updateSaveButtons();
updateVerseDetailSaveButton(surahId, verseId);
}

function getSavedVerses() {
return JSON.parse(localStorage.getItem('savedVerses') || '{}');
}

function isVerseSaved(surahId, verseId) {
const savedVerses = getSavedVerses();
return savedVerses.hasOwnProperty(`${surahId}-${verseId}`);
}

function updateSaveButtons() {
const saveButtons = document.querySelectorAll('.save-btn');
saveButtons.forEach(btn => {
const verseElement = btn.closest('.verse');
if (verseElement) {
// Extract surah and verse info from the verse element
// This is a simplified approach - you might need to adjust based on your HTML structure
btn.classList.remove('active');
}
});

// Update based on saved verses
const savedVerses = getSavedVerses();
Object.keys(savedVerses).forEach(verseKey => {
const [surahId, verseId] = verseKey.split('-').map(Number);
const verseElements = document.querySelectorAll('.verse');
verseElements.forEach(element => {
const saveBtn = element.querySelector('.save-btn');
if (saveBtn && saveBtn.onclick && saveBtn.onclick.toString().includes(`${surahId}, ${verseId}`)) {
saveBtn.classList.add('active');
}
});
});
}

function showSavedVerses() {
const savedVersesSection = document.getElementById('saved-verses');
const savedList = document.getElementById('saved-list');

if (!savedVersesSection || !savedList) return;

const savedVerses = getSavedVerses();
savedList.innerHTML = '';

if (Object.keys(savedVerses).length === 0) {
savedList.innerHTML = '<div class="no-saved-verses">Henüz kaydedilmiş ayet yok</div>';
} else {
Object.entries(savedVerses).forEach(([verseKey, verseData]) => {
const verseDiv = document.createElement('div');
verseDiv.className = 'saved-verse-item';

const formattedDate = new Date(verseData.date).toLocaleDateString('tr-TR');

verseDiv.innerHTML = `
<div class="saved-verse-content">
<div class="saved-verse-text">${verseData.text}</div>
<div class="saved-verse-reference">${verseData.surah}. ${surahNames[verseData.surah]} - ${verseData.verse} (${verseData.author})</div>
${verseData.note ? `
<div class="saved-verse-note">
<div class="saved-verse-note-label"><i class="fas fa-sticky-note"></i> Not:</div>
<div class="saved-verse-note-text">${verseData.note}</div>
</div>
` : ''}
</div>
<div class="saved-verse-actions">
<div class="saved-verse-buttons">
<button class="saved-verse-btn edit-note" onclick="editVerseNote('${verseKey}')">
<i class="fas fa-edit"></i> Not ${verseData.note ? 'Düzenle' : 'Ekle'}
</button>
<button class="saved-verse-btn" onclick="showVerseDetail(${verseData.surah}, ${verseData.verse})">
<i class="fas fa-eye"></i> Görüntüle
</button>
<button class="saved-verse-btn delete" onclick="deleteSavedVerse('${verseKey}')">
<i class="fas fa-trash"></i> Sil
</button>
</div>
<div class="saved-verse-date">${formattedDate}</div>
</div>
`;

savedList.appendChild(verseDiv);
});
}

savedVersesSection.style.display = 'block';
hideOtherSections();
scrollToTop();
}

function deleteSavedVerse(verseKey) {
if (confirm('Bu ayeti kaydedilenlerden kaldırmak istediğinizden emin misiniz?')) {
const savedVerses = getSavedVerses();
delete savedVerses[verseKey];
localStorage.setItem('savedVerses', JSON.stringify(savedVerses));
showSavedVerses(); // Refresh the display
updateSaveButtons();
showNotification('Ayet kaydedilenlerden kaldırıldı', 'success');
}
}

function editVerseNote(verseKey) {
const savedVerses = getSavedVerses();
const verseData = savedVerses[verseKey];

if (!verseData) return;

currentEditingVerse = verseKey;

const noteModal = document.getElementById('note-modal');
const noteVerseText = document.getElementById('note-verse-text');
const noteVerseRef = document.getElementById('note-verse-ref');
const noteTextarea = document.getElementById('note-textarea');

if (!noteModal) return;

noteVerseText.textContent = verseData.text;
noteVerseRef.textContent = `${verseData.surah}. ${surahNames[verseData.surah]} - ${verseData.verse}`;
noteTextarea.value = verseData.note || '';

noteModal.style.display = 'flex';
noteTextarea.focus();
}

function saveVerseNote() {
if (!currentEditingVerse) return;

const noteTextarea = document.getElementById('note-textarea');
const noteText = noteTextarea.value.trim();

const savedVerses = getSavedVerses();
if (savedVerses[currentEditingVerse]) {
savedVerses[currentEditingVerse].note = noteText;
localStorage.setItem('savedVerses', JSON.stringify(savedVerses));
}

closeNoteModal();
showSavedVerses(); // Refresh the display
showNotification('Not kaydedildi', 'success');
}

function closeNoteModal() {
const noteModal = document.getElementById('note-modal');
if (noteModal) {
noteModal.style.display = 'none';
}
currentEditingVerse = null;
}

// Share functionality
function shareVerse(surahId, verseId) {
const verseData = quranData.find(item => item.sura === surahId && item.ayet === verseId && item.author === selectedAuthor);

if (!verseData) {
showNotification('Ayet bulunamadı', 'error');
return;
}

const shareText = `${verseData.meal}\n\n${surahNames[surahId]} ${verseId} - ${verseData.author}\n\nSadece Kuran - sadecekuran.com.tr`;

if (navigator.share) {
navigator.share({
title: `${surahNames[surahId]} ${verseId}`,
text: shareText,
url: window.location.href
}).catch(err => console.log('Error sharing:', err));
} else {
// Fallback to clipboard
navigator.clipboard.writeText(shareText).then(() => {
showNotification('Ayet panoya kopyalandı', 'success');
}).catch(() => {
showNotification('Paylaşım başarısız', 'error');
});
}
}

// Navigation and UI
function showHome() {
hideAllSections();
document.getElementById('surahs').style.display = 'grid';
clearSearchResults();
updateActiveNavigation('home');
isInVerseDetailPanel = false;
}

function showSearch() {
const searchPage = document.getElementById('search-page');
if (searchPage) {
searchPage.classList.add('active');
const searchInput = document.getElementById('search-page-input');
if (searchInput) {
searchInput.focus();
}
}
updateActiveNavigation('search');
}

function hideSearchPage() {
const searchPage = document.getElementById('search-page');
if (searchPage) {
searchPage.classList.remove('active');
}
}

function showSettings() {
hideAllSections();
document.getElementById('settings').style.display = 'block';
updateActiveNavigation('settings');
isInVerseDetailPanel = false;
}

function showPodcasts() {
hideAllSections();
document.getElementById('podcasts').style.display = 'block';
updateActiveNavigation('podcasts');
isInVerseDetailPanel = false;
}

function hideAllSections() {
const sections = ['surahs', 'verse-panel', 'verse-detail-panel', 'saved-verses', 'settings', 'podcasts'];
sections.forEach(sectionId => {
const section = document.getElementById(sectionId);
if (section) {
section.style.display = 'none';
section.classList.remove('active');
}
});

clearSearchResults();
}

function hideOtherSections() {
const sections = ['surahs', 'saved-verses', 'settings', 'podcasts'];
sections.forEach(sectionId => {
const section = document.getElementById(sectionId);
if (section) {
section.style.display = 'none';
}
});

clearSearchResults();
}

function updateActiveNavigation(activeSection) {
// Desktop navigation
const desktopNavItems = document.querySelectorAll('.sidebar .nav-item');
desktopNavItems.forEach(item => item.classList.remove('active'));

// Mobile navigation
const mobileNavItems = document.querySelectorAll('.bottom-nav-item');
mobileNavItems.forEach(item => item.classList.remove('active'));

// Activate appropriate navigation items
const activeSelectors = {
home: ['#home-nav-desktop', '#home-nav'],
search: ['#search-nav-desktop', '#search-nav'],
saved: ['#saved-nav-desktop', '#saved-nav'],
settings: ['#settings-nav-desktop', '#settings-nav'],
podcasts: ['#podcasts-nav-desktop']
};

if (activeSelectors[activeSection]) {
activeSelectors[activeSection].forEach(selector => {
const element = document.querySelector(selector);
if (element) element.classList.add('active');
});
}
}

function scrollToTop() {
window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Touch and swipe handling
function handleTouchStart(e) {
touchStartX = e.touches[0].clientX;
touchStartY = e.touches[0].clientY;
isSwipeDetected = false;
}

function handleTouchMove(e) {
if (!touchStartX || !touchStartY) return;

touchEndX = e.touches[0].clientX;
touchEndY = e.touches[0].clientY;

const deltaX = touchEndX - touchStartX;
const deltaY = touchEndY - touchStartY;

// Prevent default if it's a horizontal swipe
if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
e.preventDefault();
}
}

function handleTouchEnd(e) {
if (!touchStartX || !touchStartY) return;

const deltaX = touchEndX - touchStartX;
const deltaY = touchEndY - touchStartY;

// Check if it's a horizontal swipe
if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 100) {
isSwipeDetected = true;

if (isInVerseDetailPanel && currentDetailVerse) {
if (deltaX > 0) {
// Swipe right - previous verse
showSwipeIndicator('left');
navigateVerse(currentDetailVerse.surah, currentDetailVerse.verse, -1);
} else {
// Swipe left - next verse
showSwipeIndicator('right');
navigateVerse(currentDetailVerse.surah, currentDetailVerse.verse, 1);
}
}
}

// Reset touch coordinates
touchStartX = 0;
touchStartY = 0;
touchEndX = 0;
touchEndY = 0;
}

function showSwipeIndicator(direction) {
const indicator = document.getElementById(`swipe-${direction}`);
if (indicator) {
indicator.classList.add('show');
setTimeout(() => {
indicator.classList.remove('show');
}, 1000);
}
}

// Long press handling for mobile
function handleLongPressStart(e) {
isLongPress = false;
longPressTarget = e.target;

longPressTimer = setTimeout(() => {
isLongPress = true;
handleLongPress(e);
}, 500);
}

function handleLongPressEnd(e) {
if (longPressTimer) {
clearTimeout(longPressTimer);
longPressTimer = null;
}

if (!isLongPress && longPressTarget) {
// Handle normal tap
handleNormalTap(e);
}

isLongPress = false;
longPressTarget = null;
}

function handleLongPress(e) {
const verseElement = e.target.closest('.verse');
if (verseElement) {
const verseActions = verseElement.querySelector('.verse-actions');
if (verseActions) {
verseActions.classList.add('show');

// Hide after 3 seconds
setTimeout(() => {
verseActions.classList.remove('show');
}, 3000);
}
}
}

function handleNormalTap(e) {
// Hide all visible verse actions
const visibleActions = document.querySelectorAll('.verse-actions.show');
visibleActions.forEach(action => {
action.classList.remove('show');
});
}

// Scroll handling
function handleScroll() {
const currentScrollY = window.scrollY;

if (Math.abs(currentScrollY - lastScrollY) > scrollThreshold) {
isScrolling = true;

// Disable verse actions during scroll
const verses = document.querySelectorAll('.verse');
verses.forEach(verse => {
verse.classList.add('scroll-disabled');
});

// Clear existing timeout
if (scrollTimeout) {
clearTimeout(scrollTimeout);
}

// Set new timeout
scrollTimeout = setTimeout(() => {
isScrolling = false;
verses.forEach(verse => {
verse.classList.remove('scroll-disabled');
});
}, 150);

lastScrollY = currentScrollY;
}
}

// Author sorting functionality
function showAuthorSortPanel() {
const panel = document.getElementById('author-sort-panel');
const authorList = document.getElementById('author-list');

if (!panel || !authorList) return;

// Populate author list
authorList.innerHTML = '';
authorOrder.forEach((author, index) => {
const authorDiv = document.createElement('div');
authorDiv.className = 'author-item';
authorDiv.draggable = true;
authorDiv.dataset.author = author;
authorDiv.innerHTML = `
<span class="author-name">${author}</span>
<span class="drag-handle"><i class="fas fa-grip-vertical"></i></span>
`;

// Add drag event listeners
authorDiv.addEventListener('dragstart', handleDragStart);
authorDiv.addEventListener('dragover', handleDragOver);
authorDiv.addEventListener('drop', handleDrop);
authorDiv.addEventListener('dragend', handleDragEnd);

authorList.appendChild(authorDiv);
});

panel.style.display = 'flex';
}

function hideAuthorSortPanel() {
const panel = document.getElementById('author-sort-panel');
if (panel) {
panel.style.display = 'none';
}
}

function handleDragStart(e) {
e.dataTransfer.setData('text/plain', e.target.dataset.author);
e.target.classList.add('dragging');
}

function handleDragOver(e) {
e.preventDefault();
}

function handleDrop(e) {
e.preventDefault();
const draggedAuthor = e.dataTransfer.getData('text/plain');
const targetAuthor = e.target.closest('.author-item').dataset.author;

if (draggedAuthor !== targetAuthor) {
const draggedIndex = authorOrder.indexOf(draggedAuthor);
const targetIndex = authorOrder.indexOf(targetAuthor);

// Remove dragged item and insert at new position
authorOrder.splice(draggedIndex, 1);
authorOrder.splice(targetIndex, 0, draggedAuthor);

// Refresh the display
showAuthorSortPanel();
}
}

function handleDragEnd(e) {
e.target.classList.remove('dragging');
}

function saveAuthorOrder() {
localStorage.setItem('authorOrder', JSON.stringify(authorOrder));
populateAuthorSelect();
hideAuthorSortPanel();
showNotification('Meal sıralaması kaydedildi', 'success');
}

function resetAuthorOrder() {
authorOrder = [...originalAuthorOrder];
showAuthorSortPanel();
}

// Tab functionality for mobile
function switchTab(tabName) {
const tabButtons = document.querySelectorAll('.tab-button');
const tabContents = document.querySelectorAll('.tab-content');

tabButtons.forEach(btn => btn.classList.remove('active'));
tabContents.forEach(content => content.classList.remove('active'));

const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
const activeContent = document.getElementById(`${tabName}-tab`);

if (activeButton) activeButton.classList.add('active');
if (activeContent) activeContent.classList.add('active');
}

// Notification system
function showNotification(message, type = 'info') {
// Create notification element
const notification = document.createElement('div');
notification.className = `notification notification-${type}`;
notification.textContent = message;

// Style the notification
notification.style.cssText = `
position: fixed;
top: 20px;
right: 20px;
background: ${type === 'error' ? '#e53e3e' : type === 'success' ? '#4caf50' : '#1da1f2'};
color: white;
padding: 12px 20px;
border-radius: 8px;
z-index: 10000;
font-size: 0.9rem;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
transform: translateX(100%);
transition: transform 0.3s ease;
`;

document.body.appendChild(notification);

// Animate in
setTimeout(() => {
notification.style.transform = 'translateX(0)';
}, 100);

// Remove after 3 seconds
setTimeout(() => {
notification.style.transform = 'translateX(100%)';
setTimeout(() => {
if (notification.parentNode) {
notification.parentNode.removeChild(notification);
}
}, 300);
}, 3000);
}

// Settings functionality
function updateSettings() {
// Update theme options
const themeOptions = document.querySelectorAll('.theme-option');
themeOptions.forEach(option => {
option.addEventListener('click', () => {
applyTheme(option.dataset.theme);
});
});

// Update color options
const colorOptions = document.querySelectorAll('.color-option');
colorOptions.forEach(option => {
option.addEventListener('click', () => {
applyHighlightColor(option.dataset.color);
});
});

// Update font size controls
const increaseFontBtn = document.getElementById('increase-font');
const decreaseFontBtn = document.getElementById('decrease-font');

if (increaseFontBtn) {
increaseFontBtn.addEventListener('click', increaseFontSize);
}

if (decreaseFontBtn) {
decreaseFontBtn.addEventListener('click', decreaseFontSize);
}

// Update verse number style
const verseNumberStyleSelect = document.getElementById('verse-number-style');
if (verseNumberStyleSelect) {
verseNumberStyleSelect.value = verseNumberStyle;
verseNumberStyleSelect.addEventListener('change', (e) => {
verseNumberStyle = e.target.value;
localStorage.setItem('verseNumberStyle', verseNumberStyle);
});
}

// Update Arabic display mode
const arabicDisplaySelect = document.getElementById('arabic-display-mode');
if (arabicDisplaySelect) {
arabicDisplaySelect.value = arabicDisplayMode;
arabicDisplaySelect.addEventListener('change', (e) => {
arabicDisplayMode = e.target.value;
localStorage.setItem('arabicDisplayMode', arabicDisplayMode);
});
}

// Update default author
const defaultAuthorSelect = document.getElementById('default-author');
if (defaultAuthorSelect) {
defaultAuthorSelect.value = defaultAuthor;
defaultAuthorSelect.addEventListener('change', (e) => {
defaultAuthor = e.target.value;
selectedAuthor = defaultAuthor;
localStorage.setItem('defaultAuthor', defaultAuthor);
});
}

// Update toggles
updateToggle('auto-scroll-toggle', autoScroll, (value) => {
autoScroll = value;
localStorage.setItem('autoScroll', value.toString());
});

updateToggle('word-analysis-toggle', showWordAnalysis, (value) => {
showWordAnalysis = value;
localStorage.setItem('showWordAnalysis', value.toString());
});

updateToggle('daily-verse-toggle', dailyVerse, (value) => {
dailyVerse = value;
localStorage.setItem('dailyVerse', value.toString());
});

updateToggle('offline-toggle', offlineMode, (value) => {
offlineMode = value;
localStorage.setItem('offlineMode', value.toString());
});

updateToggle('search-history-toggle', searchHistory, (value) => {
searchHistory = value;
localStorage.setItem('searchHistory', value.toString());
});

// Update scroll speed
const scrollSpeedSlider = document.getElementById('scroll-speed');
if (scrollSpeedSlider) {
scrollSpeedSlider.value = scrollSpeed;
scrollSpeedSlider.addEventListener('input', (e) => {
scrollSpeed = parseInt(e.target.value);
localStorage.setItem('scrollSpeed', scrollSpeed.toString());
});
}

// Update notification time
const notificationTimeSelect = document.getElementById('notification-time');
if (notificationTimeSelect) {
notificationTimeSelect.value = notificationTime;
notificationTimeSelect.addEventListener('change', (e) => {
notificationTime = e.target.value;
localStorage.setItem('notificationTime', notificationTime);
});
}
}

function updateToggle(toggleId, currentValue, callback) {
const toggle = document.getElementById(toggleId);
if (toggle) {
toggle.checked = currentValue;
toggle.addEventListener('change', (e) => {
callback(e.target.checked);
});
}
}

function clearAllData() {
if (confirm('Tüm verileriniz silinecek. Bu işlem geri alınamaz. Devam etmek istediğinizden emin misiniz?')) {
localStorage.clear();
location.reload();
}
}

// Event Listeners
document.addEventListener('DOMContentLoaded', function() {
// Load initial data
loadQuranData();

// Apply saved settings
applyTheme(currentTheme);
applyHighlightColor(highlightColor);
applyFontSize(fontSize);

// Initialize settings
updateSettings();

// Search functionality
const searchInput = document.getElementById('search');
const searchPageInput = document.getElementById('search-page-input');
const authorSelect = document.getElementById('author-select');

if (searchInput) {
searchInput.addEventListener('input', (e) => {
performSearch(e.target.value);
});
}

if (searchPageInput) {
searchPageInput.addEventListener('input', (e) => {
performSearch(e.target.value);
});
}

if (authorSelect) {
authorSelect.addEventListener('change', (e) => {
selectedAuthor = e.target.value;
});
}

// Navigation event listeners
const homeNavDesktop = document.getElementById('home-nav-desktop');
const searchNavDesktop = document.getElementById('search-nav-desktop');
const savedNavDesktop = document.getElementById('saved-nav-desktop');
const settingsNavDesktop = document.getElementById('settings-nav-desktop');
const podcastsNavDesktop = document.getElementById('podcasts-nav-desktop');

const homeNav = document.getElementById('home-nav');
const searchNav = document.getElementById('search-nav');
const savedNav = document.getElementById('saved-nav');
const settingsNav = document.getElementById('settings-nav');
const homeBtn = document.getElementById('home-btn');

// Desktop navigation
if (homeNavDesktop) homeNavDesktop.addEventListener('click', showHome);
if (searchNavDesktop) searchNavDesktop.addEventListener('click', showSearch);
if (savedNavDesktop) savedNavDesktop.addEventListener('click', showSavedVerses);
if (settingsNavDesktop) settingsNavDesktop.addEventListener('click', showSettings);
if (podcastsNavDesktop) podcastsNavDesktop.addEventListener('click', showPodcasts);

// Mobile navigation
if (homeNav) homeNav.addEventListener('click', showHome);
if (searchNav) searchNav.addEventListener('click', showSearch);
if (savedNav) savedNav.addEventListener('click', showSavedVerses);
if (settingsNav) settingsNav.addEventListener('click', showSettings);
if (homeBtn) homeBtn.addEventListener('click', showHome);

// Panel controls
const closePanel = document.getElementById('close-panel');
const backBtn = document.getElementById('back-btn');
const backToSurahs = document.getElementById('back-to-surahs');
const showSavedBtn = document.getElementById('show-saved');

if (closePanel) {
closePanel.addEventListener('click', () => {
document.getElementById('verse-panel').classList.remove('active');
showHome();
});
}

if (backBtn) {
backBtn.addEventListener('click', () => {
document.getElementById('verse-detail-panel').classList.remove('active');
isInVerseDetailPanel = false;
if (currentSurahId) {
showSurah(currentSurahId);
} else {
showHome();
}
});
}

if (backToSurahs) {
backToSurahs.addEventListener('click', showHome);
}

if (showSavedBtn) {
showSavedBtn.addEventListener('click', showSavedVerses);
}

// Search page controls
const searchPageBack = document.querySelector('.search-page-back');
if (searchPageBack) {
searchPageBack.addEventListener('click', hideSearchPage);
}

// Example searches
const exampleSearches = document.querySelectorAll('.example-search');
exampleSearches.forEach(example => {
example.addEventListener('click', () => {
const searchTerm = example.textContent.replace('#', '').trim();
if (searchPageInput) {
searchPageInput.value = searchTerm;
performSearch(searchTerm);
}
});
});

// Author sorting
const sortAuthorsBtn = document.getElementById('sort-authors-btn');
const sortAuthorsBtnMobile = document.getElementById('sort-authors-btn-mobile');
const closeSortPanel = document.getElementById('close-sort-panel');
const saveSortBtn = document.getElementById('save-sort-btn');
const resetSortBtn = document.getElementById('reset-sort-btn');

if (sortAuthorsBtn) {
sortAuthorsBtn.addEventListener('click', showAuthorSortPanel);
}

if (sortAuthorsBtnMobile) {
sortAuthorsBtnMobile.addEventListener('click', showAuthorSortPanel);
}

if (closeSortPanel) {
closeSortPanel.addEventListener('click', hideAuthorSortPanel);
}

if (saveSortBtn) {
saveSortBtn.addEventListener('click', saveAuthorOrder);
}

if (resetSortBtn) {
resetSortBtn.addEventListener('click', resetAuthorOrder);
}

// Tab functionality
const tabButtons = document.querySelectorAll('.tab-button');
tabButtons.forEach(button => {
button.addEventListener('click', () => {
const tabName = button.dataset.tab;
if (tabName) {
switchTab(tabName);
}
});
});

// Note modal controls
const closeNoteModal = document.getElementById('close-note-modal');
const cancelNoteBtn = document.getElementById('cancel-note-btn');
const saveNoteBtn = document.getElementById('save-note-btn');

if (closeNoteModal) {
closeNoteModal.addEventListener('click', closeNoteModal);
}

if (cancelNoteBtn) {
cancelNoteBtn.addEventListener('click', closeNoteModal);
}

if (saveNoteBtn) {
saveNoteBtn.addEventListener('click', saveVerseNote);
}

// Settings controls
const clearDataBtn = document.getElementById('clear-data-btn');
if (clearDataBtn) {
clearDataBtn.addEventListener('click', clearAllData);
}

// Touch event listeners for mobile
document.addEventListener('touchstart', handleTouchStart, { passive: false });
document.addEventListener('touchmove', handleTouchMove, { passive: false });
document.addEventListener('touchend', handleTouchEnd, { passive: false });

// Long press for mobile verse actions
document.addEventListener('touchstart', handleLongPressStart, { passive: true });
document.addEventListener('touchend', handleLongPressEnd, { passive: true });

// Scroll event listener
window.addEventListener('scroll', handleScroll, { passive: true });

// Close modals when clicking outside
document.addEventListener('click', (e) => {
const noteModal = document.getElementById('note-modal');
const authorSortPanel = document.getElementById('author-sort-panel');

if (noteModal && e.target === noteModal) {
closeNoteModal();
}

if (authorSortPanel && e.target === authorSortPanel) {
hideAuthorSortPanel();
}
});

// Initialize with home view
showHome();
});

// Service Worker for offline functionality
if ('serviceWorker' in navigator && offlineMode) {
window.addEventListener('load', () => {
navigator.serviceWorker.register('/sw.js')
.then((registration) => {
console.log('SW registered: ', registration);
})
.catch((registrationError) => {
console.log('SW registration failed: ', registrationError);
});
});
}

// Request notification permission
if ('Notification' in window && dailyVerse) {
Notification.requestPermission().then((permission) => {
notificationPermissionGranted = permission === 'granted';
});
}
</script>
</body>
</html>