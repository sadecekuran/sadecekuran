<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#000000">
<link rel="icon" type="image/png" href="/sdc5.PNG"/>
<link rel="apple-touch-icon" href="/sdc5.PNG">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<title>SADECE KURAN - Kuran Meali ve Kelime Analizi</title>
<meta name="description" content="Kur'an meali ve kelime analizi ile Kur'an'ı daha yakından keşfedin. Sadece Kur'an ile İslam.">

<!-- Open Graph etiketleri -->
<meta property="og:title" content="SADECE KURAN - Kuran Meali ve Kelime Analizi">
<meta property="og:description" content="Kur'an meali ve kelime analizi ile Kur'an'ı daha yakından keşfedin. Sadece Kur'an ile İslam.">
<meta property="og:image" content="https://sadecekuran.com.tr/onizleme.jpg">
<meta property="og:url" content="https://sadecekuran.com.tr">
<meta property="og:type" content="website">

<!-- Twitter kartı (isteğe bağlı) -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="SADECE KURAN - Kuran Meali ve Kelime Analizi">
<meta name="twitter:description" content="Kur'an meali ve kelime analizi ile Kur'an'ı daha yakından keşfedin. Sadece Kur'an ile İslam.">
<meta name="twitter:image" content="https://sadecekuran.com.tr/onizleme.jpg">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
--font-size-multiplier: 1;
--arabic-font-size-multiplier: 1;
}

:root[data-theme="dark"] {
--bg-primary: #000000;
--bg-secondary: #111111;
--bg-tertiary: #1a1a1a;
--text-primary: #ffffff;
--text-secondary: #cccccc;
--text-muted: #888888;
--border-color: #333333;
--accent-light: #ffffff;
--accent-dark: #000000;
--shadow-light: rgba(255, 255, 255, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, #ffffff, #cccccc);
--gradient-secondary: linear-gradient(135deg, #333333, #111111);
--wire-color: #666666;
--primary-color: #ffffff;
--secondary-color: #cccccc;
--accent-color: #888888;
--header-height: 60px;
--navbar-bg: #111111;
}

:root[data-theme="light"] {
--bg-primary: #ffffff;
--bg-secondary: #f8fafc;
--bg-tertiary: #f1f5f9;
--text-primary: #1e293b;
--text-secondary: #475569;
--text-muted: #64748b;
--border-color: #e2e8f0;
--accent-light: #1e293b;
--accent-dark: #ffffff;
--shadow-light: rgba(0, 0, 0, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.1);
--gradient-primary: linear-gradient(135deg, #1e293b, #475569);
--gradient-secondary: linear-gradient(135deg, #f1f5f9, #e2e8f0);
--wire-color: #94a3b8;
--primary-color: #2563eb;
--secondary-color: #475569;
--accent-color: #64748b;
--header-height: 60px;
--navbar-bg: #f8fafc;
}

:root[data-theme="sepia"] {
--bg-primary: #f7f3e9;
--bg-secondary: #f0e6d2;
--bg-tertiary: #e8dcc0;
--text-primary: #5d4e37;
--text-secondary: #8b7355;
--text-muted: #a0916f;
--border-color: #d4c4a8;
--accent-light: #5d4e37;
--accent-dark: #f7f3e9;
--shadow-light: rgba(93, 78, 55, 0.1);
--shadow-dark: rgba(93, 78, 55, 0.15);
--gradient-primary: linear-gradient(135deg, #5d4e37, #8b7355);
--gradient-secondary: linear-gradient(135deg, #e8dcc0, #d4c4a8);
--wire-color: #a0916f;
--primary-color: #8b4513;
--secondary-color: #8b7355;
--accent-color: #a0916f;
--header-height: 60px;
--navbar-bg: #f0e6d2;
}

:root[data-theme="blue"] {
--bg-primary: #0f172a;
--bg-secondary: #1e293b;
--bg-tertiary: #334155;
--text-primary: #f1f5f9;
--text-secondary: #cbd5e1;
--text-muted: #94a3b8;
--border-color: #475569;
--accent-light: #f1f5f9;
--accent-dark: #0f172a;
--shadow-light: rgba(241, 245, 249, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, #d5d5d5, #ffffff);
--gradient-secondary: linear-gradient(135deg, #334155, #1e293b);
--wire-color: #64748b;
--primary-color: #d8d8d8;
--secondary-color: #cbd5e1;
--accent-color: #94a3b8;
--header-height: 60px;
--navbar-bg: #1e293b;
}

:root[data-theme="green"] {
--bg-primary: #064e3b;
--bg-secondary: #065f46;
--bg-tertiary: #047857;
--text-primary: #ecfdf5;
--text-secondary: #d1fae5;
--text-muted: #a7f3d0;
--border-color: #059669;
--accent-light: #ecfdf5;
--accent-dark: #064e3b;
--shadow-light: rgba(236, 253, 245, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, #10b981, #059669);
--gradient-secondary: linear-gradient(135deg, #047857, #065f46);
--wire-color: #6ee7b7;
--primary-color: #10b981;
--secondary-color: #d1fae5;
--accent-color: #a7f3d0;
--header-height: 60px;
--navbar-bg: #065f46;
}

:root[data-theme="purple"] {
--bg-primary: #581c87;
--bg-secondary: #6b21a8;
--bg-tertiary: #7c2d92;
--text-primary: #faf5ff;
--text-secondary: #e9d5ff;
--text-muted: #d8b4fe;
--border-color: #8b5cf6;
--accent-light: #faf5ff;
--accent-dark: #581c87;
--shadow-light: rgba(250, 245, 255, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, #8b5cf6, #7c3aed);
--gradient-secondary: linear-gradient(135deg, #7c2d92, #6b21a8);
--wire-color: #c4b5fd;
--primary-color: #8b5cf6;
--secondary-color: #e9d5ff;
--accent-color: #d8b4fe;
--header-height: 60px;
--navbar-bg: #6b21a8;
}

:root[data-theme="rose"] {
--bg-primary: #881337;
--bg-secondary: #9f1239;
--bg-tertiary: #be185d;
--text-primary: #fdf2f8;
--text-secondary: #fce7f3;
--text-muted: #fbcfe8;
--border-color: #ec4899;
--accent-light: #fdf2f8;
--accent-dark: #881337;
--shadow-light: rgba(253, 242, 248, 0.1);
--shadow-dark: rgba(0, 0, 0, 0.5);
--gradient-primary: linear-gradient(135deg, #ec4899, #db2777);
--gradient-secondary: linear-gradient(135deg, #be185d, #9f1239);
--wire-color: #f9a8d4;
--primary-color: #ec4899;
--secondary-color: #fce7f3;
--accent-color: #fbcfe8;
--header-height: 60px;
--navbar-bg: #9f1239;
}

/* Remove default blue highlight on touch */
* {
-webkit-tap-highlight-color: transparent;
-webkit-touch-callout: none;
-webkit-user-select: none;
user-select: none;
}

/* Allow text selection for specific elements */
p, h1, h2, h3, h4, h5, h6, span, div.verse-translation, div.verse-detail-translation {
-webkit-user-select: text;
user-select: text;
}

/* Ripple effect container */
.ripple {
position: relative;
overflow: hidden;
}

/* Ripple animation */
.ripple-effect {
position: absolute;
border-radius: 50%;
background-color: rgba(255, 255, 255, 0.4);
transform: scale(0);
animation: ripple-animation 0.6s linear;
pointer-events: none;
}

@keyframes ripple-animation {
to {
transform: scale(2.5);
opacity: 0;
}
}

* {
box-sizing: border-box;
margin: 0;
padding: 0;
}

body {
background: var(--bg-primary);
color: var(--text-primary);
font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
min-height: 100vh;
position: relative;
overflow-x: hidden;
font-size: calc(16px * var(--font-size-multiplier));
line-height: 1.6;
transition: all 0.3s ease;
padding-bottom: 80px;
}

.arabic {
font-family: 'Amiri', serif;
direction: rtl;
text-align: right;
font-size: calc(1.2em * var(--arabic-font-size-multiplier));
line-height: 2;
color: var(--text-primary);
}

.arabic.hidden {
display: none !important;
}

.highlight {
background: #ffff00;
color: #000000;
padding: 0.1em 0.2em;
border-radius: 3px;
font-weight: bold;
}

.icon {
display: inline-block;
width: 20px;
height: 20px;
stroke: var(--wire-color);
fill: none;
stroke-width: 1.5;
stroke-linecap: round;
stroke-linejoin: round;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.icon:hover {
stroke: var(--text-primary);
transform: scale(1.1);
}

.icon-sm {
width: 16px;
height: 16px;
}

.header {
position: fixed;
top: 0;
left: 0;
right: 0;
background: var(--navbar-bg);
backdrop-filter: blur(20px);
border-bottom: 1px solid var(--border-color);
padding: 0.75rem 1rem;
z-index: 1000;
height: var(--header-height);
animation: slideDown 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.header-content {
max-width: 1400px;
margin: 0 auto;
display: flex;
justify-content: space-between;
align-items: center;
gap: 1rem;
height: 100%;
}

.logo {
font-size: 1.25rem;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
text-decoration: none;
cursor: pointer;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
white-space: nowrap;
}

.logo:hover {
transform: scale(1.05);
}

.header-actions {
display: flex;
align-items: center;
gap: 0.5rem;
}

.search-btn, .theme-btn, .saved-btn, .settings-btn, .support-btn {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
padding: 0.5rem;
border-radius: 8px;
cursor: pointer;
color: var(--text-secondary);
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
text-decoration: none;
}

.search-btn:hover, .theme-btn:hover, .saved-btn:hover, .settings-btn:hover, .support-btn:hover {
background: var(--bg-tertiary);
color: var(--text-primary);
border-color: var(--wire-color);
transform: scale(1.05);
}

.saved-btn, .support-btn {
gap: 0.25rem;
padding: 0.5rem 0.75rem;
font-size: 0.8rem;
}

.saved-btn .icon, .support-btn .icon {
margin: 0;
}

.main {
margin-top: var(--header-height);
min-height: calc(100vh - var(--header-height));
}

.content {
padding: 2rem;
max-width: 1400px;
margin: 0 auto;
animation: fadeInUp 1s ease-out 0.8s both;
}

.home-hero {
text-align: center;
padding: 2rem 0 2rem;
max-width: 800px;
margin: 0 auto;
}

.home-hero h1 {
font-size: clamp(2.5rem, 5vw, 4rem);
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 1rem;
animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
}

/* PWA Install Panel - Updated for better responsiveness */
.pwa-install-panel {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1.5rem;
margin: 0 auto 2rem;
max-width: 600px;
display: flex;
align-items: center;
justify-content: space-between;
gap: 1rem;
box-shadow: 0 4px 20px var(--shadow-dark);
animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
transition: all 0.3s ease;
}

.pwa-install-panel:hover {
transform: translateY(-2px);
box-shadow: 0 8px 32px var(--shadow-dark);
}

.pwa-panel-left {
display: flex;
align-items: center;
gap: 1rem;
flex: 1;
}

.pwa-app-logo {
width: 48px;
height: 48px;
border-radius: 12px;
background: var(--primary-color);
display: flex;
align-items: center;
justify-content: center;
color: var(--bg-primary);
font-weight: bold;
font-size: 1.2rem;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
overflow: hidden;
}

.pwa-app-logo img {
width: 100%;
height: 100%;
object-fit: cover;
border-radius: 8px;
}

.pwa-panel-info h3 {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 0.25rem;
color: var(--text-primary);
text-align: left;
}

.pwa-panel-info p {
font-size: 0.9rem;
color: var(--text-secondary);
margin: 0;
text-align: left;
}

.pwa-download-btn {
background: var(--primary-color);
color: var(--bg-primary);
border: none;
padding: 0.75rem 1.5rem;
border-radius: 12px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 0.5rem;
font-size: 0.9rem;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
text-decoration: none;
}

.pwa-download-btn:hover {
transform: translateY(-2px) scale(1.05);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
}

.home-search {
max-width: 600px;
margin: 0 auto 3rem;
position: relative;
animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) 0.5s both;
}

.home-search-input {
width: 100%;
padding: 1rem 3rem 1rem 1rem;
background: var(--bg-secondary);
border: 2px solid var(--border-color);
border-radius: 16px;
color: var(--text-primary);
font-size: calc(1rem * var(--font-size-multiplier));
outline: none;
transition: all 0.3s ease;
box-shadow: 0 4px 20px var(--shadow-dark);
}

.home-search-input:focus {
border-color: var(--primary-color);
box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1), 0 8px 32px var(--shadow-dark);
transform: translateY(-2px);
}

.home-search-icon {
position: absolute;
right: 1rem;
top: 50%;
transform: translateY(-50%);
color: var(--text-muted);
pointer-events: none;
}

.surahs-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
gap: 1rem;
animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1) 0.6s both;
position: relative;
z-index: 1;
}

.surah-card {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 1rem;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
text-decoration: none;
color: inherit;
transform: translateY(0);
opacity: 0;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
position: relative;
text-align: center;
}

.surah-card:nth-child(odd) {
animation-delay: 0.1s;
}

.surah-card:nth-child(even) {
animation-delay: 0.2s;
}

.surah-card:hover {
transform: translateY(-4px) scale(1.01);
box-shadow: 0 8px 20px var(--shadow-dark);
border-color: var(--wire-color);
}

.surah-header {
display: flex;
flex-direction: column;
align-items: center;
gap: 0.5rem;
margin-bottom: 0.75rem;
}

.surah-number {
width: 2.5rem;
height: 2.5rem;
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 0.9rem;
font-weight: 600;
transition: all 0.3s ease;
}

.surah-card:hover .surah-number {
background: var(--wire-color);
transform: scale(1.1);
}

.surah-info {
flex: 1;
}

.surah-name {
font-size: calc(1.1rem * var(--font-size-multiplier));
font-weight: 600;
margin-bottom: 0.25rem;
}

.support-page {
max-width: 800px;
margin: 0 auto;
}

.support-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
margin-bottom: 2rem;
text-align: center;
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.support-title {
font-size: 2rem;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 1rem;
}

.support-description {
color: var(--text-secondary);
font-size: calc(1.1rem * var(--font-size-multiplier));
line-height: 1.6;
margin-bottom: 2rem;
}

.donation-button {
display: inline-block;
background: var(--primary-color);
color: var(--bg-primary);
padding: 1.5rem 3rem;
border-radius: 16px;
text-decoration: none;
font-size: calc(1.2rem * var(--font-size-multiplier));
font-weight: 600;
transition: all 0.3s ease;
box-shadow: 0 8px 32px var(--shadow-dark);
border: none;
cursor: pointer;
position: relative;
overflow: hidden;
}

.donation-button:hover {
transform: translateY(-4px) scale(1.05);
box-shadow: 0 12px 40px var(--shadow-dark);
}

.donation-button::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-image: url('kader.jpg');
background-size: cover;
background-position: center;
opacity: 0.1;
border-radius: 16px;
}

.donation-button-content {
position: relative;
z-index: 1;
display: flex;
align-items: center;
gap: 0.75rem;
}

.settings-page {
max-width: 800px;
margin: 0 auto;
}

.settings-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
margin-bottom: 2rem;
text-align: center;
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.settings-title {
font-size: 2rem;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 0.5rem;
}

.settings-description {
color: var(--text-secondary);
font-size: calc(1rem * var(--font-size-multiplier));
}

.settings-section {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1.5rem;
margin-bottom: 1.5rem;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.settings-section h3 {
margin-bottom: 1rem;
color: var(--text-primary);
font-size: calc(1.2rem * var(--font-size-multiplier));
display: flex;
align-items: center;
gap: 0.5rem;
}

.theme-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
gap: 1rem;
}

.theme-option {
padding: 1rem;
border: 2px solid var(--border-color);
border-radius: 12px;
cursor: pointer;
transition: all 0.3s ease;
background: var(--bg-primary);
color: var(--text-primary);
font-size: calc(0.9rem * var(--font-size-multiplier));
text-align: center;
position: relative;
overflow: hidden;
}

.theme-option.active {
border-color: var(--primary-color);
background: var(--primary-color);
color: var(--bg-primary);
transform: scale(1.05);
}

.theme-option:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px var(--shadow-dark);
}

.theme-preview {
width: 100%;
height: 40px;
border-radius: 8px;
margin-bottom: 0.5rem;
position: relative;
}

.theme-preview.dark { background: linear-gradient(135deg, #000000, #333333); }
.theme-preview.light { background: linear-gradient(135deg, #ffffff, #f1f5f9); }
.theme-preview.sepia { background: linear-gradient(135deg, #f7f3e9, #e8dcc0); }
.theme-preview.blue { background: linear-gradient(135deg, #0f172a, #3b82f6); }
.theme-preview.green { background: linear-gradient(135deg, #064e3b, #10b981); }
.theme-preview.purple { background: linear-gradient(135deg, #581c87, #8b5cf6); }
.theme-preview.rose { background: linear-gradient(135deg, #881337, #ec4899); }

.setting-item {
display: flex;
align-items: center;
justify-content: space-between;
padding: 1rem;
background: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 12px;
margin-bottom: 1rem;
transition: all 0.3s ease;
}

.setting-item:hover {
background: var(--bg-tertiary);
transform: translateY(-1px);
}

.setting-label {
display: flex;
align-items: center;
gap: 0.5rem;
color: var(--text-primary);
font-weight: 500;
font-size: calc(1rem * var(--font-size-multiplier));
}

.setting-description {
color: var(--text-secondary);
font-size: calc(0.9rem * var(--font-size-multiplier));
margin-top: 0.25rem;
}

.toggle-switch {
position: relative;
width: 50px;
height: 24px;
background: var(--border-color);
border-radius: 12px;
cursor: pointer;
transition: all 0.3s ease;
}

.toggle-switch.active {
background: var(--primary-color);
}

.toggle-switch::after {
content: '';
position: absolute;
top: 2px;
left: 2px;
width: 20px;
height: 20px;
background: white;
border-radius: 50%;
transition: all 0.3s ease;
}

.toggle-switch.active::after {
transform: translateX(26px);
}

.volume-slider {
width: 100%;
height: 6px;
background: var(--border-color);
border-radius: 3px;
outline: none;
cursor: pointer;
-webkit-appearance: none;
}

.volume-slider::-webkit-slider-thumb {
-webkit-appearance: none;
width: 20px;
height: 20px;
background: var(--primary-color);
border-radius: 50%;
cursor: pointer;
}

.translation-select {
width: 100%;
padding: 0.75rem;
background: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
color: var(--text-primary);
font-size: calc(0.9rem * var(--font-size-multiplier));
outline: none;
cursor: pointer;
}

.translation-select:focus {
border-color: var(--primary-color);
box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
}

.font-size-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
gap: 0.75rem;
margin-top: 0.5rem;
}

.font-size-option {
padding: 0.75rem;
border: 1px solid var(--border-color);
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
background: var(--bg-primary);
color: var(--text-primary);
font-size: calc(0.9rem * var(--font-size-multiplier));
text-align: center;
}

.font-size-option.active {
border-color: var(--primary-color);
background: var(--primary-color);
color: var(--bg-primary);
}

.font-size-option:hover:not(.active) {
background: var(--bg-tertiary);
transform: translateY(-2px);
}

.audio-player {
position: fixed;
bottom: 0;
left: 0;
right: 0;
background: var(--bg-secondary);
backdrop-filter: blur(20px);
border-top: 1px solid var(--border-color);
padding: 1rem;
box-shadow: 0 -8px 32px var(--shadow-dark);
z-index: 1000;
display: none;
transition: all 0.3s ease;
}

.audio-player.active {
display: block;
animation: slideInUp 0.3s ease;
}

.audio-controls {
display: flex;
align-items: center;
gap: 1rem;
margin-bottom: 0.75rem;
}

.audio-main-controls {
display: flex;
align-items: center;
gap: 0.75rem;
}

.audio-btn {
background: var(--bg-primary);
border: 1px solid var(--border-color);
color: var(--text-primary);
padding: 0.75rem;
border-radius: 12px;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
width: 48px;
height: 48px;
box-shadow: 0 2px 8px var(--shadow-dark);
}

.audio-btn:hover {
background: var(--primary-color);
color: var(--bg-primary);
transform: translateY(-2px);
box-shadow: 0 4px 16px var(--shadow-dark);
}

.audio-play-btn {
background: var(--primary-color);
color: var(--bg-primary);
width: 56px;
height: 56px;
border-radius: 50%;
box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.audio-play-btn:hover {
transform: scale(1.05);
}

.audio-info {
flex: 1;
min-width: 0;
margin: 0 1rem;
}

.audio-title {
font-size: calc(1.1rem * var(--font-size-multiplier));
font-weight: 600;
margin-bottom: 0.75rem;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
color: var(--text-primary);
}

.audio-progress-container {
position: relative;
margin-bottom: 0.5rem;
}

.audio-progress {
width: 100%;
height: 8px;
background: var(--bg-tertiary);
border-radius: 4px;
overflow: hidden;
cursor: pointer;
border: 1px solid var(--border-color);
}

.audio-progress-bar {
height: 100%;
background: var(--primary-color);
width: 0%;
transition: width 0.1s ease;
border-radius: 4px;
}

.audio-time {
display: flex;
justify-content: space-between;
font-size: calc(0.85rem * var(--font-size-multiplier));
color: var(--text-muted);
font-weight: 500;
}

.audio-volume-control {
display: flex;
align-items: center;
gap: 0.75rem;
min-width: 140px;
}

.audio-volume-slider {
width: 100px;
height: 6px;
background: var(--bg-tertiary);
border-radius: 3px;
outline: none;
cursor: pointer;
-webkit-appearance: none;
border: 1px solid var(--border-color);
}

.audio-volume-slider::-webkit-slider-thumb {
-webkit-appearance: none;
width: 18px;
height: 18px;
background: var(--primary-color);
border-radius: 50%;
cursor: pointer;
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.audio-close {
background: var(--bg-primary);
border: 1px solid var(--border-color);
color: var(--text-secondary);
cursor: pointer;
padding: 0.75rem;
border-radius: 12px;
transition: all 0.3s ease;
width: 48px;
height: 48px;
display: flex;
align-items: center;
justify-content: center;
}

.audio-close:hover {
background: #dc2626;
color: white;
border-color: #dc2626;
transform: translateY(-2px);
}

.breadcrumb {
display: flex;
align-items: center;
gap: 0.5rem;
margin-bottom: 1rem;
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-secondary);
animation: fadeIn 0.6s ease-out;
}

.breadcrumb a {
color: var(--text-secondary);
text-decoration: none;
transition: all 0.3s ease;
padding: 0.25rem 0.5rem;
border-radius: 6px;
}

.breadcrumb a:hover {
color: var(--text-primary);
background: var(--bg-tertiary);
transform: translateY(-1px);
}

.search-page {
max-width: 1000px;
margin: 0 auto;
}

.search-page-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
margin-bottom: 2rem;
text-align: center;
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-page-title {
font-size: 2rem;
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 1rem;
}

.search-page-input {
width: 100%;
padding: 1rem;
background: var(--bg-primary);
border: 2px solid var(--border-color);
border-radius: 12px;
color: var(--text-primary);
font-size: calc(1rem * var(--font-size-multiplier));
outline: none;
transition: all 0.3s ease;
margin-bottom: 1rem;
}

.search-page-input:focus {
border-color: var(--primary-color);
box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
}

.search-results {
margin-top: 2rem;
}

.search-header {
margin-bottom: 1.5rem;
padding-bottom: 1rem;
border-bottom: 1px solid var(--border-color);
text-align: center;
}

.search-header h2 {
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 0.5rem;
font-size: calc(1.5rem * var(--font-size-multiplier));
}

.search-meta {
color: var(--text-secondary);
font-size: calc(0.875rem * var(--font-size-multiplier));
}

.search-result {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 1.5rem;
margin-bottom: 1rem;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
opacity: 0;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
cursor: pointer;
}

.search-result:nth-child(odd) {
animation-delay: 0.1s;
}

.search-result:nth-child(even) {
animation-delay: 0.2s;
}

.search-result:hover {
box-shadow: 0 8px 25px var(--shadow-dark);
border-color: var(--wire-color);
transform: translateY(-3px);
}

.result-type {
display: inline-block;
background: var(--bg-tertiary);
color: var(--text-primary);
padding: 0.25rem 0.5rem;
border-radius: 4px;
font-size: calc(0.75rem * var(--font-size-multiplier));
font-weight: 500;
margin-bottom: 0.75rem;
border: 1px solid var(--border-color);
}

.result-content {
margin-bottom: 0.75rem;
}

.result-content h3 {
font-size: calc(1.1rem * var(--font-size-multiplier));
}

.result-content p {
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.result-link {
color: var(--primary-color);
text-decoration: none;
font-size: calc(0.875rem * var(--font-size-multiplier));
font-weight: 500;
transition: all 0.3s ease;
}

.result-link:hover {
text-decoration: underline;
}

@keyframes slideDown {
from {
opacity: 0;
transform: translateY(-100%);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}

@keyframes fadeInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes slideUp {
from {
opacity: 0;
transform: translateY(40px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes slideInUp {
from {
opacity: 0;
transform: translateY(30px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

@keyframes slideInRight {
from {
opacity: 0;
transform: translateX(100%);
}
to {
opacity: 1;
transform: translateX(0);
}
}

@keyframes slideOutRight {
from {
opacity: 1;
transform: translateX(0);
}
to {
opacity: 0;
transform: translateX(100%);
}
}

.swipe-container {
touch-action: pan-y;
position: relative;
}

/* Word Detail Page Styles */
.word-detail {
max-width: 1000px;
margin: 0 auto;
position: relative;
}

.word-detail-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 20px;
padding: 2rem;
margin-bottom: 2rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
text-align: center;
position: relative;
}

.word-detail-title {
font-size: calc(2rem * var(--font-size-multiplier));
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 1rem;
display: flex;
align-items: center;
justify-content: center;
gap: 1.5rem;
animation: fadeIn 0.8s ease-out 0.2s both;
}

.word-arabic-large {
font-size: calc(3rem * var(--arabic-font-size-multiplier));
margin: 1rem 0;
transition: all 0.3s ease;
}

.word-detail-header:hover .word-arabic-large {
transform: scale(1.05);
}

.word-transcription-large {
font-size: calc(1.5rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-style: italic;
margin-bottom: 0.5rem;
}

.word-meaning-large {
font-size: calc(1.2rem * var(--font-size-multiplier));
color: var(--text-primary);
line-height: 1.6;
margin-bottom: 1rem;
}

.word-root-info {
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 1rem;
margin-top: 1rem;
}

.word-root-title {
font-size: calc(1rem * var(--font-size-multiplier));
color: var(--text-secondary);
margin-bottom: 0.5rem;
}

.word-root-details {
display: flex;
align-items: center;
gap: 1rem;
justify-content: center;
flex-wrap: wrap;
}

.word-root-arabic {
font-size: calc(1.5rem * var(--arabic-font-size-multiplier));
}

.word-root-latin {
font-size: calc(1.1rem * var(--font-size-multiplier));
font-weight: 600;
color: var(--primary-color);
cursor: pointer;
transition: all 0.3s ease;
padding: 0.25rem 0.5rem;
border-radius: 6px;
}

.word-root-latin:hover {
background: var(--bg-primary);
transform: scale(1.05);
}

.word-root-meaning {
font-size: calc(0.95rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-style: italic;
}

.word-verses-section {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
margin-bottom: 2rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
}

.word-verses-title {
font-size: calc(1.5rem * var(--font-size-multiplier));
font-weight: 600;
margin-bottom: 1.5rem;
display: flex;
align-items: center;
gap: 0.5rem;
color: var(--text-primary);
}

.word-verse-item {
background: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 1.5rem;
margin-bottom: 1rem;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
opacity: 0;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.word-verse-item:nth-child(odd) {
animation-delay: 0.1s;
}

.word-verse-item:nth-child(even) {
animation-delay: 0.2s;
}

.word-verse-item:hover {
transform: translateY(-3px) scale(1.01);
box-shadow: 0 8px 25px var(--shadow-dark);
border-color: var(--wire-color);
}

.word-verse-reference {
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-secondary);
margin-bottom: 1rem;
display: flex;
align-items: center;
gap: 0.5rem;
font-weight: 600;
}

.word-verse-translation {
font-size: calc(1rem * var(--font-size-multiplier));
line-height: 1.6;
color: var(--text-primary);
margin-bottom: 1rem;
background: var(--bg-tertiary);
padding: 1rem;
border-radius: 8px;
border: 1px solid var(--border-color);
}

.word-verse-arabic {
font-size: calc(1.3rem * var(--arabic-font-size-multiplier));
padding: 1rem;
background: transparent;
border-radius: 8px;
text-align: right;
transition: all 0.3s ease;
margin-bottom: 0.5rem;
}

.word-verse-transcription {
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-style: italic;
text-align: left;
padding: 0.5rem 1rem;
}

.word-verse-item:hover .word-verse-arabic {
transform: scale(1.01);
}

/* Root Detail Page Styles */
.root-detail {
max-width: 1000px;
margin: 0 auto;
position: relative;
}

.root-detail-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 20px;
padding: 2rem;
margin-bottom: 2rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
text-align: center;
position: relative;
}

.root-detail-title {
font-size: calc(2rem * var(--font-size-multiplier));
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 1rem;
display: flex;
align-items: center;
justify-content: center;
gap: 1.5rem;
animation: fadeIn 0.8s ease-out 0.2s both;
}

.root-arabic-large {
font-size: calc(3rem * var(--arabic-font-size-multiplier));
margin: 1rem 0;
transition: all 0.3s ease;
}

.root-detail-header:hover .root-arabic-large {
transform: scale(1.05);
}

.root-latin-large {
font-size: calc(1.5rem * var(--font-size-multiplier));
color: var(--primary-color);
font-weight: 600;
margin-bottom: 0.5rem;
}

.root-meaning-large {
font-size: calc(1.2rem * var(--font-size-multiplier));
color: var(--text-primary);
line-height: 1.6;
margin-bottom: 1rem;
}

.root-words-section {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
margin-bottom: 2rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
}

.root-words-title {
font-size: calc(1.5rem * var(--font-size-multiplier));
font-weight: 600;
margin-bottom: 1.5rem;
display: flex;
align-items: center;
gap: 0.5rem;
color: var(--text-primary);
}

.root-words-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 1rem;
}

.root-word-item {
background: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 12px;
padding: 1rem;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
opacity: 0;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.root-word-item:nth-child(odd) {
animation-delay: 0.1s;
}

.root-word-item:nth-child(even) {
animation-delay: 0.2s;
}

.root-word-item:hover {
transform: translateY(-3px) scale(1.02);
box-shadow: 0 8px 25px var(--shadow-dark);
border-color: var(--primary-color);
}

.root-word-arabic {
font-size: calc(1.3rem * var(--arabic-font-size-multiplier));
margin-bottom: 0.5rem;
transition: all 0.3s ease;
}

.root-word-item:hover .root-word-arabic {
transform: scale(1.05);
}

.root-word-transcription {
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-style: italic;
margin-bottom: 0.25rem;
}

.root-word-translation {
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-primary);
font-weight: 500;
margin-bottom: 0.5rem;
}

.root-word-count {
font-size: calc(0.8rem * var(--font-size-multiplier));
color: var(--text-muted);
padding-top: 0.5rem;
border-top: 1px solid var(--border-color);
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
:root {
--font-size-multiplier: 1.1;
--arabic-font-size-multiplier: 1.2;
}

.header {
padding: 0.4rem 0.8rem;
height: 50px;
}

.header-content {
gap: 0.4rem;
}

.logo {
font-size: 0.9rem;
}

.saved-btn, .support-btn {
padding: 0.4rem;
font-size: 0;
}

.saved-btn .icon, .support-btn .icon {
margin: 0;
}

.search-btn, .theme-btn, .settings-btn {
padding: 0.4rem;
}

.content {
padding: 0.8rem;
}

.home-hero {
padding: 0.8rem 0 1rem;
}

.home-hero h1 {
font-size: 1.4rem;
}

.pwa-install-panel {
flex-direction: column;
text-align: center;
gap: 1rem;
padding: 1rem;
}

.pwa-panel-left {
justify-content: center;
}

.pwa-panel-info h3,
.pwa-panel-info p {
text-align: center;
}

.pwa-app-logo {
width: 40px;
height: 40px;
font-size: 1rem;
}

.pwa-download-btn {
padding: 0.8rem 8.7rem;
font-size: 0.8rem;
}

.home-search {
margin-bottom: 1.5rem;
}

.home-search-input {
padding: 0.8rem 2.5rem 0.8rem 0.8rem;
}

.surahs-grid {
grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
gap: 0.5rem;
}

.surah-card {
padding: 0.8rem;
}

.surah-header {
gap: 0.3rem;
margin-bottom: 0.5rem;
}

.surah-number {
width: 1.8rem;
height: 1.8rem;
font-size: 0.8rem;
}

.theme-grid {
grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
gap: 0.5rem;
}

.theme-option {
padding: 0.5rem;
}

.theme-preview {
height: 25px;
}

.audio-player {
padding: 0.3rem;
height: 50px;
}

.audio-controls {
flex-direction: row;
gap: 0.3rem;
margin-bottom: 0;
align-items: center;
height: 100%;
}

.audio-main-controls {
justify-content: center;
gap: 0.3rem;
}

.audio-btn {
width: 28px;
height: 28px;
padding: 0.3rem;
}

.audio-play-btn {
width: 32px;
height: 32px;
}

.audio-info {
margin: 0 0.5rem;
text-align: center;
flex: 1;
min-width: 0;
}

.audio-title {
margin-bottom: 0.2rem;
font-size: calc(0.8rem * var(--font-size-multiplier));
}

.audio-progress-container {
margin-bottom: 0;
}

.audio-progress {
height: 4px;
}

.audio-time {
display: none;
}

.audio-volume-control {
display: none;
}

.audio-close {
width: 28px;
height: 28px;
padding: 0.3rem;
}

.settings-section {
padding: 1rem;
}

.setting-item {
padding: 0.8rem;
flex-direction: column;
align-items: flex-start;
gap: 0.5rem;
}

.search-page-header {
padding: 1rem;
}

.search-page-title {
font-size: 1.5rem;
}

.search-page-input {
padding: 0.8rem;
}

.search-result {
padding: 1rem;
}

.surah-detail-header {
padding: 1rem;
}

.surah-title {
font-size: 1.5rem;
}

.surah-arabic-title {
font-size: 1.8rem;
}

.surah-meta-info {
flex-direction: column;
gap: 0.5rem;
}

.surah-play-btn {
width: 40px;
height: 40px;
padding: 0.6rem;
top: 1rem;
right: 1rem;
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
color: var(--text-primary);
border-radius: 8px;
}

.surah-play-btn:hover {
background: var(--primary-color);
color: var(--bg-primary);
transform: scale(1.05);
}

.verse-card {
padding: 0.8rem;
}

.verse-translation {
font-size: calc(0.9rem * var(--font-size-multiplier));
padding: 0.4rem;
}

.verse-arabic {
font-size: calc(1.1rem * var(--arabic-font-size-multiplier));
padding: 0.4rem;
}

.verse-detail-header {
padding: 0.4rem;
margin-bottom: 1rem;
}

.verse-detail-translation {
font-size: calc(0.9rem * var(--font-size-multiplier));
padding: 0.4rem;
margin-bottom: 0.5rem;
}

.verse-detail-arabic {
font-size: calc(1.2rem * var(--arabic-font-size-multiplier));
padding: 0.4rem;
margin-bottom: 0.5rem;
}

.verse-detail-transcription {
padding: 0.4rem;
}

.verse-actions {
gap: 0.3rem;
margin-bottom: 0.5rem;
}

.save-btn, .share-btn, .audio-btn-verse {
padding: 0.3rem;
width: 32px;
height: 32px;
}

.words-grid {
grid-template-columns: 1fr;
gap: 0.5rem;
}

.word-item {
padding: 0.8rem;
}

.word-arabic {
font-size: calc(1rem * var(--arabic-font-size-multiplier));
}

.tabs-nav {
flex-direction: row;
gap: 0.25rem;
justify-content: center;
}

.tab-button {
padding: 0.6rem;
font-size: calc(0.75rem * var(--font-size-multiplier));
flex: 1;
text-align: center;
}

.font-size-grid {
grid-template-columns: repeat(2, 1fr);
}

.donation-button {
padding: 1rem 2rem;
font-size: calc(1rem * var(--font-size-multiplier));
}

.support-header {
padding: 1rem;
}

.support-title {
font-size: 1.5rem;
}

/* Word Detail Mobile Styles */
.word-detail-header {
padding: 1rem;
}

.word-detail-title {
font-size: 1.5rem;
flex-direction: column;
gap: 0.5rem;
}

.word-arabic-large {
font-size: calc(2rem * var(--arabic-font-size-multiplier));
}

.word-transcription-large {
font-size: calc(1.2rem * var(--font-size-multiplier));
}

.word-meaning-large {
font-size: calc(1rem * var(--font-size-multiplier));
}

.word-root-details {
flex-direction: column;
gap: 0.5rem;
}

.word-verses-section {
padding: 1rem;
}

.word-verse-item {
padding: 1rem;
}

.word-verse-translation {
padding: 0.8rem;
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.word-verse-arabic {
font-size: calc(1.1rem * var(--arabic-font-size-multiplier));
padding: 0.8rem;
}

.word-verse-transcription {
padding: 0.5rem 0.8rem;
font-size: calc(0.8rem * var(--font-size-multiplier));
}

/* Root Detail Mobile Styles */
.root-detail-header {
padding: 1rem;
}

.root-detail-title {
font-size: 1.5rem;
flex-direction: column;
gap: 0.5rem;
}

.root-arabic-large {
font-size: calc(2rem * var(--arabic-font-size-multiplier));
}

.root-latin-large {
font-size: calc(1.2rem * var(--font-size-multiplier));
}

.root-meaning-large {
font-size: calc(1rem * var(--font-size-multiplier));
}

.root-words-section {
padding: 1rem;
}

.root-words-grid {
grid-template-columns: 1fr;
gap: 0.5rem;
}

.root-word-item {
padding: 0.8rem;
}

.root-word-arabic {
font-size: calc(1.1rem * var(--arabic-font-size-multiplier));
}
}

@media (max-width: 480px) {
:root {
--font-size-multiplier: 1.2;
--arabic-font-size-multiplier: 1.3;
}

.words-grid {
grid-template-columns: repeat(2, 1fr) !important;
gap: 0.4rem;
}

.word-item {
padding: 0.5rem;
}

.header {
padding: 0.3rem 0.6rem;
height: 45px;
}

.logo {
font-size: 0.8rem;
}

.content {
padding: 0.6rem;
}

.home-hero h1 {
font-size: 1.2rem;
}

.pwa-install-panel {
padding: 0.8rem;
margin-bottom: 1.5rem;
}

.pwa-app-logo {
width: 36px;
height: 36px;
font-size: 0.9rem;
}

.pwa-download-btn {
padding: 0.5rem 5rem;
font-size: 0.75rem;
}

.surahs-grid {
grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
gap: 0.4rem;
}

.surah-card {
padding: 0.6rem;
}

.surah-number {
width: 1.5rem;
height: 1.5rem;
font-size: 0.7rem;
}

.theme-grid {
grid-template-columns: repeat(2, 1fr);
}

.audio-player {
padding: 0.2rem;
height: 45px;
}

.audio-main-controls {
gap: 0.2rem;
}

.audio-btn {
width: 24px;
height: 24px;
}

.audio-play-btn {
width: 28px;
height: 28px;
}

.audio-close {
width: 24px;
height: 24px;
}

.search-page-header {
padding: 0.8rem;
}

.search-page-title {
font-size: 1.3rem;
}

.search-result {
padding: 0.8rem;
}

.verse-card {
padding: 0.6rem;
}

.verse-translation {
padding: 0.3rem;
}

.verse-arabic {
padding: 0.3rem;
}

.verse-detail-header {
padding: 0.3rem;
margin-bottom: 0.8rem;
}

.verse-detail-translation {
padding: 0.3rem;
margin-bottom: 0.3rem;
}

.verse-detail-arabic {
padding: 0.3rem;
margin-bottom: 0.3rem;
}

.verse-detail-transcription {
padding: 0.3rem;
}

.save-btn, .share-btn, .audio-btn-verse {
width: 28px;
height: 28px;
padding: 0.25rem;
}

.word-item {
padding: 0.6rem;
}

.tab-button {
padding: 0.5rem;
font-size: calc(0.7rem * var(--font-size-multiplier));
}

.donation-button {
padding: 0.8rem 1.5rem;
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.support-header {
padding: 0.8rem;
}

.support-title {
font-size: 1.3rem;
}

/* Word Detail Small Mobile Styles */
.word-detail-header {
padding: 0.8rem;
}

.word-detail-title {
font-size: 1.3rem;
}

.word-arabic-large {
font-size: calc(1.8rem * var(--arabic-font-size-multiplier));
}

.word-transcription-large {
font-size: calc(1rem * var(--font-size-multiplier));
}

.word-meaning-large {
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.word-verses-section {
padding: 0.8rem;
}

.word-verse-item {
padding: 0.8rem;
}

.word-verse-translation {
padding: 0.6rem;
font-size: calc(0.85rem * var(--font-size-multiplier));
}

.word-verse-arabic {
font-size: calc(1rem * var(--arabic-font-size-multiplier));
padding: 0.6rem;
}

.word-verse-transcription {
padding: 0.4rem 0.6rem;
font-size: calc(0.75rem * var(--font-size-multiplier));
}

/* Root Detail Small Mobile Styles */
.root-detail-header {
padding: 0.8rem;
}

.root-detail-title {
font-size: 1.3rem;
}

.root-arabic-large {
font-size: calc(1.8rem * var(--arabic-font-size-multiplier));
}

.root-latin-large {
font-size: calc(1rem * var(--font-size-multiplier));
}

.root-meaning-large {
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.root-words-section {
padding: 0.8rem;
}

.root-words-grid {
grid-template-columns: 1fr;
gap: 0.4rem;
}

.root-word-item {
padding: 0.6rem;
}

.root-word-arabic {
font-size: calc(1rem * var(--arabic-font-size-multiplier));
}
}

.hidden {
display: none !important;
}

.text-center {
text-align: center;
}

.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }

.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-3 { margin-top: 0.75rem; }
.mt-4 { margin-top: 1rem; }

.surah-detail {
max-width: 1000px;
margin: 0 auto;
}

.surah-detail-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 20px;
padding: 2rem;
margin-bottom: 2rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
text-align: center;
position: relative;
}

.surah-title {
font-size: calc(2rem * var(--font-size-multiplier));
font-weight: 700;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin-bottom: 0.5rem;
}

.surah-arabic-title {
font-size: calc(2.5rem * var(--arabic-font-size-multiplier));
margin: 1rem 0;
transition: all 0.3s ease;
}

.surah-detail-header:hover .surah-arabic-title {
transform: scale(1.05);
}

.surah-meta-info {
display: flex;
justify-content: center;
gap: 2rem;
margin-top: 1rem;
flex-wrap: wrap;
}

.meta-detail {
display: flex;
align-items: center;
gap: 0.5rem;
color: var(--text-secondary);
font-size: calc(0.875rem * var(--font-size-multiplier));
}

.surah-play-btn {
position: absolute;
top: 1.5rem;
right: 1.5rem;
background: var(--primary-color);
color: var(--bg-primary);
border: none;
padding: 1rem;
border-radius: 50%;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
width: 60px;
height: 60px;
box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.surah-play-btn:hover {
transform: scale(1.1);
box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
}

.verses-container {
display: flex;
flex-direction: column;
gap: 1.5rem;
}

.verse-card {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1.5rem;
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
opacity: 0;
animation: slideInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.verse-card:nth-child(odd) {
animation-delay: 0.1s;
}

.verse-card:nth-child(even) {
animation-delay: 0.2s;
}

.verse-card:hover {
transform: translateY(-5px) scale(1.01);
box-shadow: 0 12px 40px var(--shadow-dark);
border-color: var(--wire-color);
}

.verse-number-badge {
display: inline-flex;
align-items: center;
justify-content: center;
width: 2rem;
height: 2rem;
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
border-radius: 50%;
font-size: calc(0.875rem * var(--font-size-multiplier));
font-weight: 600;
margin-bottom: 1rem;
transition: all 0.3s ease;
}

.verse-card:hover .verse-number-badge {
background: var(--wire-color);
transform: scale(1.1);
}

.verse-translation {
color: var(--text-primary);
font-size: calc(1.05rem * var(--font-size-multiplier));
line-height: 1.7;
margin-bottom: 1rem;
text-align: left;
background: var(--bg-tertiary);
padding: 1rem;
border-radius: 12px;
border: 1px solid var(--border-color);
}

.verse-arabic {
padding: 1rem;
background: transparent;
border-radius: 12px;
transition: all 0.3s ease;
}

.verse-card:hover .verse-arabic {
transform: scale(1.01);
}

.verse-detail {
max-width: 1000px;
margin: 0 auto;
position: relative;
}

.verse-detail-header {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 20px;
padding: 1.5rem 1rem;
margin-bottom: 1.5rem;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
position: relative;
}

.verse-detail-translation {
font-size: calc(1.4rem * var(--font-size-multiplier));
line-height: 1.8;
color: var(--text-primary);
text-align: left;
margin-bottom: 1rem;
font-weight: 500;
background: var(--bg-tertiary);
padding: 1rem;
border-radius: 12px;
border: 1px solid var(--border-color);
}

.verse-detail-arabic {
font-size: calc(2rem * var(--arabic-font-size-multiplier));
margin-bottom: 0.75rem;
padding: 1rem;
background: transparent;
border-radius: 12px;
text-align: right;
}

.verse-detail-transcription {
font-style: italic;
color: var(--text-secondary);
text-align: left;
font-size: calc(1rem * var(--font-size-multiplier));
padding: 0.5rem;
}

.verse-actions {
display: flex;
gap: 0.5rem;
margin-bottom: 0.75rem;
justify-content: flex-end;
}

.save-btn, .share-btn, .audio-btn-verse {
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
padding: 0.5rem;
border-radius: 8px;
cursor: pointer;
color: var(--text-secondary);
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
}

.save-btn:hover, .share-btn:hover, .audio-btn-verse:hover {
background: var(--primary-color);
color: var(--bg-primary);
transform: scale(1.1);
}

.save-btn.saved {
background: var(--primary-color);
color: var(--bg-primary);
}

.verse-navigation {
display: flex;
justify-content: space-between;
align-items: center;
margin: 1.5rem 0;
gap: 1rem;
}

.nav-btn {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
padding: 0.75rem 1rem;
border-radius: 12px;
cursor: pointer;
color: var(--text-primary);
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 0.5rem;
font-size: calc(0.8rem * var(--font-size-multiplier));
text-decoration: none;
min-width: 100px;
justify-content: center;
}

.nav-btn:hover {
background: var(--bg-tertiary);
border-color: var(--wire-color);
transform: translateY(-2px);
}

.nav-btn.disabled {
opacity: 0.5;
cursor: not-allowed;
transform: none;
}

.nav-btn.disabled:hover {
background: var(--bg-secondary);
border-color: var(--border-color);
transform: none;
}

.tabs-container {
margin-top: 1.5rem;
}

.tabs-nav {
display: flex;
gap: 0.5rem;
margin-bottom: 1rem;
border-bottom: 1px solid var(--border-color);
}

.tab-button {
background: none;
border: none;
padding: 1rem 1.5rem;
color: var(--text-secondary);
cursor: pointer;
border-radius: 8px 8px 0 0;
transition: all 0.3s ease;
font-size: calc(0.9rem *var(--font-size-multiplier));
font-weight: 500;
display: flex;
align-items: center;
gap: 0.5rem;
}

.tab-button.active {
background: var(--bg-secondary);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-bottom: 1px solid var(--bg-secondary);
}

.tab-button:hover:not(.active) {
background: var(--bg-tertiary);
color: var(--text-primary);
}

.tab-content {
display: none;
animation: fadeIn 0.3s ease;
}

.tab-content.active {
display: block;
}

.words-analysis {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1rem;
}

.words-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 0.75rem;
}

.word-item {
background: var(--bg-primary);
padding: 0.75rem;
border-radius: 12px;
border: 1px solid var(--border-color);
cursor: pointer;
transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.word-item:hover {
box-shadow: 0 6px 20px var(--shadow-dark);
border-color: var(--primary-color);
transform: translateY(-3px) scale(1.02);
}

.word-arabic {
font-size: calc(1.25rem * var(--arabic-font-size-multiplier));
margin-bottom: 0.5rem;
transition: all 0.3s ease;
}

.word-item:hover .word-arabic {
transform: scale(1.05);
}

.word-transcription {
font-size: calc(0.875rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-style: italic;
margin-bottom: 0.25rem;
}

.word-translation {
font-size: calc(0.875rem * var(--font-size-multiplier));
color: var(--text-primary);
font-weight: 500;
margin-bottom: 0.5rem;
}

.word-root {
padding-top: 0.5rem;
border-top: 1px solid var(--border-color);
font-size: calc(0.75rem * var(--font-size-multiplier));
color: var(--text-muted);
}

.translations-container {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1rem;
}

.translation-item {
padding: 0.75rem;
margin-bottom: 0.75rem;
background: var(--bg-primary);
border-radius: 12px;
border: 1px solid var(--border-color);
}

.translation-item:last-child {
margin-bottom: 0;
}

.translation-author {
font-size: calc(0.875rem * var(--font-size-multiplier));
color: var(--text-secondary);
font-weight: 600;
margin-bottom: 0.5rem;
}

.translation-text {
font-size: calc(1rem * var(--font-size-multiplier));
line-height: 1.6;
color: var(--text-primary);
}

.saved-verses {
max-width: 1000px;
margin: 0 auto;
}

.saved-verse-item {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 1.5rem;
margin-bottom: 1.5rem;
transition: all 0.3s ease;
}

.saved-verse-item:hover {
box-shadow: 0 8px 25px var(--shadow-dark);
border-color: var(--wire-color);
transform: translateY(-3px);
}

.saved-verse-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 1rem;
}

.saved-verse-title {
font-size: calc(1.1rem * var(--font-size-multiplier));
font-weight: 600;
color: var(--primary-color);
}

.saved-verse-date {
font-size: calc(0.8rem * var(--font-size-multiplier));
color: var(--text-muted);
}

.saved-verse-note {
background: var(--bg-tertiary);
border: 1px solid var(--border-color);
border-radius: 8px;
padding: 0.75rem;
margin-top: 1rem;
font-size: calc(0.9rem * var(--font-size-multiplier));
color: var(--text-secondary);
}

.remove-saved-btn {
background: #dc2626;
color: white;
border: none;
padding: 0.5rem;
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
}

.remove-saved-btn:hover {
background: #b91c1c;
transform: scale(1.05);
}

.save-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.8);
z-index: 2000;
display: none;
align-items: center;
justify-content: center;
}

.save-modal.active {
display: flex;
}

.save-modal-content {
background: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 16px;
padding: 2rem;
width: 90%;
max-width: 500px;
animation: slideUp 0.3s ease;
}

.save-modal h3 {
margin-bottom: 1rem;
color: var(--text-primary);
font-size: calc(1.2rem * var(--font-size-multiplier));
}

.save-note-input {
width: 100%;
padding: 1rem;
background: var(--bg-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
color: var(--text-primary);
font-size: calc(0.9rem * var(--font-size-multiplier));
resize: vertical;
min-height: 100px;
margin-bottom: 1rem;
}

.save-modal-actions {
display: flex;
gap: 1rem;
justify-content: flex-end;
}

.save-modal-btn {
padding: 0.75rem 1.5rem;
border: 1px solid var(--border-color);
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
font-size: calc(0.9rem * var(--font-size-multiplier));
}

.save-modal-btn.primary {
background: var(--primary-color);
color: var(--bg-primary);
border-color: var(--primary-color);
}

.save-modal-btn.secondary {
background: var(--bg-tertiary);
color: var(--text-primary);
}

.save-modal-btn:hover {
transform: translateY(-2px);
}

.loading {
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
padding: 4rem 2rem;
text-align: center;
}

.spinner {
width: 40px;
height: 40px;
border: 2px solid var(--border-color);
border-top: 2px solid var(--primary-color);
border-radius: 50%;
animation: spin 1s linear infinite;
margin-bottom: 1rem;
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.loading-text {
color: var(--text-secondary);
font-size: calc(1rem * var(--font-size-multiplier));
animation: pulse 2s infinite;
}

@keyframes pulse {
0%, 100% { opacity: 0.5; }
50% { opacity: 1; }
}

.error {
background: var(--bg-secondary);
border: 1px solid #ff4444;
color: #ff6666;
padding: 1rem;
border-radius: 12px;
margin: 1rem 0;
text-align: center;
font-size: calc(1rem * var(--font-size-multiplier));
}
</style>
</head>     
<body data-theme="dark">
<!-- Header -->
<header class="header">
<div class="header-content">
<a href="#" class="logo" onclick="showHome()">SADECE KURAN</a>
<div class="header-actions">
<button class="search-btn ripple" onclick="app.showSearchPage()">
<svg class="icon" viewBox="0 0 24 24">
<circle cx="11" cy="11" r="8"></circle>
<path d="m21 21-4.35-4.35"></path>
</svg>
</button>
<button class="saved-btn ripple" onclick="app.showSavedVerses()">
<svg class="icon icon-sm" viewBox="0 0 24 24">
<path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
</svg>
<span>Kaydedilenler</span>
</button>
<a href="#destekle" class="support-btn ripple">
<svg class="icon icon-sm" viewBox="0 0 24 24">
<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
</svg>
<span>Destekle</span>
</a>
<button class="settings-btn ripple" onclick="app.showSettings()">
<svg class="icon" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="3"></circle>
<path d="M12 1v6m0 6v6"></path>
<path d="m15.5 3.5-3 3-3-3"></path>
<path d="m15.5 20.5-3-3-3 3"></path>
<path d="M1 12h6m6 0h6"></path>
<path d="m3.5 15.5 3-3 3 3"></path>
<path d="m20.5 15.5-3-3-3 3"></path>
</svg>
</button>
<button class="theme-btn ripple" onclick="app.toggleTheme()">
<svg class="icon" viewBox="0 0 24 24">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" y1="1" x2="12" y2="3"></line>
<line x1="12" y1="21" x2="12" y2="23"></line>
<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
<line x1="1" y1="12" x2="3" y2="12"></line>
<line x1="21" y1="12" x2="23" y2="12"></line>
<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>
</button>
</div>
</div>
</header>

<!-- Save Modal -->
<div class="save-modal" id="saveModal">
<div class="save-modal-content">
<h3>Ayeti Kaydet</h3>
<textarea class="save-note-input" id="saveNoteInput" placeholder="Bu ayet hakkında notunuzu yazın..."></textarea>
<div class="save-modal-actions">
<button class="save-modal-btn secondary ripple" onclick="app.closeSaveModal()">İptal</button>
<button class="save-modal-btn primary ripple" onclick="app.confirmSaveVerse()">Kaydet</button>
</div>
</div>
</div>

<!-- Audio Player -->
<div class="audio-player" id="audioPlayer">
<div class="audio-controls">
<div class="audio-main-controls">
<button class="audio-btn ripple" id="audioPrevBtn" onclick="app.previousTrack()" title="Önceki">
<svg class="icon" viewBox="0 0 24 24">
<polygon points="19,20 9,12 19,4"></polygon>
<line x1="5" y1="19" x2="5" y2="5"></line>
</svg>
</button>
<button class="audio-play-btn ripple" id="audioPlayBtn" onclick="app.toggleAudio()">
<svg class="icon" viewBox="0 0 24 24">
<polygon points="5,3 19,12 5,21"></polygon>
</svg>
</button>
<button class="audio-btn ripple" id="audioNextBtn" onclick="app.nextTrack()" title="Sonraki">
<svg class="icon" viewBox="0 0 24 24">
<polygon points="5,4 15,12 5,20"></polygon>
<line x1="19" y1="5" x2="19" y2="19"></line>
</svg>
</button>
<button class="audio-btn ripple" id="audioRepeatBtn" onclick="app.toggleRepeat()" title="Tekrar">
<svg class="icon" viewBox="0 0 24 24">
<polyline points="17,1 21,5 17,9"></polyline>
<path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
<polyline points="7,23 3,19 7,15"></polyline>
<path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
</svg>
</button>
<button class="audio-btn ripple" id="audioShuffleBtn" onclick="app.toggleShuffle()" title="Karıştır">
<svg class="icon" viewBox="0 0 24 24">
<polyline points="16,3 21,3 21,8"></polyline>
<line x1="4" y1="20" x2="21" y2="3"></line>
<polyline points="21,16 21,21 16,21"></polyline>
<line x1="15" y1="15" x2="21" y2="21"></line>
<line x1="4" y1="4" x2="9" y2="9"></line>
</svg>
</button>
</div>
<div class="audio-info">
<div class="audio-title" id="audioTitle">Sure Adı</div>
<div class="audio-progress-container">
<div class="audio-progress" onclick="app.seekAudio(event)">
<div class="audio-progress-bar" id="audioProgressBar"></div>
</div>
</div>
<div class="audio-time">
<span id="currentTime">0:00</span>
<span id="totalTime">0:00</span>
</div>
</div>
<div class="audio-volume-control">
<button class="audio-btn ripple" onclick="app.toggleMute()" title="Sessiz">
<svg class="icon" viewBox="0 0 24 24" id="volumeIcon">
<polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
<path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
</svg>
</button>
<input type="range" class="audio-volume-slider" id="audioVolumeSlider" min="0" max="100" value="50" onchange="app.setAudioVolume(this.value)">
</div>
<button class="audio-close ripple" onclick="app.closeAudio()">
<svg class="icon" viewBox="0 0 24 24">
<line x1="18" y1="6" x2="6" y2="18"></line>
<line x1="6" y1="6" x2="18" y2="18"></line>
</svg>
</button>
</div>
<audio id="audioElement"></audio>
</div>

<!-- Main Content -->
<main class="main">
<div class="content swipe-container" id="content">
<!-- Content will be populated by JavaScript -->
</div>
</main>

<script>
class QuranApp {
constructor() {
this.data = null;
this.translationsData = null;
this.currentHash = '';
this.searchIndex = new Map();
this.currentTheme = localStorage.getItem('theme') || 'dark';
this.savedVerses = JSON.parse(localStorage.getItem('savedVerses') || '[]');
this.currentAudio = null;
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
this.pendingSaveVerse = null;
this.touchStartX = 0;
this.touchEndX = 0;
this.audioState = {
isPlaying: false,
currentTime: 0,
duration: 0,
volume: 0.5,
isMuted: false,
isRepeat: false,
isShuffle: false,
playlist: [],
currentIndex: 0
};
this.settings = {
showTranscription: localStorage.getItem('showTranscription') !== 'false',
showArabicText: localStorage.getItem('showArabicText') !== 'false',
autoPlay: localStorage.getItem('autoPlay') === 'true',
volume: parseFloat(localStorage.getItem('volume') || '0.5'),
defaultTranslationAuthor: localStorage.getItem('defaultTranslationAuthor') || null,
fontSize: localStorage.getItem('fontSize') || 'normal',
arabicFontSize: localStorage.getItem('arabicFontSize') || 'normal'
};
this.init();
}

async init() {
try {
this.setTheme(this.currentTheme);
this.setFontSize(this.settings.fontSize);
this.setArabicFontSize(this.settings.arabicFontSize);
await this.loadData();
await this.loadTranslationsData();
this.setDefaultAuthorFromData();
this.buildSearchIndex();
this.setupEventListeners();
this.handleRoute();
this.updateSettingsUI();
} catch (error) {
console.error('Initialization error:', error);
this.showError('Veri yüklenirken bir hata oluştu.');
}

// Add this at the end of the init method
setTimeout(() => {
// Add ripple class to all interactive elements
const interactiveElements = document.querySelectorAll('button, a, .surah-card, .verse-card, .setting-item, .theme-option, .font-size-option');
interactiveElements.forEach(element => {
if (!element.classList.contains('ripple')) {
    element.classList.add('ripple');
}
});
}, 1000);
}

setDefaultAuthorFromData() {
if (!this.settings.defaultTranslationAuthor) {
const availableAuthors = this.getAvailableTranslationAuthors();
if (availableAuthors.length > 0) {
this.settings.defaultTranslationAuthor = availableAuthors[0];
localStorage.setItem('defaultTranslationAuthor', this.settings.defaultTranslationAuthor);
}
}
}

async loadData() {
this.showLoading();
try {
const response = await fetch('all_surahs_data.json');
if (!response.ok) {
throw new Error(`HTTP error! status: ${response.status}`);
}
const data = await response.json();
this.data = data.surahs || data;
console.log('Data loaded successfully:', this.data.length, 'surahs');
} catch (error) {
console.error('Error loading data:', error);
this.data = [];
}
}

async loadTranslationsData() {
try {
const response = await fetch('kuran_mealleri.json');
if (!response.ok) {
throw new Error(`HTTP error! status: ${response.status}`);
}
const data = await response.json();
this.translationsData = data.surahs || data;
console.log('Translations data loaded successfully:', this.translationsData.length, 'surahs');
} catch (error) {
console.error('Error loading translations data:', error);
this.translationsData = null;
}
}

setTheme(theme) {
this.currentTheme = theme;
document.documentElement.setAttribute('data-theme', theme);
localStorage.setItem('theme', theme);

const themeBtn = document.querySelector('.theme-btn .icon');
if (themeBtn) {
if (theme === 'dark') {
themeBtn.innerHTML = `
    <circle cx="12" cy="12" r="5"></circle>
    <line x1="12" y1="1" x2="12" y2="3"></line>
    <line x1="12" y1="21" x2="12" y2="23"></line>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
    <line x1="1" y1="12" x2="3" y2="12"></line>
    <line x1="21" y1="12" x2="23" y2="12"></line>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
`;
} else if (theme === 'light') {
themeBtn.innerHTML = `
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
`;
} else {
themeBtn.innerHTML = `
    <circle cx="12" cy="12" r="4"></circle>
    <path d="M12 2v2"></path>
    <path d="M12 20v2"></path>
    <path d="m4.93 4.93 1.41 1.41"></path>
    <path d="m17.66 17.66 1.41 1.41"></path>
    <path d="M2 12h2"></path>
    <path d="M20 12h2"></path>
    <path d="m6.34 17.66-1.41 1.41"></path>
    <path d="m19.07 4.93-1.41 1.41"></path>
`;
}
}
}

toggleTheme() {
const themes = ['dark', 'light', 'sepia', 'blue', 'green', 'purple', 'rose'];
const currentIndex = themes.indexOf(this.currentTheme);
const nextIndex = (currentIndex + 1) % themes.length;
this.setTheme(themes[nextIndex]);
}

setFontSize(size) {
this.settings.fontSize = size;
localStorage.setItem('fontSize', size);

const multipliers = {
'small': 0.85,
'normal': 1,
'large': 1.15,
'xlarge': 1.3
};

document.documentElement.style.setProperty('--font-size-multiplier', multipliers[size] || 1);
}

setArabicFontSize(size) {
this.settings.arabicFontSize = size;
localStorage.setItem('arabicFontSize', size);

const multipliers = {
'small': 0.9,
'normal': 1,
'large': 1.2,
'xlarge': 1.4
};

document.documentElement.style.setProperty('--arabic-font-size-multiplier', multipliers[size] || 1);
}

toggleArabicText() {
this.settings.showArabicText = !this.settings.showArabicText;
localStorage.setItem('showArabicText', this.settings.showArabicText);
this.updateArabicTextVisibility();
this.updateSettingsUI();
}

updateArabicTextVisibility() {
const arabicElements = document.querySelectorAll('.arabic');
arabicElements.forEach(element => {
if (this.settings.showArabicText) {
element.classList.remove('hidden');
} else {
element.classList.add('hidden');
}
});
}

showSettings() {
window.location.hash = 'ayarlar';
}

showSearchPage() {
window.location.hash = 'ara';
}

updateSettingsUI() {
// Update toggle switches
const arabicToggle = document.querySelector('[onclick="app.toggleArabicText()"]');
if (arabicToggle) {
if (this.settings.showArabicText) {
arabicToggle.classList.add('active');
} else {
arabicToggle.classList.remove('active');
}
}

const transcriptionToggle = document.querySelector('[onclick="app.toggleTranscription()"]');
if (transcriptionToggle) {
if (this.settings.showTranscription) {
transcriptionToggle.classList.add('active');
} else {
transcriptionToggle.classList.remove('active');
}
}

const autoPlayToggle = document.querySelector('[onclick="app.toggleAutoPlay()"]');
if (autoPlayToggle) {
if (this.settings.autoPlay) {
autoPlayToggle.classList.add('active');
} else {
autoPlayToggle.classList.remove('active');
}
}

// Update font size options
document.querySelectorAll('.font-size-option').forEach(option => {
option.classList.remove('active');
});

const activeFontSizeOption = document.querySelector(`[onclick="app.setFontSize('${this.settings.fontSize}')"]`);
if (activeFontSizeOption) {
activeFontSizeOption.classList.add('active');
}

const activeArabicFontSizeOption = document.querySelector(`[onclick="app.setArabicFontSize('${this.settings.arabicFontSize}')"]`);
if (activeArabicFontSizeOption) {
activeArabicFontSizeOption.classList.add('active');
}
}

toggleTranscription() {
this.settings.showTranscription = !this.settings.showTranscription;
localStorage.setItem('showTranscription', this.settings.showTranscription);
this.updateSettingsUI();
}

toggleAutoPlay() {
this.settings.autoPlay = !this.settings.autoPlay;
localStorage.setItem('autoPlay', this.settings.autoPlay);
this.updateSettingsUI();
}

setVolume(value) {
this.settings.volume = value / 100;
localStorage.setItem('volume', this.settings.volume);
this.audioState.volume = this.settings.volume;
const audioElement = document.getElementById('audioElement');
if (audioElement) {
audioElement.volume = this.settings.volume;
}
}

setDefaultTranslationAuthor(author) {
this.settings.defaultTranslationAuthor = author;
localStorage.setItem('defaultTranslationAuthor', author);
this.updateSettingsUI();
}

getAvailableTranslationAuthors() {
const authors = new Set();

// Çeviri verilerinden yazarları ekle
if (this.translationsData) {
this.translationsData.forEach(surah => {
surah.verses?.forEach(verse => {
    verse.translations?.forEach(translation => {
        if (translation.author && translation.text && translation.text.trim()) {
            authors.add(translation.author);
        }
    });
});
});
}

return Array.from(authors).sort();
}

buildSearchIndex() {
if (!this.data) return;

this.data.forEach(surah => {
this.addToSearchIndex('surah', surah.name.toLowerCase(), {
type: 'sure',
id: surah.id,
title: surah.name,
content: `${surah.name} - ${surah.name_original}`,
url: `#sure-${surah.id}`
});

surah.verses?.forEach(verse => {
// Çeviri verilerinden meal al
const translation = this.getPreferredTranslation(surah.id, verse.verse_number);
if (translation) {
    this.addToSearchIndex('verse', translation.toLowerCase(), {
        type: 'ayet',
        id: `${surah.id}-${verse.verse_number}`,
        title: `${surah.name} ${verse.verse_number}. Ayet`,
        content: translation,
        url: `#ayet-${surah.id}-${verse.verse_number}`
    });
}

verse.words?.forEach((word, wordIndex) => {
    if (word.translation_tr) {
        this.addToSearchIndex('word', word.translation_tr.toLowerCase(), {
            type: 'kelime',
            id: `${surah.id}-${verse.verse_number}-${wordIndex}`,
            title: `${word.arabic} - ${word.translation_tr}`,
            content: `${word.transcription_tr} - ${word.translation_tr}`,
            url: `#kelime-${surah.id}-${verse.verse_number}-${wordIndex}`
        });
    }

    if (word.root) {
        this.addToSearchIndex('root', word.root.latin.toLowerCase(), {
            type: 'kök',
            id: word.root.latin,
            title: `${word.root.arabic} (${word.root.latin})`,
            content: word.root.meaning || 'Kök anlamı',
            url: `#kok-${word.root.latin}`
        });
    }
});
});
});
}

addToSearchIndex(category, term, item) {
if (!this.searchIndex.has(category)) {
this.searchIndex.set(category, new Map());
}

const categoryIndex = this.searchIndex.get(category);
if (!categoryIndex.has(term)) {
categoryIndex.set(term, []);
}
categoryIndex.get(term).push(item);
}

highlightText(text, query) {
if (!query || query.length < 2) return text;

const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
return text.replace(regex, '<span class="highlight">$1</span>');
}

setupEventListeners() {
window.addEventListener('hashchange', () => {
this.handleRoute();
// Scroll to top when route changes
setTimeout(() => this.scrollToTop(), 100);
});

const content = document.getElementById('content');

// Touch event listeners - sadece ayet sayfasında aktif
content.addEventListener('touchstart', (e) => {
// Sadece ayet sayfasında swipe özelliğini etkinleştir
if (this.isVerseDetailPage()) {
this.touchStartX = e.changedTouches[0].screenX;
}
});

content.addEventListener('touchend', (e) => {
// Sadece ayet sayfasında swipe özelliğini etkinleştir
if (this.isVerseDetailPage()) {
this.touchEndX = e.changedTouches[0].screenX;
this.handleSwipe();
}
});

document.addEventListener('click', (e) => {
if (e.target.classList.contains('save-modal')) {
this.closeSaveModal();
}
});

document.addEventListener('keydown', (e) => {
if (e.key === 'Escape') {
this.closeSaveModal();
}
if (e.ctrlKey && e.key === 'k') {
e.preventDefault();
this.showSearchPage();
}
// Klavye navigasyonu sadece ayet sayfasında
if (this.isVerseDetailPage()) {
if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
    e.preventDefault();
    this.navigateToPreviousVerse();
}
if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
    e.preventDefault();
    this.navigateToNextVerse();
}
}
if (e.key === ' ' && this.currentAudio) {
e.preventDefault();
this.toggleAudio();
}
});
}

// Yeni yardımcı fonksiyon - ayet detay sayfasında olup olmadığını kontrol eder
isVerseDetailPage() {
return this.currentHash.startsWith('ayet-') && this.currentSurahId && this.currentVerseNumber;
}

handleSwipe() {
if (!this.isVerseDetailPage()) return;

const swipeThreshold = 50;
const swipeDistance = this.touchEndX - this.touchStartX;

if (Math.abs(swipeDistance) > swipeThreshold) {
if (swipeDistance > 0) {
this.navigateToPreviousVerse();
} else {
this.navigateToNextVerse();
}
}
}

handleRoute() {
const hash = window.location.hash.slice(1);
this.currentHash = hash;

if (!hash) {
this.renderHome();
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash.startsWith('sure-')) {
const surahId = parseInt(hash.split('-')[1]);
this.renderSurah(surahId);
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash.startsWith('ayet-')) {
const parts = hash.split('-');
const surahId = parseInt(parts[1]);
const verseNumber = parseInt(parts[2]);
this.currentSurahId = surahId;
this.currentVerseNumber = verseNumber;
this.currentWordId = null;
this.renderVerse(surahId, verseNumber);
} else if (hash.startsWith('kelime-')) {
const parts = hash.split('-');
const surahId = parseInt(parts[1]);
const verseNumber = parseInt(parts[2]);
const wordIndex = parseInt(parts[3]);
this.currentSurahId = surahId;
this.currentVerseNumber = verseNumber;
this.currentWordId = `${surahId}-${verseNumber}-${wordIndex}`;
this.renderWordDetail(surahId, verseNumber, wordIndex);
} else if (hash.startsWith('kok-')) {
const rootLatin = hash.substring(4);
this.renderRootDetail(rootLatin);
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash === 'ara') {
this.renderSearchPage();
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash.startsWith('ara-')) {
const query = decodeURIComponent(hash.substring(4));
this.renderSearchResults(query);
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash === 'kaydedilenler') {
this.renderSavedVerses();
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash === 'ayarlar') {
this.renderSettings();
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
} else if (hash === 'destekle') {
this.renderSupportPage();
this.currentSurahId = null;
this.currentVerseNumber = null;
this.currentWordId = null;
}
}

renderHome() {
const content = document.getElementById('content');

content.innerHTML = `
<div class="home-hero">
<h1>SADECE KURAN</h1>
</div>

<!-- PWA Install Panel -->
<div class="pwa-install-panel">
<div class="pwa-panel-left">
   
    <div class="pwa-panel-info">
        <h3>Uygulamayı İndir</h3>
        <p>Offline erişim ve daha hızlı deneyim için uygulamayı cihazınıza yükleyin</p>
    </div>
</div>

<a href="download.html" class="pwa-download-btn ripple">
    <svg class="icon" viewBox="0 0 24 24">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7,10 12,15 17,10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
    </svg>
    Uygulamayı İndir
</a>
</div>

<div class="home-search">
<input type="text" class="home-search-input" id="homeSearchInput" placeholder="Sure, ayet, kelime veya kök ara..." onclick="app.showSearchPage()">
<svg class="icon home-search-icon" viewBox="0 0 24 24">
    <circle cx="11" cy="11" r="8"></circle>
    <path d="m21 21-4.35-4.35"></path>
</svg>
</div>

<div class="surahs-grid" id="surahsGrid">
<!-- Surahs will be populated by JavaScript -->
</div>
`;

this.renderSurahsGrid();
}

renderSupportPage() {
const content = document.getElementById('content');

content.innerHTML = `
<div class="support-page">
<div class="breadcrumb">
    <a href="#" onclick="showHome()">
        <svg class="icon" viewBox="0 0 24 24">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9,22 9,12 15,12 15,22"></polyline>
        </svg>
       
    </a>
    <span>›</span>
    <span>Destekle</span>
</div>

<div class="support-header">
    <h1 class="support-title">Projeyi Destekle</h1>
    <p class="support-description">
        <strong>Hakikatin Tek Kaynağına Davet</strong>
        <br><br>
        Biz, İslam dininin yegâne kaynağının Allah'ın kelamı olan Kur'an-ı Kerim olduğuna inanan bir topluluğuz. Amacımız, dini; hurafelerden, uydurma rivayetlerden ve mezhep temelli insan yorumlarından arındırmak, Allah'ın indirdiği saf ve evrensel mesaja geri dönmektir.
        <br><br>
        Kur'an merkezli bir bilinç inşa etmek için büyük bir çaba içindeyiz. Bu çaba, yalnızca bir inanç meselesi değil; aynı zamanda doğru bilgiye ulaşma, sorgulama ve hakikati yaşama mücadelesidir.
        <br><br>
        Bu doğrultuda:
        <br><br>
        Eğitim içerikleri hazırlıyor,<br>
        Kitaplar, makaleler ve videolar üretiyor,<br>
        Gençlerimize rehber olacak dijital projeler geliştiriyoruz.
        <br><br>
        Toplumda yaygın olan yanlış dini algıları Kur'an ışığında sorgulayan, düşünen, araştıran bireylerin çoğalması için var gücümüzle çalışıyoruz. Fakat bu mücadelede yalnız değiliz — sizin desteğinizle daha da güçlü olabiliriz.
        <br><br>
        Siz de Kur'an'a dayalı bir İslam anlayışının yayılmasına katkıda bulunarak bu hakikat yolculuğunun bir parçası olun.
    </p>

    
    <a href="https://www.patreon.com/sadecekuran/membership" target="_blank" class="donation-button">
        <div class="donation-button-content">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
            </svg>
            Patreon'da Destekle
        </div>
    </a>
    <p class="support-description">
        <br><br>
        info@sadecekuran.com.tr
        <br><br>
        sdckuran@hotmail.com
    
    </p>
    
</div>
</div>
`;
}

renderSearchPage() {
const content = document.getElementById('content');

content.innerHTML = `
<div class="search-page">
<div class="breadcrumb">
    <a href="#" onclick="showHome()">
        <svg class="icon" viewBox="0 0 24 24">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9,22 9,12 15,12 15,22"></polyline>
        </svg>
        
    </a>
    <span>›</span>
    <span>Arama</span>
</div>

<div class="search-page-header">
    <h1 class="search-page-title">Kuran'da Arama</h1>
    <input type="text" class="search-page-input" id="searchPageInput" placeholder="Sure, ayet, kelime veya kök ara..." autofocus>
</div>

<div id="searchPageResults"></div>
</div>
`;

const searchInput = document.getElementById('searchPageInput');
let searchTimeout;

searchInput.addEventListener('input', (e) => {
clearTimeout(searchTimeout);
searchTimeout = setTimeout(() => {
this.handleSearchPageSearch(e.target.value);
}, 300);
});
}

handleSearchPageSearch(query) {
const resultsContainer = document.getElementById('searchPageResults');

if (!query || query.length < 2) {
resultsContainer.innerHTML = '';
return;
}

const results = this.search(query);

if (results.length === 0) {
resultsContainer.innerHTML = `
<div class="search-results">
    <div class="search-header">
        <h2>Sonuç Bulunamadı</h2>
        <div class="search-meta">"${query}" için sonuç bulunamadı</div>
    </div>
</div>
`;
return;
}

resultsContainer.innerHTML = `
<div class="search-results">
<div class="search-header">
    <h2>Arama Sonuçları</h2>
    <div class="search-meta">"${query}" için ${results.length} sonuç bulundu</div>
</div>
${results.slice(0, 20).map(result => `
    <div class="search-result" onclick="window.location.hash='${result.url}';">
        <div class="result-type">${result.type}</div>
        <div class="result-content">
            <h3 style="margin-bottom: 0.5rem; color: var(--text-primary);">${this.highlightText(result.title, query)}</h3>
            <p style="color: var(--text-secondary); line-height: 1.5;">${this.highlightText(result.content, query)}</p>
        </div>
    </div>
`).join('')}
</div>
`;
}

renderSurahsGrid() {
const surahsGrid = document.getElementById('surahsGrid');
if (!this.data || this.data.length === 0) {
surahsGrid.innerHTML = '<div class="loading"><div class="spinner"></div><div class="loading-text">Sureler yükleniyor...</div></div>';
return;
}

surahsGrid.innerHTML = this.data.map((surah, index) => `
<a href="#sure-${surah.id}" class="surah-card ripple" style="animation-delay: ${index * 0.02}s;">
<div class="surah-header">
    <div class="surah-number">${surah.id}</div>
    <div class="surah-info">
        <div class="surah-name">${surah.name}</div>
    </div>
</div>
</a>
`).join('');
}

renderSettings() {
const content = document.getElementById('content');
const availableAuthors = this.getAvailableTranslationAuthors();

content.innerHTML = `
<div class="settings-page">
<div class="breadcrumb">
    <a href="#" onclick="showHome()">
        <svg class="icon" viewBox="0 0 24 24">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9,22 9,12 15,12 15,22"></polyline>
        </svg>
       
    </a>
    <span>›</span>
    <span>Ayarlar</span>
</div>

<div class="settings-header">
    <h1 class="settings-title">Ayarlar</h1>
    <p class="settings-description">Uygulamanızı kişiselleştirin ve deneyiminizi iyileştirin</p>
</div>

<div class="settings-section" style="animation-delay: 0.1s;">
    <h3>
        <svg class="icon" viewBox="0 0 24 24">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
        Meal Ayarları
    </h3>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                </svg>
                Varsayılan Meal Yazarı
            </div>
            <div class="setting-description">Ayetlerde öncelikli olarak gösterilecek meal yazarını seçin</div>
        </div>
        <select class="translation-select" onchange="app.setDefaultTranslationAuthor(this.value)">
            ${availableAuthors.map(author => `
                <option value="${author}" ${author === this.settings.defaultTranslationAuthor ? 'selected' : ''}>${author}</option>
            `).join('')}
        </select>
    </div>
</div>

<div class="settings-section" style="animation-delay: 0.15s;">
    <h3>
        <svg class="icon" viewBox="0 0 24 24">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        Yazı Boyutu Ayarları
    </h3>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 7V4h16v3"></path>
                    <path d="M9 20h6"></path>
                    <path d="M12 4v16"></path>
                </svg>
                Genel Yazı Boyutu
            </div>
            <div class="setting-description">Tüm metinlerin boyutunu ayarlayın</div>
        </div>
        <div class="font-size-grid">
            <div class="font-size-option ripple ${this.settings.fontSize === 'small' ? 'active' : ''}" onclick="app.setFontSize('small')">Küçük</div>
            <div class="font-size-option ripple ${this.settings.fontSize === 'normal' ? 'active' : ''}" onclick="app.setFontSize('normal')">Normal</div>
            <div class="font-size-option ripple ${this.settings.fontSize === 'large' ? 'active' : ''}" onclick="app.setFontSize('large')">Büyük</div>
            <div class="font-size-option ripple ${this.settings.fontSize === 'xlarge' ? 'active' : ''}" onclick="app.setFontSize('xlarge')">Çok Büyük</div>
        </div>
    </div>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 7V4h16v3"></path>
                    <path d="M9 20h6"></path>
                    <path d="M12 4v16"></path>
                    <circle cx="18" cy="18" r="3"></circle>
                </svg>
                Arapça Yazı Boyutu
            </div>
            <div class="setting-description">Arapça metinlerin boyutunu ayrı olarak ayarlayın</div>
        </div>
        <div class="font-size-grid">
            <div class="font-size-option ripple ${this.settings.arabicFontSize === 'small' ? 'active' : ''}" onclick="app.setArabicFontSize('small')">Küçük</div>
            <div class="font-size-option ripple ${this.settings.arabicFontSize === 'normal' ? 'active' : ''}" onclick="app.setArabicFontSize('normal')">Normal</div>
            <div class="font-size-option ripple ${this.settings.arabicFontSize === 'large' ? 'active' : ''}" onclick="app.setArabicFontSize('large')">Büyük</div>
            <div class="font-size-option ripple ${this.settings.arabicFontSize === 'xlarge' ? 'active' : ''}" onclick="app.setArabicFontSize('xlarge')">Çok Büyük</div>
        </div>
    </div>
</div>

<div class="settings-section" style="animation-delay: 0.2s;">
    <h3>
        <svg class="icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6"></path>
            <path d="m15.5 3.5-3 3-3-3"></path>
            <path d="m15.5 20.5-3-3-3 3"></path>
            <path d="M1 12h6m6 0h6"></path>
            <path d="m3.5 15.5 3-3 3 3"></path>
            <path d="m20.5 15.5-3-3-3 3"></path>
        </svg>
        Tema Seçimi
    </h3>
    <div class="theme-grid">
        <div class="theme-option ripple ${this.currentTheme === 'dark' ? 'active' : ''}" onclick="app.setTheme('dark')">
            <div class="theme-preview dark"></div>
            🌙 Karanlık
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'light' ? 'active' : ''}" onclick="app.setTheme('light')">
            <div class="theme-preview light"></div>
            ☀️ Aydınlık
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'sepia' ? 'active' : ''}" onclick="app.setTheme('sepia')">
            <div class="theme-preview sepia"></div>
            📜 Sepya
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'blue' ? 'active' : ''}" onclick="app.setTheme('blue')">
            <div class="theme-preview blue"></div>
            🔵 Mavi
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'green' ? 'active' : ''}" onclick="app.setTheme('green')">
            <div class="theme-preview green"></div>
            🟢 Yeşil
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'purple' ? 'active' : ''}" onclick="app.setTheme('purple')">
            <div class="theme-preview purple"></div>
            🟣 Mor
        </div>
        <div class="theme-option ripple ${this.currentTheme === 'rose' ? 'active' : ''}" onclick="app.setTheme('rose')">
            <div class="theme-preview rose"></div>
            🌹 Pembe
        </div>
    </div>
</div>

<div class="settings-section" style="animation-delay: 0.3s;">
    <h3>
        <svg class="icon" viewBox="0 0 24 24">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
        </svg>
        Görünüm Ayarları
    </h3>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 7V4h16v3"></path>
                    <path d="M9 20h6"></path>
                    <path d="M12 4v16"></path>
                    <circle cx="18" cy="18" r="3"></circle>
                </svg>
                Arapça Metni Göster
            </div>
            <div class="setting-description">Arapça ayetleri ve kelimeleri göster/gizle</div>
        </div>
        <div class="toggle-switch ${this.settings.showArabicText ? 'active' : ''}" onclick="app.toggleArabicText()"></div>
    </div>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10,9 9,9 8,9"></polyline>
                </svg>
                Okunuş Göster
            </div>
            <div class="setting-description">Arapça kelimelerin okunuşunu göster</div>
        </div>
        <div class="toggle-switch ${this.settings.showTranscription ? 'active' : ''}" onclick="app.toggleTranscription()"></div>
    </div>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">
                <svg class="icon" viewBox="0 0 24 24">
                    <polygon points="5,3 19,12 5,21"></polygon>
                </svg>
                Otomatik Ses Çalma
            </div>
            <div class="setting-description">Ses dosyası yüklendiğinde otomatik başlat</div>
        </div>
        <div class="toggle-switch ${this.settings.autoPlay ? 'active' : ''}" onclick="app.toggleAutoPlay()"></div>
    </div>
</div>

<div class="settings-section" style="animation-delay: 0.4s;">
    <h3>
        <svg class="icon" viewBox="0 0 24 24">
            <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
            <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
        </svg>
        Ses Ayarları
    </h3>
    <div class="setting-item ripple">
        <div>
            <div class="setting-label">Ses Seviyesi</div>
            <div class="setting-description">Varsayılan ses seviyesini ayarlayın</div>
        </div>
        <input type="range" class="volume-slider" min="0" max="100" value="${this.settings.volume * 100}" onchange="app.setVolume(this.value)">
    </div>
</div>
</div>
`;

// Update UI after rendering
setTimeout(() => {
this.updateSettingsUI();
}, 100);
}

renderSurah(surahId) {
const surah = this.data?.find(s => s.id === surahId);
if (!surah) {
this.showError('Sure bulunamadı.');
return;
}

const content = document.getElementById('content');
content.innerHTML = `
<div class="surah-detail">
    <div class="breadcrumb">
        <a href="#" onclick="showHome()">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
           
        </a>
        <span>›</span>
        <span>${surah.name}</span>
    </div>

    <div class="surah-detail-header">
        <button class="surah-play-btn ripple" onclick="app.playSurah(${surah.id})" title="Sureyi dinle">
            <svg class="icon" viewBox="0 0 24 24">
                <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
        </button>
        <h1 class="surah-title">${surah.name}</h1>
        <div class="surah-arabic-title arabic ${this.settings.showArabicText ? '' : 'hidden'}">${surah.name_original}</div>
        <div class="surah-meta-info">
            <div class="meta-detail">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                <span>Sure No: ${surah.id}</span>
            </div>
            <div class="meta-detail">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                </svg>
                <span>Ayet Sayısı: ${surah.verse_count}</span>
            </div>
            <div class="meta-detail">
                <svg class="icon" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="2" y1="12" x2="6" y2="12"></line>
                    <line x1="18" y1="12" x2="22" y2="12"></line>
                </svg>
                <span>İngilizce: ${surah.name_en}</span>
            </div>
        </div>
    </div>

    <div class="verses-container">
        ${surah.verses?.map((verse, index) => `
            <div class="verse-card ripple" onclick="app.navigateToVerse(${surah.id}, ${verse.verse_number})" style="animation-delay: ${index * 0.05}s;">
                <div class="verse-number-badge">${verse.verse_number}</div>
                <div class="verse-translation">${this.getPreferredTranslation(surah.id, verse.verse_number) || 'Meal bulunamadı'}</div>
                <div class="verse-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${verse.text}</div>
            </div>
        `).join('') || '<p>Bu surede ayet bulunamadı.</p>'}
    </div>
</div>
`;
}

getPreferredTranslation(surahId, verseNumber) {
// kuran_mealleri.json'dan seçilen yazarın mealini bul
if (this.translationsData) {
const translationSurah = this.translationsData.find(s => s.id === surahId);
const translationVerse = translationSurah?.verses?.find(v => v.verse_id === verseNumber);

if (translationVerse?.translations) {
    const preferredTranslation = translationVerse.translations.find(t => 
        t.author === this.settings.defaultTranslationAuthor && t.text && t.text.trim()
    );
    
    if (preferredTranslation) {
        return preferredTranslation.text;
    }
}
}

return null;
}

renderVerse(surahId, verseNumber) {
const surah = this.data?.find(s => s.id === surahId);
const verse = surah?.verses?.find(v => v.verse_number === verseNumber);

if (!surah || !verse) {
this.showError('Ayet bulunamadı.');
return;
}

const isFirstVerse = verseNumber === 1;
const isLastVerse = verseNumber === surah.verse_count;
const isSaved = this.isVerseSaved(surahId, verseNumber);

const content = document.getElementById('content');
content.innerHTML = `
<div class="verse-detail">
    <div class="breadcrumb">
        <a href="#" onclick="showHome()">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
            
        </a>
        <span>›</span>
        <a href="#sure-${surahId}">${surah.name}</a>
        <span>›</span>
        <span>${verseNumber}. Ayet</span>
    </div>
    
    <div class="verse-detail-header">
        <div class="verse-actions">
            <button class="save-btn ${isSaved ? 'saved' : ''} ripple" onclick="app.toggleSaveVerse(${surahId}, ${verseNumber})" title="${isSaved ? 'Kayıtlı' : 'Kaydet'}">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
                </svg>
            </button>
            <button class="share-btn ripple" onclick="app.shareVerse(${surahId}, ${verseNumber})" title="Paylaş">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                    <polyline points="16,6 12,2 8,6"></polyline>
                    <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
            </button>
            <button class="audio-btn-verse ripple" onclick="app.playVerseAudio(${surahId})" title="Dinle">
                <svg class="icon" viewBox="0 0 24 24">
                    <polygon points="5,3 19,12 5,21"></polygon>
                </svg>
            </button>
        </div>
        <div class="verse-detail-translation">${this.getPreferredTranslation(surahId, verseNumber) || 'Meal bulunamadı'}</div>
        <div class="verse-detail-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${verse.text}</div>
        ${verse.transcription_tr && this.settings.showTranscription ? `<div class="verse-detail-transcription">${verse.transcription_tr}</div>` : ''}
    </div>

    <div class="verse-navigation">
        <a href="#ayet-${surahId}-${verseNumber - 1}" class="nav-btn ripple ${isFirstVerse ? 'disabled' : ''}" ${isFirstVerse ? 'onclick="return false"' : ''}>
            <svg class="icon" viewBox="0 0 24 24">
                <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
            Önceki
        </a>
        <span style="color: var(--text-muted); font-size: 0.9rem;">${verseNumber} / ${surah.verse_count}</span>
        <a href="#ayet-${surahId}-${verseNumber + 1}" class="nav-btn ripple ${isLastVerse ? 'disabled' : ''}" ${isLastVerse ? 'onclick="return false"' : ''}>
            Sonraki
            <svg class="icon" viewBox="0 0 24 24">
                <polyline points="9,18 15,12 9,6"></polyline>
            </svg>
        </a>
    </div>

    <div class="tabs-container">
        <div class="tabs-nav">
            <button class="tab-button ripple active" onclick="app.switchTab('word-analysis')">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14,2 14,8 20,8"></polyline>
                </svg>
                Kelime Analizi
            </button>
            <button class="tab-button ripple" onclick="app.switchTab('translations')">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                Diğer Mealler
            </button>
        </div>

        <div id="word-analysis" class="tab-content active">
            <div class="words-analysis">
                <div class="words-grid">
                    ${verse.words?.map((word, index) => `
                        <div class="word-item ripple" onclick="app.navigateToWordDetail(${surahId}, ${verseNumber}, ${index})">
                            <div class="word-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${word.arabic}</div>
                            ${word.transcription_tr && this.settings.showTranscription ? `<div class="word-transcription">${word.transcription_tr}</div>` : ''}
                            ${word.translation_tr ? `<div class="word-translation">${word.translation_tr}</div>` : ''}
                            ${word.root ? `
                                <div class="word-root">
                                    Kök: <strong>${word.root.arabic} (${word.root.latin})</strong>
                                    ${word.root.meaning ? `<br><em>${word.root.meaning}</em>` : ''}
                                </div>
                            ` : ''}
                        </div>
                    `).join('') || '<p>Bu ayet için kelime analizi bulunamadı.</p>'}
                </div>
            </div>
        </div>

        <div id="translations" class="tab-content">
            <div class="translations-container">
                ${this.getAllTranslations(surahId, verseNumber).map(translation => `
                    <div class="translation-item">
                        <div class="translation-author">${translation.author}</div>
                        <div class="translation-text">${translation.text}</div>
                    </div>
                `).join('')}
            </div>
        </div>
    </div>
</div>
`;

// Update Arabic text visibility after rendering
this.updateArabicTextVisibility();
}

renderWordDetail(surahId, verseNumber, wordIndex) {
const surah = this.data?.find(s => s.id === surahId);
const verse = surah?.verses?.find(v => v.verse_number === verseNumber);
const word = verse?.words?.[wordIndex];

if (!surah || !verse || !word) {
this.showError('Kelime bulunamadı.');
return;
}

// Kelimenin geçtiği diğer ayetleri bul
const wordOccurrences = this.findWordOccurrences(word);

const content = document.getElementById('content');
content.innerHTML = `
<div class="word-detail">
    <div class="breadcrumb">
        <a href="#" onclick="showHome()">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
           
        </a>
        <span>›</span>
        <a href="#sure-${surahId}">${surah.name}</a>
        <span>›</span>
        <a href="#ayet-${surahId}-${verseNumber}">${verseNumber}. Ayet</a>
        <span>›</span>
        <span>Kelime Detayı</span>
    </div>
    
    <div class="word-detail-header">
        <div class="word-detail-title">
            <div class="word-arabic-large arabic ${this.settings.showArabicText ? '' : 'hidden'}">${word.arabic}</div>
        </div>
        ${word.transcription_tr && this.settings.showTranscription ? `<div class="word-transcription-large">${word.transcription_tr}</div>` : ''}
        ${word.translation_tr ? `<div class="word-meaning-large">${word.translation_tr}</div>` : ''}
        
        ${word.root ? `
            <div class="word-root-info">
                <div class="word-root-title">Kök Bilgisi</div>
                <div class="word-root-details">
                    <div class="word-root-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${word.root.arabic}</div>
                    <div class="word-root-latin" onclick="app.navigateToRoot('${word.root.latin}')">${word.root.latin}</div>
                    ${word.root.meaning ? `<div class="word-root-meaning">${word.root.meaning}</div>` : ''}
                </div>
            </div>
        ` : ''}
    </div>

    <div class="word-verses-section">
        <h3 class="word-verses-title">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
            Bu Kelimenin Geçtiği Ayetler (${wordOccurrences.length})
        </h3>
        <div class="word-verses-list">
            ${wordOccurrences.slice(0, 20).map((occurrence, index) => {
                const occSurah = this.data?.find(s => s.id === occurrence.surahId);
                const occVerse = occSurah?.verses?.find(v => v.verse_number === occurrence.verseNumber);
                const translation = this.getPreferredTranslation(occurrence.surahId, occurrence.verseNumber);
                
                return `
                    <div class="word-verse-item ripple" onclick="app.navigateToVerse(${occurrence.surahId}, ${occurrence.verseNumber})" style="animation-delay: ${index * 0.05}s;">
                        <div class="word-verse-reference">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                            </svg>
                            ${occSurah?.name} ${occurrence.verseNumber}. Ayet
                        </div>
                        <div class="word-verse-translation">${translation || 'Meal bulunamadı'}</div>
                        <div class="word-verse-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${occVerse?.text || ''}</div>
                        ${occVerse?.transcription_tr && this.settings.showTranscription ? `<div class="word-verse-transcription">${occVerse.transcription_tr}</div>` : ''}
                    </div>
                `;
            }).join('')}
            ${wordOccurrences.length > 20 ? `
                <div style="text-align: center; padding: 1rem; color: var(--text-secondary);">
                    Ve ${wordOccurrences.length - 20} ayet daha...
                </div>
            ` : ''}
        </div>
    </div>
</div>
`;

// Update Arabic text visibility after rendering
this.updateArabicTextVisibility();
}

renderRootDetail(rootLatin) {
if (!this.data || !rootLatin) {
this.showError('Kök bulunamadı.');
return;
}

// Kökten türeyen kelimeleri bul
const rootWords = this.findRootWords(rootLatin);
const rootInfo = this.getRootInfo(rootLatin);

if (rootWords.length === 0) {
this.showError('Bu kök için kelime bulunamadı.');
return;
}

const content = document.getElementById('content');
content.innerHTML = `
<div class="root-detail">
    <div class="breadcrumb">
        <a href="#" onclick="showHome()">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
           
        </a>
        <span>›</span>
        <span>Kök: ${rootLatin}</span>
    </div>
    
    <div class="root-detail-header">
        <div class="root-detail-title">
            <div class="root-arabic-large arabic ${this.settings.showArabicText ? '' : 'hidden'}">${rootInfo.arabic}</div>
        </div>
        <div class="root-latin-large">${rootLatin}</div>
        ${rootInfo.meaning ? `<div class="root-meaning-large">${rootInfo.meaning}</div>` : ''}
    </div>

    <div class="root-words-section">
        <h3 class="root-words-title">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14,2 14,8 20,8"></polyline>
            </svg>
            Bu Kökten Türeyen Kelimeler (${rootWords.length})
        </h3>
        <div class="root-words-grid">
            ${rootWords.map((wordData, index) => `
                <div class="root-word-item ripple" onclick="app.navigateToWordDetail(${wordData.surahId}, ${wordData.verseNumber}, ${wordData.wordIndex})" style="animation-delay: ${index * 0.05}s;">
                    <div class="root-word-arabic arabic ${this.settings.showArabicText ? '' : 'hidden'}">${wordData.word.arabic}</div>
                    ${wordData.word.transcription_tr && this.settings.showTranscription ? `<div class="root-word-transcription">${wordData.word.transcription_tr}</div>` : ''}
                    ${wordData.word.translation_tr ? `<div class="root-word-translation">${wordData.word.translation_tr}</div>` : ''}
                    <div class="root-word-count">${wordData.surahName} ${wordData.verseNumber}. Ayet</div>
                </div>
            `).join('')}
        </div>
    </div>
</div>
`;

// Update Arabic text visibility after rendering
this.updateArabicTextVisibility();
}

findRootWords(rootLatin) {
const rootWords = [];

if (!this.data || !rootLatin) return rootWords;

this.data.forEach(surah => {
surah.verses?.forEach(verse => {
    verse.words?.forEach((word, wordIndex) => {
        if (word.root && word.root.latin === rootLatin) {
            rootWords.push({
                surahId: surah.id,
                surahName: surah.name,
                verseNumber: verse.verse_number,
                wordIndex: wordIndex,
                word: word
            });
        }
    });
});
});

return rootWords;
}

getRootInfo(rootLatin) {
if (!this.data || !rootLatin) return { arabic: '', meaning: '' };

// İlk bulunan kök bilgisini döndür
for (const surah of this.data) {
for (const verse of surah.verses || []) {
    for (const word of verse.words || []) {
        if (word.root && word.root.latin === rootLatin) {
            return {
                arabic: word.root.arabic,
                meaning: word.root.meaning || ''
            };
        }
    }
}
}

return { arabic: rootLatin, meaning: '' };
}

navigateToRoot(rootLatin) {
window.location.hash = `kok-${rootLatin}`;
}

findWordOccurrences(targetWord) {
const occurrences = [];

if (!this.data || !targetWord.arabic) return occurrences;

this.data.forEach(surah => {
surah.verses?.forEach(verse => {
    verse.words?.forEach(word => {
        // Arapça metni karşılaştır
        if (word.arabic === targetWord.arabic || 
            (word.translation_tr && targetWord.translation_tr && 
             word.translation_tr.toLowerCase() === targetWord.translation_tr.toLowerCase())) {
            occurrences.push({
                surahId: surah.id,
                surahName: surah.name,
                verseNumber: verse.verse_number,
                word: word
            });
        }
    });
});
});

return occurrences;
}

countRootOccurrences(rootLatin) {
if (!this.data || !rootLatin) return 0;

let count = 0;
this.data.forEach(surah => {
surah.verses?.forEach(verse => {
    verse.words?.forEach(word => {
        if (word.root && word.root.latin === rootLatin) {
            count++;
        }
    });
});
});

return count;
}

navigateToWordDetail(surahId, verseNumber, wordIndex) {
window.location.hash = `kelime-${surahId}-${verseNumber}-${wordIndex}`;
}

getAllTranslations(surahId, verseNumber) {
const translations = [];

// kuran_mealleri.json'dan meal yazarlarını ve metinlerini çek
if (this.translationsData) {
const translationSurah = this.translationsData.find(s => s.id === surahId);
const translationVerse = translationSurah?.verses?.find(v => v.verse_id === verseNumber);

if (translationVerse?.translations) {
    translationVerse.translations.forEach(translation => {
        // Aynı yazardan birden fazla meal varsa sadece birini al
        const existingAuthor = translations.find(t => t.author === translation.author);
        if (!existingAuthor && translation.text && translation.text.trim()) {
            translations.push({
                author: translation.author,
                text: translation.text
            });
        }
    });
}
}

// Eğer hiç meal yoksa varsayılan mesaj
if (translations.length === 0) {
translations.push({
    author: "Bilgi",
    text: "Bu ayet için meal bulunamadı."
});
}

return translations;
}

renderSavedVerses() {
const content = document.getElementById('content');

if (this.savedVerses.length === 0) {
content.innerHTML = `
    <div class="saved-verses">
        <div class="breadcrumb">
            <a href="#" onclick="showHome()">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9,22 9,12 15,12 15,22"></polyline>
                </svg>
           
        </a>
        <span>›</span>
        <span>Kaydedilen Ayetler</span>
        </div>
        
        <div class="text-center" style="padding: 4rem 2rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;">📖</div>
            <h2>Henüz kaydettiğiniz ayet yok</h2>
            <p style="color: var(--text-secondary); margin-top: 1rem;">Beğendiğiniz ayetleri kaydetmek için ayet sayfalarındaki kaydet butonunu kullanın.</p>
            <a href="#" onclick="showHome()" style="display: inline-block; margin-top: 2rem; padding: 1rem 2rem; background: var(--primary-color); color: var(--bg-primary); text-decoration: none; border-radius: 8px;">Ana Sayfaya Dön</a>
        </div>
    </div>
`;
return;
}

content.innerHTML = `
<div class="saved-verses">
    <div class="breadcrumb">
        <a href="#" onclick="showHome()">
            <svg class="icon" viewBox="0 0 24 24">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9,22 9,12 15,12 15,22"></polyline>
            </svg>
        </a>
        <span>›</span>
        <span>Kaydedilen Ayetler</span>
    </div>
    
    <div style="text-align: center; margin-bottom: 2rem;">
        <h1 style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 0.5rem;">Kaydedilen Ayetler</h1>
        <p style="color: var(--text-secondary);">${this.savedVerses.length} ayet kaydedildi</p>
    </div>

    ${this.savedVerses.map((savedVerse, index) => {
        const surah = this.data?.find(s => s.id === savedVerse.surahId);
        const verse = surah?.verses?.find(v => v.verse_number === savedVerse.verseNumber);
        
        return `
            <div class="saved-verse-item" style="animation-delay: ${index * 0.1}s;">
                <div class="saved-verse-header">
                    <div class="saved-verse-title">
                        <a href="#ayet-${savedVerse.surahId}-${savedVerse.verseNumber}" style="color: inherit; text-decoration: none;">
                            ${surah?.name} ${savedVerse.verseNumber}. Ayet
                        </a>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div class="saved-verse-date">${new Date(savedVerse.savedAt).toLocaleDateString('tr-TR')}</div>
                        <button class="remove-saved-btn ripple" onclick="app.removeSavedVerse(${savedVerse.surahId}, ${savedVerse.verseNumber})" title="Kaldır">
                            <svg class="icon" viewBox="0 0 24 24">
                                <polyline points="3,6 5,6 21,6"></polyline>
                                <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="font-size: 1.1rem; line-height: 1.6; margin-bottom: 0.5rem; text-align: left; background: var(--bg-tertiary); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">${this.getPreferredTranslation(savedVerse.surahId, savedVerse.verseNumber) || 'Meal bulunamadı'}</div>
                    <div class="arabic ${this.settings.showArabicText ? '' : 'hidden'}" style="font-size: 1.3rem; padding: 1rem; background: transparent; border-radius: 8px; text-align: right;">${verse?.text || 'Ayet metni bulunamadı'}</div>
                </div>
                ${savedVerse.note ? `
                    <div class="saved-verse-note">
                        <strong>Notunuz:</strong> ${savedVerse.note}
                    </div>
                ` : ''}
            </div>
        `;
    }).join('')}
</div>
`;

// Update Arabic text visibility after rendering
this.updateArabicTextVisibility();
}

navigateToVerse(surahId, verseNumber) {
window.location.hash = `ayet-${surahId}-${verseNumber}`;
}

navigateToNextVerse() {
if (!this.currentSurahId || !this.currentVerseNumber) return;

const surah = this.data?.find(s => s.id === this.currentSurahId);
if (!surah) return;

if (this.currentVerseNumber < surah.verse_count) {
window.location.hash = `ayet-${this.currentSurahId}-${this.currentVerseNumber + 1}`;
}
}

navigateToPreviousVerse() {
if (!this.currentSurahId || !this.currentVerseNumber) return;

if (this.currentVerseNumber > 1) {
window.location.hash = `ayet-${this.currentSurahId}-${this.currentVerseNumber - 1}`;
}
}

switchTab(tabId) {
document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

event.target.classList.add('active');
document.getElementById(tabId).classList.add('active');
}

search(query) {
const results = [];
const queryLower = query.toLowerCase();

this.searchIndex.forEach((categoryMap, category) => {
categoryMap.forEach((items, term) => {
    if (term.includes(queryLower)) {
        results.push(...items);
    }
});
});

const uniqueResults = results.filter((result, index, self) => 
index === self.findIndex(r => r.id === result.id && r.type === result.type)
);

return uniqueResults.slice(0, 50);
}

showSavedVerses() {
window.location.hash = 'kaydedilenler';
}

isVerseSaved(surahId, verseNumber) {
return this.savedVerses.some(v => v.surahId === surahId && v.verseNumber === verseNumber);
}

toggleSaveVerse(surahId, verseNumber) {
if (this.isVerseSaved(surahId, verseNumber)) {
this.removeSavedVerse(surahId, verseNumber);
} else {
this.pendingSaveVerse = { surahId, verseNumber };
this.showSaveModal();
}
}

showSaveModal() {
const modal = document.getElementById('saveModal');
const input = document.getElementById('saveNoteInput');
modal.classList.add('active');
setTimeout(() => input.focus(), 100);
}

closeSaveModal() {
const modal = document.getElementById('saveModal');
const input = document.getElementById('saveNoteInput');
modal.classList.remove('active');
input.value = '';
this.pendingSaveVerse = null;
}

confirmSaveVerse() {
if (!this.pendingSaveVerse) return;

const note = document.getElementById('saveNoteInput').value;
const savedVerse = {
surahId: this.pendingSaveVerse.surahId,
verseNumber: this.pendingSaveVerse.verseNumber,
note: note,
savedAt: new Date().toISOString()
};

this.savedVerses.push(savedVerse);
localStorage.setItem('savedVerses', JSON.stringify(this.savedVerses));

this.closeSaveModal();
this.showNotification('Ayet kaydedildi!');

if (this.currentSurahId === this.pendingSaveVerse.surahId && 
this.currentVerseNumber === this.pendingSaveVerse.verseNumber) {
const saveBtn = document.querySelector('.save-btn');
if (saveBtn) {
    saveBtn.classList.add('saved');
    saveBtn.title = 'Kayıtlı';
}
}
}

removeSavedVerse(surahId, verseNumber) {
this.savedVerses = this.savedVerses.filter(v => 
!(v.surahId === surahId && v.verseNumber === verseNumber)
);
localStorage.setItem('savedVerses', JSON.stringify(this.savedVerses));

this.showNotification('Ayet kaydedilenlerden kaldırıldı');

if (this.currentSurahId === surahId && this.currentVerseNumber === verseNumber) {
const saveBtn = document.querySelector('.save-btn');
if (saveBtn) {
    saveBtn.classList.remove('saved');
    saveBtn.title = 'Kaydet';
}
}

if (this.currentHash === 'kaydedilenler') {
this.renderSavedVerses();
}
}

shareVerse(surahId, verseNumber) {
const url = `${window.location.origin}${window.location.pathname}#ayet-${surahId}-${verseNumber}`;

if (navigator.share) {
const surah = this.data?.find(s => s.id === surahId);
const verse = surah?.verses?.find(v => v.verse_number === verseNumber);

navigator.share({
    title: `${surah?.name} ${verseNumber}. Ayet`,
    text: this.getPreferredTranslation(surahId, verseNumber) || '',
    url: url
});
} else {
navigator.clipboard.writeText(url).then(() => {
    this.showNotification('Ayet linki kopyalandı!');
});
}
}

playSurah(surahId) {
const surah = this.data?.find(s => s.id === surahId);
if (!surah) return;

const audioUrl = `https://api.sadecekuran.com.tr/${surahId}.mp3`;
const audioElement = document.getElementById('audioElement');
const audioPlayer = document.getElementById('audioPlayer');
const audioTitle = document.getElementById('audioTitle');

if (this.currentAudio && !this.currentAudio.paused) {
this.currentAudio.pause();
}

audioElement.src = audioUrl;
audioElement.volume = this.audioState.volume;
audioTitle.textContent = `${surah.name} Suresi`;
audioPlayer.classList.add('active');

this.currentAudio = audioElement;
this.currentSurahId = surahId;
this.audioState.isPlaying = false;

this.removeAudioEventListeners();
this.addAudioEventListeners();

if (this.settings.autoPlay) {
audioElement.play().catch(error => {
    console.log('Autoplay prevented:', error);
});
}
}

playVerseAudio(surahId) {
this.playSurah(surahId);
}

removeAudioEventListeners() {
const audioElement = document.getElementById('audioElement');
if (audioElement) {
audioElement.removeEventListener('loadstart', this.handleLoadStart);
audioElement.removeEventListener('canplay', this.handleCanPlay);
audioElement.removeEventListener('loadedmetadata', this.handleLoadedMetadata);
audioElement.removeEventListener('timeupdate', this.handleTimeUpdate);
audioElement.removeEventListener('ended', this.handleEnded);
audioElement.removeEventListener('error', this.handleError);
audioElement.removeEventListener('play', this.handlePlay);
audioElement.removeEventListener('pause', this.handlePause);
}
}

addAudioEventListeners() {
const audioElement = document.getElementById('audioElement');
if (!audioElement) return;

this.handleLoadStart = () => {
this.updatePlayButton('loading');
};

this.handleCanPlay = () => {
this.updatePlayButton('play');
};

this.handleLoadedMetadata = () => {
const totalTimeEl = document.getElementById('totalTime');
if (totalTimeEl) {
    totalTimeEl.textContent = this.formatTime(audioElement.duration);
}
};

this.handleTimeUpdate = () => {
if (audioElement.duration) {
    const progress = (audioElement.currentTime / audioElement.duration) * 100;
    const audioProgressBar = document.getElementById('audioProgressBar');
    const currentTimeEl = document.getElementById('currentTime');
    
    if (audioProgressBar) {
        audioProgressBar.style.width = progress + '%';
    }
    if (currentTimeEl) {
        currentTimeEl.textContent = this.formatTime(audioElement.currentTime);
    }
    
    this.audioState.currentTime = audioElement.currentTime;
}
};

this.handleEnded = () => {
if (this.audioState.isRepeat) {
    audioElement.currentTime = 0;
    audioElement.play();
} else {
    this.closeAudio();
}
};

this.handleError = (error) => {
console.error('Audio error:', error);
this.closeAudio();
};

this.handlePlay = () => {
this.audioState.isPlaying = true;
this.updatePlayButton('pause');
};

this.handlePause = () => {
this.audioState.isPlaying = false;
this.updatePlayButton('play');
};

audioElement.addEventListener('loadstart', this.handleLoadStart);
audioElement.addEventListener('canplay', this.handleCanPlay);
audioElement.addEventListener('loadedmetadata', this.handleLoadedMetadata);
audioElement.addEventListener('timeupdate', this.handleTimeUpdate);
audioElement.addEventListener('ended', this.handleEnded);
audioElement.addEventListener('error', this.handleError);
audioElement.addEventListener('play', this.handlePlay);
audioElement.addEventListener('pause', this.handlePause);
}

updatePlayButton(state) {
const audioPlayBtn = document.getElementById('audioPlayBtn');
if (!audioPlayBtn) return;

switch (state) {
case 'loading':
    audioPlayBtn.innerHTML = `
        <svg class="icon" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="10,8 16,12 10,16"></polyline>
        </svg>
    `;
    break;
case 'play':
    audioPlayBtn.innerHTML = `
        <svg class="icon" viewBox="0 0 24 24">
            <polygon points="5,3 19,12 5,21"></polygon>
        </svg>
    `;
    break;
case 'pause':
    audioPlayBtn.innerHTML = `
        <svg class="icon" viewBox="0 0 24 24">
            <rect x="6" y="4" width="4" height="16"></rect>
            <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
    `;
    break;
}
}

formatTime(seconds) {
if (isNaN(seconds)) return '0:00';
const minutes = Math.floor(seconds / 60);
const remainingSeconds = Math.floor(seconds % 60);
return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
}

seekAudio(event) {
const audioElement = document.getElementById('audioElement');
if (!audioElement || !audioElement.duration) return;

const progressBar = event.currentTarget;
const rect = progressBar.getBoundingClientRect();
const clickX = event.clientX - rect.left;
const width = rect.width;
const percentage = clickX / width;

audioElement.currentTime = audioElement.duration * percentage;
}

toggleAudio() {
const audioElement = document.getElementById('audioElement');
if (!audioElement) return;

if (audioElement.paused) {
audioElement.play().catch(error => {
    console.log('Play failed:', error);
    this.showNotification('Ses çalınamadı');
});
} else {
audioElement.pause();
}
}

previousTrack() {
if (this.currentSurahId && this.currentSurahId > 1) {
this.playSurah(this.currentSurahId - 1);
}
}

nextTrack() {
if (this.currentSurahId && this.currentSurahId < 114) {
this.playSurah(this.currentSurahId + 1);
}
}

toggleRepeat() {
this.audioState.isRepeat = !this.audioState.isRepeat;
const repeatBtn = document.getElementById('audioRepeatBtn');
if (repeatBtn) {
repeatBtn.style.color = this.audioState.isRepeat ? 'var(--primary-color)' : 'var(--text-secondary)';
}
this.showNotification(this.audioState.isRepeat ? 'Tekrar açık' : 'Tekrar kapalı');
}

toggleShuffle() {
this.audioState.isShuffle = !this.audioState.isShuffle;
const shuffleBtn = document.getElementById('audioShuffleBtn');
if (shuffleBtn) {
shuffleBtn.style.color = this.audioState.isShuffle ? 'var(--primary-color)' : 'var(--text-secondary)';
}
this.showNotification(this.audioState.isShuffle ? 'Karıştırma açık' : 'Karıştırma kapalı');
}

toggleMute() {
const audioElement = document.getElementById('audioElement');
const volumeIcon = document.getElementById('volumeIcon');

if (!audioElement || !volumeIcon) return;

this.audioState.isMuted = !this.audioState.isMuted;
audioElement.muted = this.audioState.isMuted;

if (this.audioState.isMuted) {
volumeIcon.innerHTML = `
    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
    <line x1="23" y1="9" x2="17" y2="15"></line>
    <line x1="17" y1="9" x2="23" y2="15"></line>
`;
} else {
volumeIcon.innerHTML = `
    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
`;
}
}

setAudioVolume(value) {
const audioElement = document.getElementById('audioElement');
if (audioElement) {
this.audioState.volume = value / 100;
audioElement.volume = this.audioState.volume;

if (this.audioState.volume === 0) {
    this.audioState.isMuted = true;
    audioElement.muted = true;
} else {
    this.audioState.isMuted = false;
    audioElement.muted = false;
}

this.updateVolumeIcon();
}
}

updateVolumeIcon() {
const volumeIcon = document.getElementById('volumeIcon');
if (!volumeIcon) return;

if (this.audioState.isMuted || this.audioState.volume === 0) {
volumeIcon.innerHTML = `
    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
    <line x1="23" y1="9" x2="17" y2="15"></line>
    <line x1="17" y1="9" x2="23" y2="15"></line>
`;
} else if (this.audioState.volume < 0.5) {
volumeIcon.innerHTML = `
    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
`;
} else {
volumeIcon.innerHTML = `
    <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
`;
}
}

closeAudio() {
const audioElement = document.getElementById('audioElement');
const audioPlayer = document.getElementById('audioPlayer');
const audioProgressBar = document.getElementById('audioProgressBar');
const currentTimeEl = document.getElementById('currentTime');
const totalTimeEl = document.getElementById('totalTime');

if (audioElement) {
audioElement.pause();
audioElement.src = '';
this.removeAudioEventListeners();
}

if (audioPlayer) {
audioPlayer.classList.remove('active');
}

if (audioProgressBar) {
audioProgressBar.style.width = '0%';
}

if (currentTimeEl) {
currentTimeEl.textContent = '0:00';
}

if (totalTimeEl) {
totalTimeEl.textContent = '0:00';
}

this.updatePlayButton('play');
this.currentAudio = null;
this.audioState.isPlaying = false;
this.audioState.currentTime = 0;
this.audioState.duration = 0;
}

// Scroll to top function
scrollToTop() {
window.scrollTo({
top: 0,
behavior: 'smooth'
});
}

showLoading() {
const content = document.getElementById('content');
content.innerHTML = `
<div class="loading">
    <div class="spinner"></div>
    <div class="loading-text">Kuran verileri yükleniyor...</div>
</div>
`;
}

showError(message) {
const content = document.getElementById('content');
content.innerHTML = `
<div class="error">
    <strong>Hata:</strong> ${message}
</div>
`;
}

showNotification(message) {
const notification = document.createElement('div');
notification.style.cssText = `
position: fixed;
top: 80px;
right: 20px;
background: var(--bg-secondary);
color: var(--text-primary);
padding: 1rem 1.5rem;
border-radius: 12px;
border: 1px solid var(--border-color);
z-index: 1000;
animation: slideInRight 0.3s ease;
backdrop-filter: blur(10px);
box-shadow: 0 8px 32px var(--shadow-dark);
`;
notification.textContent = message;
document.body.appendChild(notification);

setTimeout(() => {
notification.style.animation = 'slideOutRight 0.3s ease forwards';
setTimeout(() => notification.remove(), 300);
}, 3000);
}
}

// Ripple effect functionality
function createRipple(event) {
const button = event.currentTarget;

// Don't add ripple if element is disabled
if (button.disabled || button.classList.contains('disabled')) {
return;
}

const circle = document.createElement("span");
const diameter = Math.max(button.clientWidth, button.clientHeight);
const radius = diameter / 2;

const rect = button.getBoundingClientRect();
const x = event.clientX - rect.left - radius;
const y = event.clientY - rect.top - radius;

circle.style.width = circle.style.height = `${diameter}px`;
circle.style.left = `${x}px`;
circle.style.top = `${y}px`;
circle.classList.add("ripple-effect");

const ripple = button.getElementsByClassName("ripple-effect")[0];
if (ripple) {
ripple.remove();
}

button.appendChild(circle);

// Remove the ripple element after animation
setTimeout(() => {
if (circle.parentNode) {
    circle.remove();
}
}, 600);
}

// Add ripple effect to all elements with ripple class
document.addEventListener('DOMContentLoaded', function() {
// Add event listeners for ripple effect
function addRippleListeners() {
const rippleElements = document.querySelectorAll('.ripple');
rippleElements.forEach(element => {
    // Remove existing listeners to avoid duplicates
    element.removeEventListener('click', createRipple);
    element.removeEventListener('touchstart', createRipple);
    
    // Add new listeners
    element.addEventListener('click', createRipple);
    element.addEventListener('touchstart', createRipple);
});
}

// Initial setup
addRippleListeners();

// Re-add listeners when new content is loaded
const observer = new MutationObserver(function(mutations) {
mutations.forEach(function(mutation) {
    if (mutation.type === 'childList') {
        addRippleListeners();
    }
});
});

observer.observe(document.body, {
childList: true,
subtree: true
});
});

function showHome() {
window.location.hash = '';
}

const app = new QuranApp();
</script>
<script>
if ("serviceWorker" in navigator) {
window.addEventListener("load", function () {
navigator.serviceWorker.register("/service-worker.js")
.then(function (registration) {
console.log("Service Worker kayıtlı:", registration.scope);
})
.catch(function (error) {
console.log("Service Worker hatası:", error);
});
});
}
</script>

</body>
</html>
